(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function jv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ag={exports:{}},gl={},lg={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eo=Symbol.for("react.element"),Kv=Symbol.for("react.portal"),Fv=Symbol.for("react.fragment"),Hv=Symbol.for("react.strict_mode"),Bv=Symbol.for("react.profiler"),zv=Symbol.for("react.provider"),$v=Symbol.for("react.context"),Yv=Symbol.for("react.forward_ref"),Gv=Symbol.for("react.suspense"),qv=Symbol.for("react.memo"),Wv=Symbol.for("react.lazy"),Lf=Symbol.iterator;function Qv(t){return t===null||typeof t!="object"?null:(t=Lf&&t[Lf]||t["@@iterator"],typeof t=="function"?t:null)}var ug={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cg=Object.assign,hg={};function Os(t,e,n){this.props=t,this.context=e,this.refs=hg,this.updater=n||ug}Os.prototype.isReactComponent={};Os.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Os.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dg(){}dg.prototype=Os.prototype;function uh(t,e,n){this.props=t,this.context=e,this.refs=hg,this.updater=n||ug}var ch=uh.prototype=new dg;ch.constructor=uh;cg(ch,Os.prototype);ch.isPureReactComponent=!0;var Df=Array.isArray,fg=Object.prototype.hasOwnProperty,hh={current:null},pg={key:!0,ref:!0,__self:!0,__source:!0};function mg(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)fg.call(e,r)&&!pg.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Eo,type:t,key:i,ref:a,props:s,_owner:hh.current}}function Jv(t,e){return{$$typeof:Eo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function dh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Eo}function Zv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Vf=/\/+/g;function cu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Zv(""+t.key):e.toString(36)}function fa(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Eo:case Kv:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+cu(a,0):r,Df(s)?(n="",t!=null&&(n=t.replace(Vf,"$&/")+"/"),fa(s,e,n,"",function(d){return d})):s!=null&&(dh(s)&&(s=Jv(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Vf,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Df(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+cu(i,l);a+=fa(i,e,n,u,s)}else if(u=Qv(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+cu(i,l++),a+=fa(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function $o(t,e,n){if(t==null)return t;var r=[],s=0;return fa(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Xv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ft={current:null},pa={transition:null},e_={ReactCurrentDispatcher:ft,ReactCurrentBatchConfig:pa,ReactCurrentOwner:hh};function gg(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:$o,forEach:function(t,e,n){$o(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $o(t,function(){e++}),e},toArray:function(t){return $o(t,function(e){return e})||[]},only:function(t){if(!dh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=Os;se.Fragment=Fv;se.Profiler=Bv;se.PureComponent=uh;se.StrictMode=Hv;se.Suspense=Gv;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e_;se.act=gg;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=cg({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=hh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)fg.call(e,u)&&!pg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Eo,type:t.type,key:s,ref:i,props:r,_owner:a}};se.createContext=function(t){return t={$$typeof:$v,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zv,_context:t},t.Consumer=t};se.createElement=mg;se.createFactory=function(t){var e=mg.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:Yv,render:t}};se.isValidElement=dh;se.lazy=function(t){return{$$typeof:Wv,_payload:{_status:-1,_result:t},_init:Xv}};se.memo=function(t,e){return{$$typeof:qv,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=pa.transition;pa.transition={};try{t()}finally{pa.transition=e}};se.unstable_act=gg;se.useCallback=function(t,e){return ft.current.useCallback(t,e)};se.useContext=function(t){return ft.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return ft.current.useDeferredValue(t)};se.useEffect=function(t,e){return ft.current.useEffect(t,e)};se.useId=function(){return ft.current.useId()};se.useImperativeHandle=function(t,e,n){return ft.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return ft.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return ft.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return ft.current.useMemo(t,e)};se.useReducer=function(t,e,n){return ft.current.useReducer(t,e,n)};se.useRef=function(t){return ft.current.useRef(t)};se.useState=function(t){return ft.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return ft.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return ft.current.useTransition()};se.version="18.3.1";lg.exports=se;var ne=lg.exports;const t_=jv(ne);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_=ne,r_=Symbol.for("react.element"),s_=Symbol.for("react.fragment"),i_=Object.prototype.hasOwnProperty,o_=n_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a_={key:!0,ref:!0,__self:!0,__source:!0};function yg(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)i_.call(e,r)&&!a_.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:r_,type:t,key:i,ref:a,props:s,_owner:o_.current}}gl.Fragment=s_;gl.jsx=yg;gl.jsxs=yg;ag.exports=gl;var h=ag.exports,Yu={},Ag={exports:{}},kt={},vg={exports:{}},_g={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Q){var ee=B.length;B.push(Q);e:for(;0<ee;){var H=ee-1>>>1,Z=B[H];if(0<s(Z,Q))B[H]=Q,B[ee]=Z,ee=H;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Q=B[0],ee=B.pop();if(ee!==Q){B[0]=ee;e:for(var H=0,Z=B.length,we=Z>>>1;H<we;){var Ee=2*(H+1)-1,xt=B[Ee],ut=Ee+1,wt=B[ut];if(0>s(xt,ee))ut<Z&&0>s(wt,xt)?(B[H]=wt,B[ut]=ee,H=ut):(B[H]=xt,B[Ee]=ee,H=Ee);else if(ut<Z&&0>s(wt,ee))B[H]=wt,B[ut]=ee,H=ut;else break e}}return Q}function s(B,Q){var ee=B.sortIndex-Q.sortIndex;return ee!==0?ee:B.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],d=[],p=1,y=null,g=3,R=!1,C=!1,b=!1,O=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(B){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=B)r(d),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(d)}}function L(B){if(b=!1,w(B),!C)if(n(u)!==null)C=!0,hn(j);else{var Q=n(d);Q!==null&&dn(L,Q.startTime-B)}}function j(B,Q){C=!1,b&&(b=!1,I(A),A=-1),R=!0;var ee=g;try{for(w(Q),y=n(u);y!==null&&(!(y.expirationTime>Q)||B&&!N());){var H=y.callback;if(typeof H=="function"){y.callback=null,g=y.priorityLevel;var Z=H(y.expirationTime<=Q);Q=t.unstable_now(),typeof Z=="function"?y.callback=Z:y===n(u)&&r(u),w(Q)}else r(u);y=n(u)}if(y!==null)var we=!0;else{var Ee=n(d);Ee!==null&&dn(L,Ee.startTime-Q),we=!1}return we}finally{y=null,g=ee,R=!1}}var K=!1,_=null,A=-1,E=5,x=-1;function N(){return!(t.unstable_now()-x<E)}function S(){if(_!==null){var B=t.unstable_now();x=B;var Q=!0;try{Q=_(!0,B)}finally{Q?T():(K=!1,_=null)}}else K=!1}var T;if(typeof v=="function")T=function(){v(S)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,mt=fe.port2;fe.port1.onmessage=S,T=function(){mt.postMessage(null)}}else T=function(){O(S,0)};function hn(B){_=B,K||(K=!0,T())}function dn(B,Q){A=O(function(){B(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){C||R||(C=!0,hn(j))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var ee=g;g=Q;try{return B()}finally{g=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ee=g;g=B;try{return Q()}finally{g=ee}},t.unstable_scheduleCallback=function(B,Q,ee){var H=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?H+ee:H):ee=H,B){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ee+Z,B={id:p++,callback:Q,priorityLevel:B,startTime:ee,expirationTime:Z,sortIndex:-1},ee>H?(B.sortIndex=ee,e(d,B),n(u)===null&&B===n(d)&&(b?(I(A),A=-1):b=!0,dn(L,ee-H))):(B.sortIndex=Z,e(u,B),C||R||(C=!0,hn(j))),B},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(B){var Q=g;return function(){var ee=g;g=Q;try{return B.apply(this,arguments)}finally{g=ee}}}})(_g);vg.exports=_g;var l_=vg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u_=ne,Ct=l_;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Eg=new Set,Yi={};function Ur(t,e){Ts(t,e),Ts(t+"Capture",e)}function Ts(t,e){for(Yi[t]=e,t=0;t<e.length;t++)Eg.add(e[t])}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gu=Object.prototype.hasOwnProperty,c_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Of={},Uf={};function h_(t){return Gu.call(Uf,t)?!0:Gu.call(Of,t)?!1:c_.test(t)?Uf[t]=!0:(Of[t]=!0,!1)}function d_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function f_(t,e,n,r){if(e===null||typeof e>"u"||d_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){et[t]=new pt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];et[e]=new pt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){et[t]=new pt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){et[t]=new pt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){et[t]=new pt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){et[t]=new pt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){et[t]=new pt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){et[t]=new pt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){et[t]=new pt(t,5,!1,t.toLowerCase(),null,!1,!1)});var fh=/[\-:]([a-z])/g;function ph(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fh,ph);et[e]=new pt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fh,ph);et[e]=new pt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fh,ph);et[e]=new pt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){et[t]=new pt(t,1,!1,t.toLowerCase(),null,!1,!1)});et.xlinkHref=new pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){et[t]=new pt(t,1,!1,t.toLowerCase(),null,!0,!0)});function mh(t,e,n,r){var s=et.hasOwnProperty(e)?et[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(f_(e,n,s,r)&&(n=null),r||s===null?h_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var In=u_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yo=Symbol.for("react.element"),es=Symbol.for("react.portal"),ts=Symbol.for("react.fragment"),gh=Symbol.for("react.strict_mode"),qu=Symbol.for("react.profiler"),Tg=Symbol.for("react.provider"),xg=Symbol.for("react.context"),yh=Symbol.for("react.forward_ref"),Wu=Symbol.for("react.suspense"),Qu=Symbol.for("react.suspense_list"),Ah=Symbol.for("react.memo"),Ln=Symbol.for("react.lazy"),wg=Symbol.for("react.offscreen"),jf=Symbol.iterator;function hi(t){return t===null||typeof t!="object"?null:(t=jf&&t[jf]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,hu;function Ei(t){if(hu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hu=e&&e[1]||""}return`
`+hu+t}var du=!1;function fu(t,e){if(!t||du)return"";du=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{du=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ei(t):""}function p_(t){switch(t.tag){case 5:return Ei(t.type);case 16:return Ei("Lazy");case 13:return Ei("Suspense");case 19:return Ei("SuspenseList");case 0:case 2:case 15:return t=fu(t.type,!1),t;case 11:return t=fu(t.type.render,!1),t;case 1:return t=fu(t.type,!0),t;default:return""}}function Ju(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ts:return"Fragment";case es:return"Portal";case qu:return"Profiler";case gh:return"StrictMode";case Wu:return"Suspense";case Qu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xg:return(t.displayName||"Context")+".Consumer";case Tg:return(t._context.displayName||"Context")+".Provider";case yh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ah:return e=t.displayName||null,e!==null?e:Ju(t.type)||"Memo";case Ln:e=t._payload,t=t._init;try{return Ju(t(e))}catch{}}return null}function m_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ju(e);case 8:return e===gh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ig(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function g_(t){var e=Ig(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Go(t){t._valueTracker||(t._valueTracker=g_(t))}function Ng(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ig(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ka(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Zu(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Kf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Xn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Rg(t,e){e=e.checked,e!=null&&mh(t,"checked",e,!1)}function Xu(t,e){Rg(t,e);var n=Xn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ec(t,e.type,n):e.hasOwnProperty("defaultValue")&&ec(t,e.type,Xn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ff(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ec(t,e,n){(e!=="number"||ka(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ti=Array.isArray;function ds(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Xn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function tc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Ti(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Xn(n)}}function Sg(t,e){var n=Xn(e.value),r=Xn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Bf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Pg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Pg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qo,Cg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qo=qo||document.createElement("div"),qo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Gi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Pi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},y_=["Webkit","ms","Moz","O"];Object.keys(Pi).forEach(function(t){y_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Pi[e]=Pi[t]})});function kg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Pi.hasOwnProperty(t)&&Pi[t]?(""+e).trim():e+"px"}function bg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=kg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var A_=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rc(t,e){if(e){if(A_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function sc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ic=null;function vh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var oc=null,fs=null,ps=null;function zf(t){if(t=wo(t)){if(typeof oc!="function")throw Error(U(280));var e=t.stateNode;e&&(e=El(e),oc(t.stateNode,t.type,e))}}function Mg(t){fs?ps?ps.push(t):ps=[t]:fs=t}function Lg(){if(fs){var t=fs,e=ps;if(ps=fs=null,zf(t),e)for(t=0;t<e.length;t++)zf(e[t])}}function Dg(t,e){return t(e)}function Vg(){}var pu=!1;function Og(t,e,n){if(pu)return t(e,n);pu=!0;try{return Dg(t,e,n)}finally{pu=!1,(fs!==null||ps!==null)&&(Vg(),Lg())}}function qi(t,e){var n=t.stateNode;if(n===null)return null;var r=El(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var ac=!1;if(An)try{var di={};Object.defineProperty(di,"passive",{get:function(){ac=!0}}),window.addEventListener("test",di,di),window.removeEventListener("test",di,di)}catch{ac=!1}function v_(t,e,n,r,s,i,a,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var Ci=!1,ba=null,Ma=!1,lc=null,__={onError:function(t){Ci=!0,ba=t}};function E_(t,e,n,r,s,i,a,l,u){Ci=!1,ba=null,v_.apply(__,arguments)}function T_(t,e,n,r,s,i,a,l,u){if(E_.apply(this,arguments),Ci){if(Ci){var d=ba;Ci=!1,ba=null}else throw Error(U(198));Ma||(Ma=!0,lc=d)}}function jr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ug(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $f(t){if(jr(t)!==t)throw Error(U(188))}function x_(t){var e=t.alternate;if(!e){if(e=jr(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return $f(s),t;if(i===r)return $f(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function jg(t){return t=x_(t),t!==null?Kg(t):null}function Kg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Kg(t);if(e!==null)return e;t=t.sibling}return null}var Fg=Ct.unstable_scheduleCallback,Yf=Ct.unstable_cancelCallback,w_=Ct.unstable_shouldYield,I_=Ct.unstable_requestPaint,Me=Ct.unstable_now,N_=Ct.unstable_getCurrentPriorityLevel,_h=Ct.unstable_ImmediatePriority,Hg=Ct.unstable_UserBlockingPriority,La=Ct.unstable_NormalPriority,R_=Ct.unstable_LowPriority,Bg=Ct.unstable_IdlePriority,yl=null,nn=null;function S_(t){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(yl,t,void 0,(t.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:k_,P_=Math.log,C_=Math.LN2;function k_(t){return t>>>=0,t===0?32:31-(P_(t)/C_|0)|0}var Wo=64,Qo=4194304;function xi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Da(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=xi(l):(i&=a,i!==0&&(r=xi(i)))}else a=n&~s,a!==0?r=xi(a):i!==0&&(r=xi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-$t(e),s=1<<n,r|=t[n],e&=~s;return r}function b_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function M_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-$t(i),l=1<<a,u=s[a];u===-1?(!(l&n)||l&r)&&(s[a]=b_(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function uc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zg(){var t=Wo;return Wo<<=1,!(Wo&4194240)&&(Wo=64),t}function mu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function To(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$t(e),t[e]=n}function L_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-$t(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Eh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-$t(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var de=0;function $g(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Yg,Th,Gg,qg,Wg,cc=!1,Jo=[],Fn=null,Hn=null,Bn=null,Wi=new Map,Qi=new Map,Vn=[],D_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gf(t,e){switch(t){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":Hn=null;break;case"mouseover":case"mouseout":Bn=null;break;case"pointerover":case"pointerout":Wi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qi.delete(e.pointerId)}}function fi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=wo(e),e!==null&&Th(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function V_(t,e,n,r,s){switch(e){case"focusin":return Fn=fi(Fn,t,e,n,r,s),!0;case"dragenter":return Hn=fi(Hn,t,e,n,r,s),!0;case"mouseover":return Bn=fi(Bn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Wi.set(i,fi(Wi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Qi.set(i,fi(Qi.get(i)||null,t,e,n,r,s)),!0}return!1}function Qg(t){var e=Tr(t.target);if(e!==null){var n=jr(e);if(n!==null){if(e=n.tag,e===13){if(e=Ug(n),e!==null){t.blockedOn=e,Wg(t.priority,function(){Gg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ma(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ic=r,n.target.dispatchEvent(r),ic=null}else return e=wo(n),e!==null&&Th(e),t.blockedOn=n,!1;e.shift()}return!0}function qf(t,e,n){ma(t)&&n.delete(e)}function O_(){cc=!1,Fn!==null&&ma(Fn)&&(Fn=null),Hn!==null&&ma(Hn)&&(Hn=null),Bn!==null&&ma(Bn)&&(Bn=null),Wi.forEach(qf),Qi.forEach(qf)}function pi(t,e){t.blockedOn===e&&(t.blockedOn=null,cc||(cc=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,O_)))}function Ji(t){function e(s){return pi(s,t)}if(0<Jo.length){pi(Jo[0],t);for(var n=1;n<Jo.length;n++){var r=Jo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Fn!==null&&pi(Fn,t),Hn!==null&&pi(Hn,t),Bn!==null&&pi(Bn,t),Wi.forEach(e),Qi.forEach(e),n=0;n<Vn.length;n++)r=Vn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Vn.length&&(n=Vn[0],n.blockedOn===null);)Qg(n),n.blockedOn===null&&Vn.shift()}var ms=In.ReactCurrentBatchConfig,Va=!0;function U_(t,e,n,r){var s=de,i=ms.transition;ms.transition=null;try{de=1,xh(t,e,n,r)}finally{de=s,ms.transition=i}}function j_(t,e,n,r){var s=de,i=ms.transition;ms.transition=null;try{de=4,xh(t,e,n,r)}finally{de=s,ms.transition=i}}function xh(t,e,n,r){if(Va){var s=hc(t,e,n,r);if(s===null)Iu(t,e,r,Oa,n),Gf(t,r);else if(V_(s,t,e,n,r))r.stopPropagation();else if(Gf(t,r),e&4&&-1<D_.indexOf(t)){for(;s!==null;){var i=wo(s);if(i!==null&&Yg(i),i=hc(t,e,n,r),i===null&&Iu(t,e,r,Oa,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Iu(t,e,r,null,n)}}var Oa=null;function hc(t,e,n,r){if(Oa=null,t=vh(r),t=Tr(t),t!==null)if(e=jr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ug(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Oa=t,null}function Jg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(N_()){case _h:return 1;case Hg:return 4;case La:case R_:return 16;case Bg:return 536870912;default:return 16}default:return 16}}var Un=null,wh=null,ga=null;function Zg(){if(ga)return ga;var t,e=wh,n=e.length,r,s="value"in Un?Un.value:Un.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return ga=s.slice(t,1<r?1-r:void 0)}function ya(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zo(){return!0}function Wf(){return!1}function bt(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zo:Wf,this.isPropagationStopped=Wf,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zo)},persist:function(){},isPersistent:Zo}),e}var Us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ih=bt(Us),xo=Re({},Us,{view:0,detail:0}),K_=bt(xo),gu,yu,mi,Al=Re({},xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mi&&(mi&&t.type==="mousemove"?(gu=t.screenX-mi.screenX,yu=t.screenY-mi.screenY):yu=gu=0,mi=t),gu)},movementY:function(t){return"movementY"in t?t.movementY:yu}}),Qf=bt(Al),F_=Re({},Al,{dataTransfer:0}),H_=bt(F_),B_=Re({},xo,{relatedTarget:0}),Au=bt(B_),z_=Re({},Us,{animationName:0,elapsedTime:0,pseudoElement:0}),$_=bt(z_),Y_=Re({},Us,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),G_=bt(Y_),q_=Re({},Us,{data:0}),Jf=bt(q_),W_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Q_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},J_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Z_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=J_[t])?!!e[t]:!1}function Nh(){return Z_}var X_=Re({},xo,{key:function(t){if(t.key){var e=W_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ya(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Q_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nh,charCode:function(t){return t.type==="keypress"?ya(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ya(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),e1=bt(X_),t1=Re({},Al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zf=bt(t1),n1=Re({},xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nh}),r1=bt(n1),s1=Re({},Us,{propertyName:0,elapsedTime:0,pseudoElement:0}),i1=bt(s1),o1=Re({},Al,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),a1=bt(o1),l1=[9,13,27,32],Rh=An&&"CompositionEvent"in window,ki=null;An&&"documentMode"in document&&(ki=document.documentMode);var u1=An&&"TextEvent"in window&&!ki,Xg=An&&(!Rh||ki&&8<ki&&11>=ki),Xf=" ",ep=!1;function ey(t,e){switch(t){case"keyup":return l1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ty(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ns=!1;function c1(t,e){switch(t){case"compositionend":return ty(e);case"keypress":return e.which!==32?null:(ep=!0,Xf);case"textInput":return t=e.data,t===Xf&&ep?null:t;default:return null}}function h1(t,e){if(ns)return t==="compositionend"||!Rh&&ey(t,e)?(t=Zg(),ga=wh=Un=null,ns=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xg&&e.locale!=="ko"?null:e.data;default:return null}}var d1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!d1[t.type]:e==="textarea"}function ny(t,e,n,r){Mg(r),e=Ua(e,"onChange"),0<e.length&&(n=new Ih("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var bi=null,Zi=null;function f1(t){fy(t,0)}function vl(t){var e=is(t);if(Ng(e))return t}function p1(t,e){if(t==="change")return e}var ry=!1;if(An){var vu;if(An){var _u="oninput"in document;if(!_u){var np=document.createElement("div");np.setAttribute("oninput","return;"),_u=typeof np.oninput=="function"}vu=_u}else vu=!1;ry=vu&&(!document.documentMode||9<document.documentMode)}function rp(){bi&&(bi.detachEvent("onpropertychange",sy),Zi=bi=null)}function sy(t){if(t.propertyName==="value"&&vl(Zi)){var e=[];ny(e,Zi,t,vh(t)),Og(f1,e)}}function m1(t,e,n){t==="focusin"?(rp(),bi=e,Zi=n,bi.attachEvent("onpropertychange",sy)):t==="focusout"&&rp()}function g1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vl(Zi)}function y1(t,e){if(t==="click")return vl(e)}function A1(t,e){if(t==="input"||t==="change")return vl(e)}function v1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qt=typeof Object.is=="function"?Object.is:v1;function Xi(t,e){if(qt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Gu.call(e,s)||!qt(t[s],e[s]))return!1}return!0}function sp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ip(t,e){var n=sp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sp(n)}}function iy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function oy(){for(var t=window,e=ka();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ka(t.document)}return e}function Sh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _1(t){var e=oy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&iy(n.ownerDocument.documentElement,n)){if(r!==null&&Sh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=ip(n,i);var a=ip(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var E1=An&&"documentMode"in document&&11>=document.documentMode,rs=null,dc=null,Mi=null,fc=!1;function op(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fc||rs==null||rs!==ka(r)||(r=rs,"selectionStart"in r&&Sh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Mi&&Xi(Mi,r)||(Mi=r,r=Ua(dc,"onSelect"),0<r.length&&(e=new Ih("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=rs)))}function Xo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ss={animationend:Xo("Animation","AnimationEnd"),animationiteration:Xo("Animation","AnimationIteration"),animationstart:Xo("Animation","AnimationStart"),transitionend:Xo("Transition","TransitionEnd")},Eu={},ay={};An&&(ay=document.createElement("div").style,"AnimationEvent"in window||(delete ss.animationend.animation,delete ss.animationiteration.animation,delete ss.animationstart.animation),"TransitionEvent"in window||delete ss.transitionend.transition);function _l(t){if(Eu[t])return Eu[t];if(!ss[t])return t;var e=ss[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ay)return Eu[t]=e[n];return t}var ly=_l("animationend"),uy=_l("animationiteration"),cy=_l("animationstart"),hy=_l("transitionend"),dy=new Map,ap="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ar(t,e){dy.set(t,e),Ur(e,[t])}for(var Tu=0;Tu<ap.length;Tu++){var xu=ap[Tu],T1=xu.toLowerCase(),x1=xu[0].toUpperCase()+xu.slice(1);ar(T1,"on"+x1)}ar(ly,"onAnimationEnd");ar(uy,"onAnimationIteration");ar(cy,"onAnimationStart");ar("dblclick","onDoubleClick");ar("focusin","onFocus");ar("focusout","onBlur");ar(hy,"onTransitionEnd");Ts("onMouseEnter",["mouseout","mouseover"]);Ts("onMouseLeave",["mouseout","mouseover"]);Ts("onPointerEnter",["pointerout","pointerover"]);Ts("onPointerLeave",["pointerout","pointerover"]);Ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ur("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w1=new Set("cancel close invalid load scroll toggle".split(" ").concat(wi));function lp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,T_(r,e,void 0,t),t.currentTarget=null}function fy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;lp(s,l,d),i=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;lp(s,l,d),i=u}}}if(Ma)throw t=lc,Ma=!1,lc=null,t}function Ae(t,e){var n=e[Ac];n===void 0&&(n=e[Ac]=new Set);var r=t+"__bubble";n.has(r)||(py(e,t,2,!1),n.add(r))}function wu(t,e,n){var r=0;e&&(r|=4),py(n,t,r,e)}var ea="_reactListening"+Math.random().toString(36).slice(2);function eo(t){if(!t[ea]){t[ea]=!0,Eg.forEach(function(n){n!=="selectionchange"&&(w1.has(n)||wu(n,!1,t),wu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ea]||(e[ea]=!0,wu("selectionchange",!1,e))}}function py(t,e,n,r){switch(Jg(e)){case 1:var s=U_;break;case 4:s=j_;break;default:s=xh}n=s.bind(null,e,n,t),s=void 0,!ac||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Iu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Tr(l),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Og(function(){var d=i,p=vh(n),y=[];e:{var g=dy.get(t);if(g!==void 0){var R=Ih,C=t;switch(t){case"keypress":if(ya(n)===0)break e;case"keydown":case"keyup":R=e1;break;case"focusin":C="focus",R=Au;break;case"focusout":C="blur",R=Au;break;case"beforeblur":case"afterblur":R=Au;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=Qf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=H_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=r1;break;case ly:case uy:case cy:R=$_;break;case hy:R=i1;break;case"scroll":R=K_;break;case"wheel":R=a1;break;case"copy":case"cut":case"paste":R=G_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=Zf}var b=(e&4)!==0,O=!b&&t==="scroll",I=b?g!==null?g+"Capture":null:g;b=[];for(var v=d,w;v!==null;){w=v;var L=w.stateNode;if(w.tag===5&&L!==null&&(w=L,I!==null&&(L=qi(v,I),L!=null&&b.push(to(v,L,w)))),O)break;v=v.return}0<b.length&&(g=new R(g,C,null,n,p),y.push({event:g,listeners:b}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",g&&n!==ic&&(C=n.relatedTarget||n.fromElement)&&(Tr(C)||C[vn]))break e;if((R||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,R?(C=n.relatedTarget||n.toElement,R=d,C=C?Tr(C):null,C!==null&&(O=jr(C),C!==O||C.tag!==5&&C.tag!==6)&&(C=null)):(R=null,C=d),R!==C)){if(b=Qf,L="onMouseLeave",I="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(b=Zf,L="onPointerLeave",I="onPointerEnter",v="pointer"),O=R==null?g:is(R),w=C==null?g:is(C),g=new b(L,v+"leave",R,n,p),g.target=O,g.relatedTarget=w,L=null,Tr(p)===d&&(b=new b(I,v+"enter",C,n,p),b.target=w,b.relatedTarget=O,L=b),O=L,R&&C)t:{for(b=R,I=C,v=0,w=b;w;w=qr(w))v++;for(w=0,L=I;L;L=qr(L))w++;for(;0<v-w;)b=qr(b),v--;for(;0<w-v;)I=qr(I),w--;for(;v--;){if(b===I||I!==null&&b===I.alternate)break t;b=qr(b),I=qr(I)}b=null}else b=null;R!==null&&up(y,g,R,b,!1),C!==null&&O!==null&&up(y,O,C,b,!0)}}e:{if(g=d?is(d):window,R=g.nodeName&&g.nodeName.toLowerCase(),R==="select"||R==="input"&&g.type==="file")var j=p1;else if(tp(g))if(ry)j=A1;else{j=g1;var K=m1}else(R=g.nodeName)&&R.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(j=y1);if(j&&(j=j(t,d))){ny(y,j,n,p);break e}K&&K(t,g,d),t==="focusout"&&(K=g._wrapperState)&&K.controlled&&g.type==="number"&&ec(g,"number",g.value)}switch(K=d?is(d):window,t){case"focusin":(tp(K)||K.contentEditable==="true")&&(rs=K,dc=d,Mi=null);break;case"focusout":Mi=dc=rs=null;break;case"mousedown":fc=!0;break;case"contextmenu":case"mouseup":case"dragend":fc=!1,op(y,n,p);break;case"selectionchange":if(E1)break;case"keydown":case"keyup":op(y,n,p)}var _;if(Rh)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ns?ey(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(Xg&&n.locale!=="ko"&&(ns||A!=="onCompositionStart"?A==="onCompositionEnd"&&ns&&(_=Zg()):(Un=p,wh="value"in Un?Un.value:Un.textContent,ns=!0)),K=Ua(d,A),0<K.length&&(A=new Jf(A,t,null,n,p),y.push({event:A,listeners:K}),_?A.data=_:(_=ty(n),_!==null&&(A.data=_)))),(_=u1?c1(t,n):h1(t,n))&&(d=Ua(d,"onBeforeInput"),0<d.length&&(p=new Jf("onBeforeInput","beforeinput",null,n,p),y.push({event:p,listeners:d}),p.data=_))}fy(y,e)})}function to(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ua(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=qi(t,n),i!=null&&r.unshift(to(t,i,s)),i=qi(t,e),i!=null&&r.push(to(t,i,s))),t=t.return}return r}function qr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function up(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=qi(n,i),u!=null&&a.unshift(to(n,u,l))):s||(u=qi(n,i),u!=null&&a.push(to(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var I1=/\r\n?/g,N1=/\u0000|\uFFFD/g;function cp(t){return(typeof t=="string"?t:""+t).replace(I1,`
`).replace(N1,"")}function ta(t,e,n){if(e=cp(e),cp(t)!==e&&n)throw Error(U(425))}function ja(){}var pc=null,mc=null;function gc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yc=typeof setTimeout=="function"?setTimeout:void 0,R1=typeof clearTimeout=="function"?clearTimeout:void 0,hp=typeof Promise=="function"?Promise:void 0,S1=typeof queueMicrotask=="function"?queueMicrotask:typeof hp<"u"?function(t){return hp.resolve(null).then(t).catch(P1)}:yc;function P1(t){setTimeout(function(){throw t})}function Nu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ji(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ji(e)}function zn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function dp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var js=Math.random().toString(36).slice(2),tn="__reactFiber$"+js,no="__reactProps$"+js,vn="__reactContainer$"+js,Ac="__reactEvents$"+js,C1="__reactListeners$"+js,k1="__reactHandles$"+js;function Tr(t){var e=t[tn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vn]||n[tn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=dp(t);t!==null;){if(n=t[tn])return n;t=dp(t)}return e}t=n,n=t.parentNode}return null}function wo(t){return t=t[tn]||t[vn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function is(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function El(t){return t[no]||null}var vc=[],os=-1;function lr(t){return{current:t}}function _e(t){0>os||(t.current=vc[os],vc[os]=null,os--)}function ge(t,e){os++,vc[os]=t.current,t.current=e}var er={},lt=lr(er),_t=lr(!1),kr=er;function xs(t,e){var n=t.type.contextTypes;if(!n)return er;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Et(t){return t=t.childContextTypes,t!=null}function Ka(){_e(_t),_e(lt)}function fp(t,e,n){if(lt.current!==er)throw Error(U(168));ge(lt,e),ge(_t,n)}function my(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,m_(t)||"Unknown",s));return Re({},n,r)}function Fa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||er,kr=lt.current,ge(lt,t),ge(_t,_t.current),!0}function pp(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=my(t,e,kr),r.__reactInternalMemoizedMergedChildContext=t,_e(_t),_e(lt),ge(lt,t)):_e(_t),ge(_t,n)}var pn=null,Tl=!1,Ru=!1;function gy(t){pn===null?pn=[t]:pn.push(t)}function b1(t){Tl=!0,gy(t)}function ur(){if(!Ru&&pn!==null){Ru=!0;var t=0,e=de;try{var n=pn;for(de=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}pn=null,Tl=!1}catch(s){throw pn!==null&&(pn=pn.slice(t+1)),Fg(_h,ur),s}finally{de=e,Ru=!1}}return null}var as=[],ls=0,Ha=null,Ba=0,Lt=[],Dt=0,br=null,mn=1,gn="";function vr(t,e){as[ls++]=Ba,as[ls++]=Ha,Ha=t,Ba=e}function yy(t,e,n){Lt[Dt++]=mn,Lt[Dt++]=gn,Lt[Dt++]=br,br=t;var r=mn;t=gn;var s=32-$t(r)-1;r&=~(1<<s),n+=1;var i=32-$t(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,mn=1<<32-$t(e)+s|n<<s|r,gn=i+t}else mn=1<<i|n<<s|r,gn=t}function Ph(t){t.return!==null&&(vr(t,1),yy(t,1,0))}function Ch(t){for(;t===Ha;)Ha=as[--ls],as[ls]=null,Ba=as[--ls],as[ls]=null;for(;t===br;)br=Lt[--Dt],Lt[Dt]=null,gn=Lt[--Dt],Lt[Dt]=null,mn=Lt[--Dt],Lt[Dt]=null}var Pt=null,Rt=null,xe=!1,zt=null;function Ay(t,e){var n=Ot(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pt=t,Rt=zn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pt=t,Rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=br!==null?{id:mn,overflow:gn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ot(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pt=t,Rt=null,!0):!1;default:return!1}}function _c(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ec(t){if(xe){var e=Rt;if(e){var n=e;if(!mp(t,e)){if(_c(t))throw Error(U(418));e=zn(n.nextSibling);var r=Pt;e&&mp(t,e)?Ay(r,n):(t.flags=t.flags&-4097|2,xe=!1,Pt=t)}}else{if(_c(t))throw Error(U(418));t.flags=t.flags&-4097|2,xe=!1,Pt=t}}}function gp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pt=t}function na(t){if(t!==Pt)return!1;if(!xe)return gp(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gc(t.type,t.memoizedProps)),e&&(e=Rt)){if(_c(t))throw vy(),Error(U(418));for(;e;)Ay(t,e),e=zn(e.nextSibling)}if(gp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rt=zn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rt=null}}else Rt=Pt?zn(t.stateNode.nextSibling):null;return!0}function vy(){for(var t=Rt;t;)t=zn(t.nextSibling)}function ws(){Rt=Pt=null,xe=!1}function kh(t){zt===null?zt=[t]:zt.push(t)}var M1=In.ReactCurrentBatchConfig;function gi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function ra(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function yp(t){var e=t._init;return e(t._payload)}function _y(t){function e(I,v){if(t){var w=I.deletions;w===null?(I.deletions=[v],I.flags|=16):w.push(v)}}function n(I,v){if(!t)return null;for(;v!==null;)e(I,v),v=v.sibling;return null}function r(I,v){for(I=new Map;v!==null;)v.key!==null?I.set(v.key,v):I.set(v.index,v),v=v.sibling;return I}function s(I,v){return I=qn(I,v),I.index=0,I.sibling=null,I}function i(I,v,w){return I.index=w,t?(w=I.alternate,w!==null?(w=w.index,w<v?(I.flags|=2,v):w):(I.flags|=2,v)):(I.flags|=1048576,v)}function a(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,v,w,L){return v===null||v.tag!==6?(v=Lu(w,I.mode,L),v.return=I,v):(v=s(v,w),v.return=I,v)}function u(I,v,w,L){var j=w.type;return j===ts?p(I,v,w.props.children,L,w.key):v!==null&&(v.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ln&&yp(j)===v.type)?(L=s(v,w.props),L.ref=gi(I,v,w),L.return=I,L):(L=wa(w.type,w.key,w.props,null,I.mode,L),L.ref=gi(I,v,w),L.return=I,L)}function d(I,v,w,L){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Du(w,I.mode,L),v.return=I,v):(v=s(v,w.children||[]),v.return=I,v)}function p(I,v,w,L,j){return v===null||v.tag!==7?(v=Rr(w,I.mode,L,j),v.return=I,v):(v=s(v,w),v.return=I,v)}function y(I,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Lu(""+v,I.mode,w),v.return=I,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Yo:return w=wa(v.type,v.key,v.props,null,I.mode,w),w.ref=gi(I,null,v),w.return=I,w;case es:return v=Du(v,I.mode,w),v.return=I,v;case Ln:var L=v._init;return y(I,L(v._payload),w)}if(Ti(v)||hi(v))return v=Rr(v,I.mode,w,null),v.return=I,v;ra(I,v)}return null}function g(I,v,w,L){var j=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(I,v,""+w,L);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Yo:return w.key===j?u(I,v,w,L):null;case es:return w.key===j?d(I,v,w,L):null;case Ln:return j=w._init,g(I,v,j(w._payload),L)}if(Ti(w)||hi(w))return j!==null?null:p(I,v,w,L,null);ra(I,w)}return null}function R(I,v,w,L,j){if(typeof L=="string"&&L!==""||typeof L=="number")return I=I.get(w)||null,l(v,I,""+L,j);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Yo:return I=I.get(L.key===null?w:L.key)||null,u(v,I,L,j);case es:return I=I.get(L.key===null?w:L.key)||null,d(v,I,L,j);case Ln:var K=L._init;return R(I,v,w,K(L._payload),j)}if(Ti(L)||hi(L))return I=I.get(w)||null,p(v,I,L,j,null);ra(v,L)}return null}function C(I,v,w,L){for(var j=null,K=null,_=v,A=v=0,E=null;_!==null&&A<w.length;A++){_.index>A?(E=_,_=null):E=_.sibling;var x=g(I,_,w[A],L);if(x===null){_===null&&(_=E);break}t&&_&&x.alternate===null&&e(I,_),v=i(x,v,A),K===null?j=x:K.sibling=x,K=x,_=E}if(A===w.length)return n(I,_),xe&&vr(I,A),j;if(_===null){for(;A<w.length;A++)_=y(I,w[A],L),_!==null&&(v=i(_,v,A),K===null?j=_:K.sibling=_,K=_);return xe&&vr(I,A),j}for(_=r(I,_);A<w.length;A++)E=R(_,I,A,w[A],L),E!==null&&(t&&E.alternate!==null&&_.delete(E.key===null?A:E.key),v=i(E,v,A),K===null?j=E:K.sibling=E,K=E);return t&&_.forEach(function(N){return e(I,N)}),xe&&vr(I,A),j}function b(I,v,w,L){var j=hi(w);if(typeof j!="function")throw Error(U(150));if(w=j.call(w),w==null)throw Error(U(151));for(var K=j=null,_=v,A=v=0,E=null,x=w.next();_!==null&&!x.done;A++,x=w.next()){_.index>A?(E=_,_=null):E=_.sibling;var N=g(I,_,x.value,L);if(N===null){_===null&&(_=E);break}t&&_&&N.alternate===null&&e(I,_),v=i(N,v,A),K===null?j=N:K.sibling=N,K=N,_=E}if(x.done)return n(I,_),xe&&vr(I,A),j;if(_===null){for(;!x.done;A++,x=w.next())x=y(I,x.value,L),x!==null&&(v=i(x,v,A),K===null?j=x:K.sibling=x,K=x);return xe&&vr(I,A),j}for(_=r(I,_);!x.done;A++,x=w.next())x=R(_,I,A,x.value,L),x!==null&&(t&&x.alternate!==null&&_.delete(x.key===null?A:x.key),v=i(x,v,A),K===null?j=x:K.sibling=x,K=x);return t&&_.forEach(function(S){return e(I,S)}),xe&&vr(I,A),j}function O(I,v,w,L){if(typeof w=="object"&&w!==null&&w.type===ts&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Yo:e:{for(var j=w.key,K=v;K!==null;){if(K.key===j){if(j=w.type,j===ts){if(K.tag===7){n(I,K.sibling),v=s(K,w.props.children),v.return=I,I=v;break e}}else if(K.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ln&&yp(j)===K.type){n(I,K.sibling),v=s(K,w.props),v.ref=gi(I,K,w),v.return=I,I=v;break e}n(I,K);break}else e(I,K);K=K.sibling}w.type===ts?(v=Rr(w.props.children,I.mode,L,w.key),v.return=I,I=v):(L=wa(w.type,w.key,w.props,null,I.mode,L),L.ref=gi(I,v,w),L.return=I,I=L)}return a(I);case es:e:{for(K=w.key;v!==null;){if(v.key===K)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(I,v.sibling),v=s(v,w.children||[]),v.return=I,I=v;break e}else{n(I,v);break}else e(I,v);v=v.sibling}v=Du(w,I.mode,L),v.return=I,I=v}return a(I);case Ln:return K=w._init,O(I,v,K(w._payload),L)}if(Ti(w))return C(I,v,w,L);if(hi(w))return b(I,v,w,L);ra(I,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(I,v.sibling),v=s(v,w),v.return=I,I=v):(n(I,v),v=Lu(w,I.mode,L),v.return=I,I=v),a(I)):n(I,v)}return O}var Is=_y(!0),Ey=_y(!1),za=lr(null),$a=null,us=null,bh=null;function Mh(){bh=us=$a=null}function Lh(t){var e=za.current;_e(za),t._currentValue=e}function Tc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function gs(t,e){$a=t,bh=us=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(vt=!0),t.firstContext=null)}function jt(t){var e=t._currentValue;if(bh!==t)if(t={context:t,memoizedValue:e,next:null},us===null){if($a===null)throw Error(U(308));us=t,$a.dependencies={lanes:0,firstContext:t}}else us=us.next=t;return e}var xr=null;function Dh(t){xr===null?xr=[t]:xr.push(t)}function Ty(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Dh(e)):(n.next=s.next,s.next=n),e.interleaved=n,_n(t,r)}function _n(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Dn=!1;function Vh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function $n(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,_n(t,n)}return s=r.interleaved,s===null?(e.next=e,Dh(r)):(e.next=s.next,s.next=e),r.interleaved=e,_n(t,n)}function Aa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Eh(t,n)}}function Ap(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ya(t,e,n,r){var s=t.updateQueue;Dn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=u))}if(i!==null){var y=s.baseState;a=0,p=d=u=null,l=i;do{var g=l.lane,R=l.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:R,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var C=t,b=l;switch(g=e,R=n,b.tag){case 1:if(C=b.payload,typeof C=="function"){y=C.call(R,y,g);break e}y=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=b.payload,g=typeof C=="function"?C.call(R,y,g):C,g==null)break e;y=Re({},y,g);break e;case 2:Dn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else R={eventTime:R,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(d=p=R,u=y):p=p.next=R,a|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(p===null&&(u=y),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Lr|=a,t.lanes=a,t.memoizedState=y}}function vp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var Io={},rn=lr(Io),ro=lr(Io),so=lr(Io);function wr(t){if(t===Io)throw Error(U(174));return t}function Oh(t,e){switch(ge(so,e),ge(ro,t),ge(rn,Io),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nc(e,t)}_e(rn),ge(rn,e)}function Ns(){_e(rn),_e(ro),_e(so)}function wy(t){wr(so.current);var e=wr(rn.current),n=nc(e,t.type);e!==n&&(ge(ro,t),ge(rn,n))}function Uh(t){ro.current===t&&(_e(rn),_e(ro))}var Ie=lr(0);function Ga(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Su=[];function jh(){for(var t=0;t<Su.length;t++)Su[t]._workInProgressVersionPrimary=null;Su.length=0}var va=In.ReactCurrentDispatcher,Pu=In.ReactCurrentBatchConfig,Mr=0,Ne=null,Fe=null,Ge=null,qa=!1,Li=!1,io=0,L1=0;function nt(){throw Error(U(321))}function Kh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!qt(t[n],e[n]))return!1;return!0}function Fh(t,e,n,r,s,i){if(Mr=i,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,va.current=t===null||t.memoizedState===null?U1:j1,t=n(r,s),Li){i=0;do{if(Li=!1,io=0,25<=i)throw Error(U(301));i+=1,Ge=Fe=null,e.updateQueue=null,va.current=K1,t=n(r,s)}while(Li)}if(va.current=Wa,e=Fe!==null&&Fe.next!==null,Mr=0,Ge=Fe=Ne=null,qa=!1,e)throw Error(U(300));return t}function Hh(){var t=io!==0;return io=0,t}function Xt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Ne.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Kt(){if(Fe===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var e=Ge===null?Ne.memoizedState:Ge.next;if(e!==null)Ge=e,Fe=t;else{if(t===null)throw Error(U(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},Ge===null?Ne.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function oo(t,e){return typeof e=="function"?e(t):e}function Cu(t){var e=Kt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Fe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,u=null,d=i;do{var p=d.lane;if((Mr&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var y={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=y,a=r):u=u.next=y,Ne.lanes|=p,Lr|=p}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=l,qt(r,e.memoizedState)||(vt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ne.lanes|=i,Lr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ku(t){var e=Kt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);qt(i,e.memoizedState)||(vt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Iy(){}function Ny(t,e){var n=Ne,r=Kt(),s=e(),i=!qt(r.memoizedState,s);if(i&&(r.memoizedState=s,vt=!0),r=r.queue,Bh(Py.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,ao(9,Sy.bind(null,n,r,s,e),void 0,null),qe===null)throw Error(U(349));Mr&30||Ry(n,e,s)}return s}function Ry(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Sy(t,e,n,r){e.value=n,e.getSnapshot=r,Cy(e)&&ky(t)}function Py(t,e,n){return n(function(){Cy(e)&&ky(t)})}function Cy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qt(t,n)}catch{return!0}}function ky(t){var e=_n(t,1);e!==null&&Yt(e,t,1,-1)}function _p(t){var e=Xt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:t},e.queue=t,t=t.dispatch=O1.bind(null,Ne,t),[e.memoizedState,t]}function ao(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function by(){return Kt().memoizedState}function _a(t,e,n,r){var s=Xt();Ne.flags|=t,s.memoizedState=ao(1|e,n,void 0,r===void 0?null:r)}function xl(t,e,n,r){var s=Kt();r=r===void 0?null:r;var i=void 0;if(Fe!==null){var a=Fe.memoizedState;if(i=a.destroy,r!==null&&Kh(r,a.deps)){s.memoizedState=ao(e,n,i,r);return}}Ne.flags|=t,s.memoizedState=ao(1|e,n,i,r)}function Ep(t,e){return _a(8390656,8,t,e)}function Bh(t,e){return xl(2048,8,t,e)}function My(t,e){return xl(4,2,t,e)}function Ly(t,e){return xl(4,4,t,e)}function Dy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Vy(t,e,n){return n=n!=null?n.concat([t]):null,xl(4,4,Dy.bind(null,e,t),n)}function zh(){}function Oy(t,e){var n=Kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Uy(t,e){var n=Kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function jy(t,e,n){return Mr&21?(qt(n,e)||(n=zg(),Ne.lanes|=n,Lr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,vt=!0),t.memoizedState=n)}function D1(t,e){var n=de;de=n!==0&&4>n?n:4,t(!0);var r=Pu.transition;Pu.transition={};try{t(!1),e()}finally{de=n,Pu.transition=r}}function Ky(){return Kt().memoizedState}function V1(t,e,n){var r=Gn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Fy(t))Hy(e,n);else if(n=Ty(t,e,n,r),n!==null){var s=dt();Yt(n,t,r,s),By(n,e,r)}}function O1(t,e,n){var r=Gn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fy(t))Hy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,qt(l,a)){var u=e.interleaved;u===null?(s.next=s,Dh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Ty(t,e,s,r),n!==null&&(s=dt(),Yt(n,t,r,s),By(n,e,r))}}function Fy(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function Hy(t,e){Li=qa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function By(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Eh(t,n)}}var Wa={readContext:jt,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},U1={readContext:jt,useCallback:function(t,e){return Xt().memoizedState=[t,e===void 0?null:e],t},useContext:jt,useEffect:Ep,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_a(4194308,4,Dy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _a(4194308,4,t,e)},useInsertionEffect:function(t,e){return _a(4,2,t,e)},useMemo:function(t,e){var n=Xt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Xt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=V1.bind(null,Ne,t),[r.memoizedState,t]},useRef:function(t){var e=Xt();return t={current:t},e.memoizedState=t},useState:_p,useDebugValue:zh,useDeferredValue:function(t){return Xt().memoizedState=t},useTransition:function(){var t=_p(!1),e=t[0];return t=D1.bind(null,t[1]),Xt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ne,s=Xt();if(xe){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),qe===null)throw Error(U(349));Mr&30||Ry(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ep(Py.bind(null,r,i,t),[t]),r.flags|=2048,ao(9,Sy.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Xt(),e=qe.identifierPrefix;if(xe){var n=gn,r=mn;n=(r&~(1<<32-$t(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=io++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=L1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},j1={readContext:jt,useCallback:Oy,useContext:jt,useEffect:Bh,useImperativeHandle:Vy,useInsertionEffect:My,useLayoutEffect:Ly,useMemo:Uy,useReducer:Cu,useRef:by,useState:function(){return Cu(oo)},useDebugValue:zh,useDeferredValue:function(t){var e=Kt();return jy(e,Fe.memoizedState,t)},useTransition:function(){var t=Cu(oo)[0],e=Kt().memoizedState;return[t,e]},useMutableSource:Iy,useSyncExternalStore:Ny,useId:Ky,unstable_isNewReconciler:!1},K1={readContext:jt,useCallback:Oy,useContext:jt,useEffect:Bh,useImperativeHandle:Vy,useInsertionEffect:My,useLayoutEffect:Ly,useMemo:Uy,useReducer:ku,useRef:by,useState:function(){return ku(oo)},useDebugValue:zh,useDeferredValue:function(t){var e=Kt();return Fe===null?e.memoizedState=t:jy(e,Fe.memoizedState,t)},useTransition:function(){var t=ku(oo)[0],e=Kt().memoizedState;return[t,e]},useMutableSource:Iy,useSyncExternalStore:Ny,useId:Ky,unstable_isNewReconciler:!1};function Ht(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function xc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wl={isMounted:function(t){return(t=t._reactInternals)?jr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=dt(),s=Gn(t),i=yn(r,s);i.payload=e,n!=null&&(i.callback=n),e=$n(t,i,s),e!==null&&(Yt(e,t,s,r),Aa(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=dt(),s=Gn(t),i=yn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=$n(t,i,s),e!==null&&(Yt(e,t,s,r),Aa(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dt(),r=Gn(t),s=yn(n,r);s.tag=2,e!=null&&(s.callback=e),e=$n(t,s,r),e!==null&&(Yt(e,t,r,n),Aa(e,t,r))}};function Tp(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Xi(n,r)||!Xi(s,i):!0}function zy(t,e,n){var r=!1,s=er,i=e.contextType;return typeof i=="object"&&i!==null?i=jt(i):(s=Et(e)?kr:lt.current,r=e.contextTypes,i=(r=r!=null)?xs(t,s):er),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function xp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&wl.enqueueReplaceState(e,e.state,null)}function wc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Vh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=jt(i):(i=Et(e)?kr:lt.current,s.context=xs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(xc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&wl.enqueueReplaceState(s,s.state,null),Ya(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Rs(t,e){try{var n="",r=e;do n+=p_(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function bu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ic(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var F1=typeof WeakMap=="function"?WeakMap:Map;function $y(t,e,n){n=yn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ja||(Ja=!0,Dc=r),Ic(t,e)},n}function Yy(t,e,n){n=yn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ic(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ic(t,e),typeof r!="function"&&(Yn===null?Yn=new Set([this]):Yn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function wp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new F1;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=tE.bind(null,t,e,n),e.then(t,t))}function Ip(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Np(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=yn(-1,1),e.tag=2,$n(n,e,1))),n.lanes|=1),t)}var H1=In.ReactCurrentOwner,vt=!1;function ht(t,e,n,r){e.child=t===null?Ey(e,null,n,r):Is(e,t.child,n,r)}function Rp(t,e,n,r,s){n=n.render;var i=e.ref;return gs(e,s),r=Fh(t,e,n,r,i,s),n=Hh(),t!==null&&!vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,En(t,e,s)):(xe&&n&&Ph(e),e.flags|=1,ht(t,e,r,s),e.child)}function Sp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Zh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Gy(t,e,i,r,s)):(t=wa(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Xi,n(a,r)&&t.ref===e.ref)return En(t,e,s)}return e.flags|=1,t=qn(i,r),t.ref=e.ref,t.return=e,e.child=t}function Gy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Xi(i,r)&&t.ref===e.ref)if(vt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(vt=!0);else return e.lanes=t.lanes,En(t,e,s)}return Nc(t,e,n,r,s)}function qy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(hs,Nt),Nt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(hs,Nt),Nt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ge(hs,Nt),Nt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ge(hs,Nt),Nt|=r;return ht(t,e,s,n),e.child}function Wy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Nc(t,e,n,r,s){var i=Et(n)?kr:lt.current;return i=xs(e,i),gs(e,s),n=Fh(t,e,n,r,i,s),r=Hh(),t!==null&&!vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,En(t,e,s)):(xe&&r&&Ph(e),e.flags|=1,ht(t,e,n,s),e.child)}function Pp(t,e,n,r,s){if(Et(n)){var i=!0;Fa(e)}else i=!1;if(gs(e,s),e.stateNode===null)Ea(t,e),zy(e,n,r),wc(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=jt(d):(d=Et(n)?kr:lt.current,d=xs(e,d));var p=n.getDerivedStateFromProps,y=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";y||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==d)&&xp(e,a,r,d),Dn=!1;var g=e.memoizedState;a.state=g,Ya(e,r,a,s),u=e.memoizedState,l!==r||g!==u||_t.current||Dn?(typeof p=="function"&&(xc(e,n,p,r),u=e.memoizedState),(l=Dn||Tp(e,n,l,r,g,u,d))?(y||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,xy(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Ht(e.type,l),a.props=d,y=e.pendingProps,g=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=jt(u):(u=Et(n)?kr:lt.current,u=xs(e,u));var R=n.getDerivedStateFromProps;(p=typeof R=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==y||g!==u)&&xp(e,a,r,u),Dn=!1,g=e.memoizedState,a.state=g,Ya(e,r,a,s);var C=e.memoizedState;l!==y||g!==C||_t.current||Dn?(typeof R=="function"&&(xc(e,n,R,r),C=e.memoizedState),(d=Dn||Tp(e,n,d,r,g,C,u)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,C,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,C,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),a.props=r,a.state=C,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Rc(t,e,n,r,i,s)}function Rc(t,e,n,r,s,i){Wy(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&pp(e,n,!1),En(t,e,i);r=e.stateNode,H1.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Is(e,t.child,null,i),e.child=Is(e,null,l,i)):ht(t,e,l,i),e.memoizedState=r.state,s&&pp(e,n,!0),e.child}function Qy(t){var e=t.stateNode;e.pendingContext?fp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fp(t,e.context,!1),Oh(t,e.containerInfo)}function Cp(t,e,n,r,s){return ws(),kh(s),e.flags|=256,ht(t,e,n,r),e.child}var Sc={dehydrated:null,treeContext:null,retryLane:0};function Pc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Jy(t,e,n){var r=e.pendingProps,s=Ie.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ge(Ie,s&1),t===null)return Ec(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Rl(a,r,0,null),t=Rr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Pc(n),e.memoizedState=Sc,t):$h(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return B1(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=qn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=qn(l,i):(i=Rr(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Pc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Sc,r}return i=t.child,t=i.sibling,r=qn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function $h(t,e){return e=Rl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function sa(t,e,n,r){return r!==null&&kh(r),Is(e,t.child,null,n),t=$h(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function B1(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=bu(Error(U(422))),sa(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Rl({mode:"visible",children:r.children},s,0,null),i=Rr(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Is(e,t.child,null,a),e.child.memoizedState=Pc(a),e.memoizedState=Sc,i);if(!(e.mode&1))return sa(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(U(419)),r=bu(i,r,void 0),sa(t,e,a,r)}if(l=(a&t.childLanes)!==0,vt||l){if(r=qe,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,_n(t,s),Yt(r,t,s,-1))}return Jh(),r=bu(Error(U(421))),sa(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=nE.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Rt=zn(s.nextSibling),Pt=e,xe=!0,zt=null,t!==null&&(Lt[Dt++]=mn,Lt[Dt++]=gn,Lt[Dt++]=br,mn=t.id,gn=t.overflow,br=e),e=$h(e,r.children),e.flags|=4096,e)}function kp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Tc(t.return,e,n)}function Mu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Zy(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ht(t,e,r.children,n),r=Ie.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&kp(t,n,e);else if(t.tag===19)kp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ge(Ie,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ga(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Mu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ga(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Mu(e,!0,n,null,i);break;case"together":Mu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ea(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function En(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Lr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=qn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function z1(t,e,n){switch(e.tag){case 3:Qy(e),ws();break;case 5:wy(e);break;case 1:Et(e.type)&&Fa(e);break;case 4:Oh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ge(za,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ge(Ie,Ie.current&1),e.flags|=128,null):n&e.child.childLanes?Jy(t,e,n):(ge(Ie,Ie.current&1),t=En(t,e,n),t!==null?t.sibling:null);ge(Ie,Ie.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Zy(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ge(Ie,Ie.current),r)break;return null;case 22:case 23:return e.lanes=0,qy(t,e,n)}return En(t,e,n)}var Xy,Cc,e0,t0;Xy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Cc=function(){};e0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,wr(rn.current);var i=null;switch(n){case"input":s=Zu(t,s),r=Zu(t,r),i=[];break;case"select":s=Re({},s,{value:void 0}),r=Re({},r,{value:void 0}),i=[];break;case"textarea":s=tc(t,s),r=tc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ja)}rc(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Yi.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Yi.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ae("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};t0=function(t,e,n,r){n!==r&&(e.flags|=4)};function yi(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $1(t,e,n){var r=e.pendingProps;switch(Ch(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(e),null;case 1:return Et(e.type)&&Ka(),rt(e),null;case 3:return r=e.stateNode,Ns(),_e(_t),_e(lt),jh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(na(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zt!==null&&(Uc(zt),zt=null))),Cc(t,e),rt(e),null;case 5:Uh(e);var s=wr(so.current);if(n=e.type,t!==null&&e.stateNode!=null)e0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return rt(e),null}if(t=wr(rn.current),na(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[tn]=e,r[no]=i,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(s=0;s<wi.length;s++)Ae(wi[s],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":Kf(r,i),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ae("invalid",r);break;case"textarea":Hf(r,i),Ae("invalid",r)}rc(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ta(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ta(r.textContent,l,t),s=["children",""+l]):Yi.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ae("scroll",r)}switch(n){case"input":Go(r),Ff(r,i,!0);break;case"textarea":Go(r),Bf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ja)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Pg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[tn]=e,t[no]=r,Xy(t,e,!1,!1),e.stateNode=t;e:{switch(a=sc(n,r),n){case"dialog":Ae("cancel",t),Ae("close",t),s=r;break;case"iframe":case"object":case"embed":Ae("load",t),s=r;break;case"video":case"audio":for(s=0;s<wi.length;s++)Ae(wi[s],t);s=r;break;case"source":Ae("error",t),s=r;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),s=r;break;case"details":Ae("toggle",t),s=r;break;case"input":Kf(t,r),s=Zu(t,r),Ae("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Re({},r,{value:void 0}),Ae("invalid",t);break;case"textarea":Hf(t,r),s=tc(t,r),Ae("invalid",t);break;default:s=r}rc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?bg(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Cg(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Gi(t,u):typeof u=="number"&&Gi(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Yi.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ae("scroll",t):u!=null&&mh(t,i,u,a))}switch(n){case"input":Go(t),Ff(t,r,!1);break;case"textarea":Go(t),Bf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Xn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ds(t,!!r.multiple,i,!1):r.defaultValue!=null&&ds(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ja)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rt(e),null;case 6:if(t&&e.stateNode!=null)t0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=wr(so.current),wr(rn.current),na(e)){if(r=e.stateNode,n=e.memoizedProps,r[tn]=e,(i=r.nodeValue!==n)&&(t=Pt,t!==null))switch(t.tag){case 3:ta(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ta(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tn]=e,e.stateNode=r}return rt(e),null;case 13:if(_e(Ie),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&Rt!==null&&e.mode&1&&!(e.flags&128))vy(),ws(),e.flags|=98560,i=!1;else if(i=na(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[tn]=e}else ws(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rt(e),i=!1}else zt!==null&&(Uc(zt),zt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ie.current&1?He===0&&(He=3):Jh())),e.updateQueue!==null&&(e.flags|=4),rt(e),null);case 4:return Ns(),Cc(t,e),t===null&&eo(e.stateNode.containerInfo),rt(e),null;case 10:return Lh(e.type._context),rt(e),null;case 17:return Et(e.type)&&Ka(),rt(e),null;case 19:if(_e(Ie),i=e.memoizedState,i===null)return rt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)yi(i,!1);else{if(He!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ga(t),a!==null){for(e.flags|=128,yi(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ge(Ie,Ie.current&1|2),e.child}t=t.sibling}i.tail!==null&&Me()>Ss&&(e.flags|=128,r=!0,yi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ga(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!xe)return rt(e),null}else 2*Me()-i.renderingStartTime>Ss&&n!==1073741824&&(e.flags|=128,r=!0,yi(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Me(),e.sibling=null,n=Ie.current,ge(Ie,r?n&1|2:n&1),e):(rt(e),null);case 22:case 23:return Qh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Nt&1073741824&&(rt(e),e.subtreeFlags&6&&(e.flags|=8192)):rt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function Y1(t,e){switch(Ch(e),e.tag){case 1:return Et(e.type)&&Ka(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ns(),_e(_t),_e(lt),jh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Uh(e),null;case 13:if(_e(Ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));ws()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _e(Ie),null;case 4:return Ns(),null;case 10:return Lh(e.type._context),null;case 22:case 23:return Qh(),null;case 24:return null;default:return null}}var ia=!1,ot=!1,G1=typeof WeakSet=="function"?WeakSet:Set,G=null;function cs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ke(t,e,r)}else n.current=null}function kc(t,e,n){try{n()}catch(r){ke(t,e,r)}}var bp=!1;function q1(t,e){if(pc=Va,t=oy(),Sh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,d=0,p=0,y=t,g=null;t:for(;;){for(var R;y!==n||s!==0&&y.nodeType!==3||(l=a+s),y!==i||r!==0&&y.nodeType!==3||(u=a+r),y.nodeType===3&&(a+=y.nodeValue.length),(R=y.firstChild)!==null;)g=y,y=R;for(;;){if(y===t)break t;if(g===n&&++d===s&&(l=a),g===i&&++p===r&&(u=a),(R=y.nextSibling)!==null)break;y=g,g=y.parentNode}y=R}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(mc={focusedElem:t,selectionRange:n},Va=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var b=C.memoizedProps,O=C.memoizedState,I=e.stateNode,v=I.getSnapshotBeforeUpdate(e.elementType===e.type?b:Ht(e.type,b),O);I.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(L){ke(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return C=bp,bp=!1,C}function Di(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&kc(e,n,i)}s=s.next}while(s!==r)}}function Il(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function bc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function n0(t){var e=t.alternate;e!==null&&(t.alternate=null,n0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[tn],delete e[no],delete e[Ac],delete e[C1],delete e[k1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function r0(t){return t.tag===5||t.tag===3||t.tag===4}function Mp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||r0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ja));else if(r!==4&&(t=t.child,t!==null))for(Mc(t,e,n),t=t.sibling;t!==null;)Mc(t,e,n),t=t.sibling}function Lc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Lc(t,e,n),t=t.sibling;t!==null;)Lc(t,e,n),t=t.sibling}var Qe=null,Bt=!1;function Mn(t,e,n){for(n=n.child;n!==null;)s0(t,e,n),n=n.sibling}function s0(t,e,n){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(yl,n)}catch{}switch(n.tag){case 5:ot||cs(n,e);case 6:var r=Qe,s=Bt;Qe=null,Mn(t,e,n),Qe=r,Bt=s,Qe!==null&&(Bt?(t=Qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Qe.removeChild(n.stateNode));break;case 18:Qe!==null&&(Bt?(t=Qe,n=n.stateNode,t.nodeType===8?Nu(t.parentNode,n):t.nodeType===1&&Nu(t,n),Ji(t)):Nu(Qe,n.stateNode));break;case 4:r=Qe,s=Bt,Qe=n.stateNode.containerInfo,Bt=!0,Mn(t,e,n),Qe=r,Bt=s;break;case 0:case 11:case 14:case 15:if(!ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&kc(n,e,a),s=s.next}while(s!==r)}Mn(t,e,n);break;case 1:if(!ot&&(cs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ke(n,e,l)}Mn(t,e,n);break;case 21:Mn(t,e,n);break;case 22:n.mode&1?(ot=(r=ot)||n.memoizedState!==null,Mn(t,e,n),ot=r):Mn(t,e,n);break;default:Mn(t,e,n)}}function Lp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new G1),e.forEach(function(r){var s=rE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ft(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Qe=l.stateNode,Bt=!1;break e;case 3:Qe=l.stateNode.containerInfo,Bt=!0;break e;case 4:Qe=l.stateNode.containerInfo,Bt=!0;break e}l=l.return}if(Qe===null)throw Error(U(160));s0(i,a,s),Qe=null,Bt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){ke(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)i0(e,t),e=e.sibling}function i0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ft(e,t),Zt(t),r&4){try{Di(3,t,t.return),Il(3,t)}catch(b){ke(t,t.return,b)}try{Di(5,t,t.return)}catch(b){ke(t,t.return,b)}}break;case 1:Ft(e,t),Zt(t),r&512&&n!==null&&cs(n,n.return);break;case 5:if(Ft(e,t),Zt(t),r&512&&n!==null&&cs(n,n.return),t.flags&32){var s=t.stateNode;try{Gi(s,"")}catch(b){ke(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Rg(s,i),sc(l,a);var d=sc(l,i);for(a=0;a<u.length;a+=2){var p=u[a],y=u[a+1];p==="style"?bg(s,y):p==="dangerouslySetInnerHTML"?Cg(s,y):p==="children"?Gi(s,y):mh(s,p,y,d)}switch(l){case"input":Xu(s,i);break;case"textarea":Sg(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var R=i.value;R!=null?ds(s,!!i.multiple,R,!1):g!==!!i.multiple&&(i.defaultValue!=null?ds(s,!!i.multiple,i.defaultValue,!0):ds(s,!!i.multiple,i.multiple?[]:"",!1))}s[no]=i}catch(b){ke(t,t.return,b)}}break;case 6:if(Ft(e,t),Zt(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){ke(t,t.return,b)}}break;case 3:if(Ft(e,t),Zt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ji(e.containerInfo)}catch(b){ke(t,t.return,b)}break;case 4:Ft(e,t),Zt(t);break;case 13:Ft(e,t),Zt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(qh=Me())),r&4&&Lp(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(ot=(d=ot)||p,Ft(e,t),ot=d):Ft(e,t),Zt(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(G=t,p=t.child;p!==null;){for(y=G=p;G!==null;){switch(g=G,R=g.child,g.tag){case 0:case 11:case 14:case 15:Di(4,g,g.return);break;case 1:cs(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(b){ke(r,n,b)}}break;case 5:cs(g,g.return);break;case 22:if(g.memoizedState!==null){Vp(y);continue}}R!==null?(R.return=g,G=R):Vp(y)}p=p.sibling}e:for(p=null,y=t;;){if(y.tag===5){if(p===null){p=y;try{s=y.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=y.stateNode,u=y.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=kg("display",a))}catch(b){ke(t,t.return,b)}}}else if(y.tag===6){if(p===null)try{y.stateNode.nodeValue=d?"":y.memoizedProps}catch(b){ke(t,t.return,b)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;p===y&&(p=null),y=y.return}p===y&&(p=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Ft(e,t),Zt(t),r&4&&Lp(t);break;case 21:break;default:Ft(e,t),Zt(t)}}function Zt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(r0(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Gi(s,""),r.flags&=-33);var i=Mp(t);Lc(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Mp(t);Mc(t,l,a);break;default:throw Error(U(161))}}catch(u){ke(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function W1(t,e,n){G=t,o0(t)}function o0(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||ia;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ot;l=ia;var d=ot;if(ia=a,(ot=u)&&!d)for(G=s;G!==null;)a=G,u=a.child,a.tag===22&&a.memoizedState!==null?Op(s):u!==null?(u.return=a,G=u):Op(s);for(;i!==null;)G=i,o0(i),i=i.sibling;G=s,ia=l,ot=d}Dp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):Dp(t)}}function Dp(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ot||Il(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ot)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ht(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&vp(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}vp(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var y=p.dehydrated;y!==null&&Ji(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}ot||e.flags&512&&bc(e)}catch(g){ke(e,e.return,g)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function Vp(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function Op(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Il(4,e)}catch(u){ke(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){ke(e,s,u)}}var i=e.return;try{bc(e)}catch(u){ke(e,i,u)}break;case 5:var a=e.return;try{bc(e)}catch(u){ke(e,a,u)}}}catch(u){ke(e,e.return,u)}if(e===t){G=null;break}var l=e.sibling;if(l!==null){l.return=e.return,G=l;break}G=e.return}}var Q1=Math.ceil,Qa=In.ReactCurrentDispatcher,Yh=In.ReactCurrentOwner,Ut=In.ReactCurrentBatchConfig,ue=0,qe=null,Ve=null,Xe=0,Nt=0,hs=lr(0),He=0,lo=null,Lr=0,Nl=0,Gh=0,Vi=null,yt=null,qh=0,Ss=1/0,fn=null,Ja=!1,Dc=null,Yn=null,oa=!1,jn=null,Za=0,Oi=0,Vc=null,Ta=-1,xa=0;function dt(){return ue&6?Me():Ta!==-1?Ta:Ta=Me()}function Gn(t){return t.mode&1?ue&2&&Xe!==0?Xe&-Xe:M1.transition!==null?(xa===0&&(xa=zg()),xa):(t=de,t!==0||(t=window.event,t=t===void 0?16:Jg(t.type)),t):1}function Yt(t,e,n,r){if(50<Oi)throw Oi=0,Vc=null,Error(U(185));To(t,n,r),(!(ue&2)||t!==qe)&&(t===qe&&(!(ue&2)&&(Nl|=n),He===4&&On(t,Xe)),Tt(t,r),n===1&&ue===0&&!(e.mode&1)&&(Ss=Me()+500,Tl&&ur()))}function Tt(t,e){var n=t.callbackNode;M_(t,e);var r=Da(t,t===qe?Xe:0);if(r===0)n!==null&&Yf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Yf(n),e===1)t.tag===0?b1(Up.bind(null,t)):gy(Up.bind(null,t)),S1(function(){!(ue&6)&&ur()}),n=null;else{switch($g(r)){case 1:n=_h;break;case 4:n=Hg;break;case 16:n=La;break;case 536870912:n=Bg;break;default:n=La}n=p0(n,a0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function a0(t,e){if(Ta=-1,xa=0,ue&6)throw Error(U(327));var n=t.callbackNode;if(ys()&&t.callbackNode!==n)return null;var r=Da(t,t===qe?Xe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Xa(t,r);else{e=r;var s=ue;ue|=2;var i=u0();(qe!==t||Xe!==e)&&(fn=null,Ss=Me()+500,Nr(t,e));do try{X1();break}catch(l){l0(t,l)}while(!0);Mh(),Qa.current=i,ue=s,Ve!==null?e=0:(qe=null,Xe=0,e=He)}if(e!==0){if(e===2&&(s=uc(t),s!==0&&(r=s,e=Oc(t,s))),e===1)throw n=lo,Nr(t,0),On(t,r),Tt(t,Me()),n;if(e===6)On(t,r);else{if(s=t.current.alternate,!(r&30)&&!J1(s)&&(e=Xa(t,r),e===2&&(i=uc(t),i!==0&&(r=i,e=Oc(t,i))),e===1))throw n=lo,Nr(t,0),On(t,r),Tt(t,Me()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:_r(t,yt,fn);break;case 3:if(On(t,r),(r&130023424)===r&&(e=qh+500-Me(),10<e)){if(Da(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){dt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=yc(_r.bind(null,t,yt,fn),e);break}_r(t,yt,fn);break;case 4:if(On(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-$t(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Q1(r/1960))-r,10<r){t.timeoutHandle=yc(_r.bind(null,t,yt,fn),r);break}_r(t,yt,fn);break;case 5:_r(t,yt,fn);break;default:throw Error(U(329))}}}return Tt(t,Me()),t.callbackNode===n?a0.bind(null,t):null}function Oc(t,e){var n=Vi;return t.current.memoizedState.isDehydrated&&(Nr(t,e).flags|=256),t=Xa(t,e),t!==2&&(e=yt,yt=n,e!==null&&Uc(e)),t}function Uc(t){yt===null?yt=t:yt.push.apply(yt,t)}function J1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!qt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function On(t,e){for(e&=~Gh,e&=~Nl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-$t(e),r=1<<n;t[n]=-1,e&=~r}}function Up(t){if(ue&6)throw Error(U(327));ys();var e=Da(t,0);if(!(e&1))return Tt(t,Me()),null;var n=Xa(t,e);if(t.tag!==0&&n===2){var r=uc(t);r!==0&&(e=r,n=Oc(t,r))}if(n===1)throw n=lo,Nr(t,0),On(t,e),Tt(t,Me()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_r(t,yt,fn),Tt(t,Me()),null}function Wh(t,e){var n=ue;ue|=1;try{return t(e)}finally{ue=n,ue===0&&(Ss=Me()+500,Tl&&ur())}}function Dr(t){jn!==null&&jn.tag===0&&!(ue&6)&&ys();var e=ue;ue|=1;var n=Ut.transition,r=de;try{if(Ut.transition=null,de=1,t)return t()}finally{de=r,Ut.transition=n,ue=e,!(ue&6)&&ur()}}function Qh(){Nt=hs.current,_e(hs)}function Nr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,R1(n)),Ve!==null)for(n=Ve.return;n!==null;){var r=n;switch(Ch(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ka();break;case 3:Ns(),_e(_t),_e(lt),jh();break;case 5:Uh(r);break;case 4:Ns();break;case 13:_e(Ie);break;case 19:_e(Ie);break;case 10:Lh(r.type._context);break;case 22:case 23:Qh()}n=n.return}if(qe=t,Ve=t=qn(t.current,null),Xe=Nt=e,He=0,lo=null,Gh=Nl=Lr=0,yt=Vi=null,xr!==null){for(e=0;e<xr.length;e++)if(n=xr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}xr=null}return t}function l0(t,e){do{var n=Ve;try{if(Mh(),va.current=Wa,qa){for(var r=Ne.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}qa=!1}if(Mr=0,Ge=Fe=Ne=null,Li=!1,io=0,Yh.current=null,n===null||n.return===null){He=1,lo=e,Ve=null;break}e:{var i=t,a=n.return,l=n,u=e;if(e=Xe,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=l,y=p.tag;if(!(p.mode&1)&&(y===0||y===11||y===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var R=Ip(a);if(R!==null){R.flags&=-257,Np(R,a,l,i,e),R.mode&1&&wp(i,d,e),e=R,u=d;var C=e.updateQueue;if(C===null){var b=new Set;b.add(u),e.updateQueue=b}else C.add(u);break e}else{if(!(e&1)){wp(i,d,e),Jh();break e}u=Error(U(426))}}else if(xe&&l.mode&1){var O=Ip(a);if(O!==null){!(O.flags&65536)&&(O.flags|=256),Np(O,a,l,i,e),kh(Rs(u,l));break e}}i=u=Rs(u,l),He!==4&&(He=2),Vi===null?Vi=[i]:Vi.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=$y(i,u,e);Ap(i,I);break e;case 1:l=u;var v=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Yn===null||!Yn.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var L=Yy(i,l,e);Ap(i,L);break e}}i=i.return}while(i!==null)}h0(n)}catch(j){e=j,Ve===n&&n!==null&&(Ve=n=n.return);continue}break}while(!0)}function u0(){var t=Qa.current;return Qa.current=Wa,t===null?Wa:t}function Jh(){(He===0||He===3||He===2)&&(He=4),qe===null||!(Lr&268435455)&&!(Nl&268435455)||On(qe,Xe)}function Xa(t,e){var n=ue;ue|=2;var r=u0();(qe!==t||Xe!==e)&&(fn=null,Nr(t,e));do try{Z1();break}catch(s){l0(t,s)}while(!0);if(Mh(),ue=n,Qa.current=r,Ve!==null)throw Error(U(261));return qe=null,Xe=0,He}function Z1(){for(;Ve!==null;)c0(Ve)}function X1(){for(;Ve!==null&&!w_();)c0(Ve)}function c0(t){var e=f0(t.alternate,t,Nt);t.memoizedProps=t.pendingProps,e===null?h0(t):Ve=e,Yh.current=null}function h0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Y1(n,e),n!==null){n.flags&=32767,Ve=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{He=6,Ve=null;return}}else if(n=$1(n,e,Nt),n!==null){Ve=n;return}if(e=e.sibling,e!==null){Ve=e;return}Ve=e=t}while(e!==null);He===0&&(He=5)}function _r(t,e,n){var r=de,s=Ut.transition;try{Ut.transition=null,de=1,eE(t,e,n,r)}finally{Ut.transition=s,de=r}return null}function eE(t,e,n,r){do ys();while(jn!==null);if(ue&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(L_(t,i),t===qe&&(Ve=qe=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||oa||(oa=!0,p0(La,function(){return ys(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ut.transition,Ut.transition=null;var a=de;de=1;var l=ue;ue|=4,Yh.current=null,q1(t,n),i0(n,t),_1(mc),Va=!!pc,mc=pc=null,t.current=n,W1(n),I_(),ue=l,de=a,Ut.transition=i}else t.current=n;if(oa&&(oa=!1,jn=t,Za=s),i=t.pendingLanes,i===0&&(Yn=null),S_(n.stateNode),Tt(t,Me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ja)throw Ja=!1,t=Dc,Dc=null,t;return Za&1&&t.tag!==0&&ys(),i=t.pendingLanes,i&1?t===Vc?Oi++:(Oi=0,Vc=t):Oi=0,ur(),null}function ys(){if(jn!==null){var t=$g(Za),e=Ut.transition,n=de;try{if(Ut.transition=null,de=16>t?16:t,jn===null)var r=!1;else{if(t=jn,jn=null,Za=0,ue&6)throw Error(U(331));var s=ue;for(ue|=4,G=t.current;G!==null;){var i=G,a=i.child;if(G.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(G=d;G!==null;){var p=G;switch(p.tag){case 0:case 11:case 15:Di(8,p,i)}var y=p.child;if(y!==null)y.return=p,G=y;else for(;G!==null;){p=G;var g=p.sibling,R=p.return;if(n0(p),p===d){G=null;break}if(g!==null){g.return=R,G=g;break}G=R}}}var C=i.alternate;if(C!==null){var b=C.child;if(b!==null){C.child=null;do{var O=b.sibling;b.sibling=null,b=O}while(b!==null)}}G=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,G=a;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Di(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,G=I;break e}G=i.return}}var v=t.current;for(G=v;G!==null;){a=G;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,G=w;else e:for(a=v;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Il(9,l)}}catch(j){ke(l,l.return,j)}if(l===a){G=null;break e}var L=l.sibling;if(L!==null){L.return=l.return,G=L;break e}G=l.return}}if(ue=s,ur(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(yl,t)}catch{}r=!0}return r}finally{de=n,Ut.transition=e}}return!1}function jp(t,e,n){e=Rs(n,e),e=$y(t,e,1),t=$n(t,e,1),e=dt(),t!==null&&(To(t,1,e),Tt(t,e))}function ke(t,e,n){if(t.tag===3)jp(t,t,n);else for(;e!==null;){if(e.tag===3){jp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yn===null||!Yn.has(r))){t=Rs(n,t),t=Yy(e,t,1),e=$n(e,t,1),t=dt(),e!==null&&(To(e,1,t),Tt(e,t));break}}e=e.return}}function tE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=dt(),t.pingedLanes|=t.suspendedLanes&n,qe===t&&(Xe&n)===n&&(He===4||He===3&&(Xe&130023424)===Xe&&500>Me()-qh?Nr(t,0):Gh|=n),Tt(t,e)}function d0(t,e){e===0&&(t.mode&1?(e=Qo,Qo<<=1,!(Qo&130023424)&&(Qo=4194304)):e=1);var n=dt();t=_n(t,e),t!==null&&(To(t,e,n),Tt(t,n))}function nE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),d0(t,n)}function rE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),d0(t,n)}var f0;f0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||_t.current)vt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return vt=!1,z1(t,e,n);vt=!!(t.flags&131072)}else vt=!1,xe&&e.flags&1048576&&yy(e,Ba,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ea(t,e),t=e.pendingProps;var s=xs(e,lt.current);gs(e,n),s=Fh(null,e,r,t,s,n);var i=Hh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Et(r)?(i=!0,Fa(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Vh(e),s.updater=wl,e.stateNode=s,s._reactInternals=e,wc(e,r,t,n),e=Rc(null,e,r,!0,i,n)):(e.tag=0,xe&&i&&Ph(e),ht(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ea(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=iE(r),t=Ht(r,t),s){case 0:e=Nc(null,e,r,t,n);break e;case 1:e=Pp(null,e,r,t,n);break e;case 11:e=Rp(null,e,r,t,n);break e;case 14:e=Sp(null,e,r,Ht(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ht(r,s),Nc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ht(r,s),Pp(t,e,r,s,n);case 3:e:{if(Qy(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,xy(t,e),Ya(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Rs(Error(U(423)),e),e=Cp(t,e,r,n,s);break e}else if(r!==s){s=Rs(Error(U(424)),e),e=Cp(t,e,r,n,s);break e}else for(Rt=zn(e.stateNode.containerInfo.firstChild),Pt=e,xe=!0,zt=null,n=Ey(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ws(),r===s){e=En(t,e,n);break e}ht(t,e,r,n)}e=e.child}return e;case 5:return wy(e),t===null&&Ec(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,gc(r,s)?a=null:i!==null&&gc(r,i)&&(e.flags|=32),Wy(t,e),ht(t,e,a,n),e.child;case 6:return t===null&&Ec(e),null;case 13:return Jy(t,e,n);case 4:return Oh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Is(e,null,r,n):ht(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ht(r,s),Rp(t,e,r,s,n);case 7:return ht(t,e,e.pendingProps,n),e.child;case 8:return ht(t,e,e.pendingProps.children,n),e.child;case 12:return ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,ge(za,r._currentValue),r._currentValue=a,i!==null)if(qt(i.value,a)){if(i.children===s.children&&!_t.current){e=En(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=yn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Tc(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(U(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Tc(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}ht(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,gs(e,n),s=jt(s),r=r(s),e.flags|=1,ht(t,e,r,n),e.child;case 14:return r=e.type,s=Ht(r,e.pendingProps),s=Ht(r.type,s),Sp(t,e,r,s,n);case 15:return Gy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ht(r,s),Ea(t,e),e.tag=1,Et(r)?(t=!0,Fa(e)):t=!1,gs(e,n),zy(e,r,s),wc(e,r,s,n),Rc(null,e,r,!0,t,n);case 19:return Zy(t,e,n);case 22:return qy(t,e,n)}throw Error(U(156,e.tag))};function p0(t,e){return Fg(t,e)}function sE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(t,e,n,r){return new sE(t,e,n,r)}function Zh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function iE(t){if(typeof t=="function")return Zh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yh)return 11;if(t===Ah)return 14}return 2}function qn(t,e){var n=t.alternate;return n===null?(n=Ot(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function wa(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Zh(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ts:return Rr(n.children,s,i,e);case gh:a=8,s|=8;break;case qu:return t=Ot(12,n,e,s|2),t.elementType=qu,t.lanes=i,t;case Wu:return t=Ot(13,n,e,s),t.elementType=Wu,t.lanes=i,t;case Qu:return t=Ot(19,n,e,s),t.elementType=Qu,t.lanes=i,t;case wg:return Rl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Tg:a=10;break e;case xg:a=9;break e;case yh:a=11;break e;case Ah:a=14;break e;case Ln:a=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Ot(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Rr(t,e,n,r){return t=Ot(7,t,r,e),t.lanes=n,t}function Rl(t,e,n,r){return t=Ot(22,t,r,e),t.elementType=wg,t.lanes=n,t.stateNode={isHidden:!1},t}function Lu(t,e,n){return t=Ot(6,t,null,e),t.lanes=n,t}function Du(t,e,n){return e=Ot(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function oE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mu(0),this.expirationTimes=mu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Xh(t,e,n,r,s,i,a,l,u){return t=new oE(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ot(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vh(i),t}function aE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:es,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function m0(t){if(!t)return er;t=t._reactInternals;e:{if(jr(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Et(n))return my(t,n,e)}return e}function g0(t,e,n,r,s,i,a,l,u){return t=Xh(n,r,!0,t,s,i,a,l,u),t.context=m0(null),n=t.current,r=dt(),s=Gn(n),i=yn(r,s),i.callback=e??null,$n(n,i,s),t.current.lanes=s,To(t,s,r),Tt(t,r),t}function Sl(t,e,n,r){var s=e.current,i=dt(),a=Gn(s);return n=m0(n),e.context===null?e.context=n:e.pendingContext=n,e=yn(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=$n(s,e,a),t!==null&&(Yt(t,s,a,i),Aa(t,s,a)),a}function el(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Kp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ed(t,e){Kp(t,e),(t=t.alternate)&&Kp(t,e)}function lE(){return null}var y0=typeof reportError=="function"?reportError:function(t){console.error(t)};function td(t){this._internalRoot=t}Pl.prototype.render=td.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Sl(t,e,null,null)};Pl.prototype.unmount=td.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Dr(function(){Sl(null,t,null,null)}),e[vn]=null}};function Pl(t){this._internalRoot=t}Pl.prototype.unstable_scheduleHydration=function(t){if(t){var e=qg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Vn.length&&e!==0&&e<Vn[n].priority;n++);Vn.splice(n,0,t),n===0&&Qg(t)}};function nd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Fp(){}function uE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=el(a);i.call(d)}}var a=g0(e,r,t,0,null,!1,!1,"",Fp);return t._reactRootContainer=a,t[vn]=a.current,eo(t.nodeType===8?t.parentNode:t),Dr(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=el(u);l.call(d)}}var u=Xh(t,0,!1,null,null,!1,!1,"",Fp);return t._reactRootContainer=u,t[vn]=u.current,eo(t.nodeType===8?t.parentNode:t),Dr(function(){Sl(e,u,n,r)}),u}function kl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var u=el(a);l.call(u)}}Sl(e,a,t,s)}else a=uE(n,e,t,s,r);return el(a)}Yg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=xi(e.pendingLanes);n!==0&&(Eh(e,n|1),Tt(e,Me()),!(ue&6)&&(Ss=Me()+500,ur()))}break;case 13:Dr(function(){var r=_n(t,1);if(r!==null){var s=dt();Yt(r,t,1,s)}}),ed(t,1)}};Th=function(t){if(t.tag===13){var e=_n(t,134217728);if(e!==null){var n=dt();Yt(e,t,134217728,n)}ed(t,134217728)}};Gg=function(t){if(t.tag===13){var e=Gn(t),n=_n(t,e);if(n!==null){var r=dt();Yt(n,t,e,r)}ed(t,e)}};qg=function(){return de};Wg=function(t,e){var n=de;try{return de=t,e()}finally{de=n}};oc=function(t,e,n){switch(e){case"input":if(Xu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=El(r);if(!s)throw Error(U(90));Ng(r),Xu(r,s)}}}break;case"textarea":Sg(t,n);break;case"select":e=n.value,e!=null&&ds(t,!!n.multiple,e,!1)}};Dg=Wh;Vg=Dr;var cE={usingClientEntryPoint:!1,Events:[wo,is,El,Mg,Lg,Wh]},Ai={findFiberByHostInstance:Tr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hE={bundleType:Ai.bundleType,version:Ai.version,rendererPackageName:Ai.rendererPackageName,rendererConfig:Ai.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:In.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jg(t),t===null?null:t.stateNode},findFiberByHostInstance:Ai.findFiberByHostInstance||lE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var aa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!aa.isDisabled&&aa.supportsFiber)try{yl=aa.inject(hE),nn=aa}catch{}}kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cE;kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nd(e))throw Error(U(200));return aE(t,e,null,n)};kt.createRoot=function(t,e){if(!nd(t))throw Error(U(299));var n=!1,r="",s=y0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Xh(t,1,!1,null,null,n,!1,r,s),t[vn]=e.current,eo(t.nodeType===8?t.parentNode:t),new td(e)};kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=jg(e),t=t===null?null:t.stateNode,t};kt.flushSync=function(t){return Dr(t)};kt.hydrate=function(t,e,n){if(!Cl(e))throw Error(U(200));return kl(null,t,e,!0,n)};kt.hydrateRoot=function(t,e,n){if(!nd(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=y0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=g0(e,null,t,1,n??null,s,!1,i,a),t[vn]=e.current,eo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Pl(e)};kt.render=function(t,e,n){if(!Cl(e))throw Error(U(200));return kl(null,t,e,!1,n)};kt.unmountComponentAtNode=function(t){if(!Cl(t))throw Error(U(40));return t._reactRootContainer?(Dr(function(){kl(null,null,t,!1,function(){t._reactRootContainer=null,t[vn]=null})}),!0):!1};kt.unstable_batchedUpdates=Wh;kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Cl(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return kl(t,e,n,!1,r)};kt.version="18.3.1-next-f1338f8080-20240426";function A0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(A0)}catch(t){console.error(t)}}A0(),Ag.exports=kt;var dE=Ag.exports,Hp=dE;Yu.createRoot=Hp.createRoot,Yu.hydrateRoot=Hp.hydrateRoot;/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=t=>{const e=pE(t);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=ne.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},u)=>ne.createElement("svg",{ref:u,...mE,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:v0("lucide",s),...!i&&!gE(l)&&{"aria-hidden":"true"},...l},[...a.map(([d,p])=>ne.createElement(d,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=(t,e)=>{const n=ne.forwardRef(({className:r,...s},i)=>ne.createElement(yE,{ref:i,iconNode:e,className:v0(`lucide-${fE(Bp(t))}`,`lucide-${t}`,r),...s}));return n.displayName=Bp(t),n};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],vE=ce("arrow-right-left",AE);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]],Ui=ce("bus",_E);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],TE=ce("chart-column",EE);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ji=ce("chevron-right",xE);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],_0=ce("circle-alert",wE);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],NE=ce("circle-check-big",IE);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],E0=ce("circle-plus",RE);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],PE=ce("circle-question-mark",SE);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],tl=ce("clock",CE);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],bE=ce("file-text",kE);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],LE=ce("heart",ME);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],T0=ce("info",DE);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],OE=ce("lock",VE);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],zp=ce("map-pin",UE);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],$p=ce("map",jE);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],FE=ce("maximize-2",KE);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],BE=ce("menu",HE);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],jc=ce("message-circle",zE);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],YE=ce("message-square",$E);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],qE=ce("monitor",GE);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],QE=ce("pen-line",WE);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],ZE=ce("phone",JE);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],eT=ce("save",XE);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Yp=ce("search",tT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],rT=ce("shield",nT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],x0=ce("square-plus",sT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],w0=ce("star",iT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],aT=ce("thumbs-up",oT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],uT=ce("ticket",lT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],hT=ce("trash-2",cT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Kc=ce("triangle-alert",dT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],pT=ce("trophy",fT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],gT=ce("x",mT),yT="/buses/assets/keralabuses-EvtwbCdp.png",AT="/buses/assets/keralabuses_ksrtc-C2bC5sYl.png",vT="/buses/assets/keralabuses_private_bus-BVmgNP3-.png",_T="/buses/assets/keralabuses_ksrtc_volvo-CrkewkFA.png",ET=()=>{};var Gp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},TT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},N0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,p=i>>2,y=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,R=d&63;u||(R=64,a||(g=64)),r.push(n[p],n[y],n[g],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(I0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):TT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||y==null)throw new xT;const g=i<<2|l>>4;if(r.push(g),d!==64){const R=l<<4&240|d>>2;if(r.push(R),y!==64){const C=d<<6&192|y;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wT=function(t){const e=I0(t);return N0.encodeByteArray(e,!0)},nl=function(t){return wT(t).replace(/\./g,"")},IT=function(t){try{return N0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=()=>NT().__FIREBASE_DEFAULTS__,ST=()=>{if(typeof process>"u"||typeof Gp>"u")return;const t=Gp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},PT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&IT(t[1]);return e&&JSON.parse(e)},rd=()=>{try{return ET()||RT()||ST()||PT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},CT=t=>{var e,n;return(n=(e=rd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},kT=t=>{const e=CT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},R0=()=>{var t;return(t=rd())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function MT(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[nl(JSON.stringify(n)),nl(JSON.stringify(a)),""].join(".")}const Ki={};function DT(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ki))Ki[e]?t.emulator.push(e):t.prod.push(e);return t}function VT(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let qp=!1;function OT(t,e){if(typeof window>"u"||typeof document>"u"||!sd(window.location.host)||Ki[t]===e||Ki[t]||qp)return;Ki[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=DT().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,R){g.setAttribute("width","24"),g.setAttribute("id",R),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{qp=!0,a()},g}function p(g,R){g.setAttribute("id",R),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function y(){const g=VT(r),R=n("text"),C=document.getElementById(R)||document.createElement("span"),b=n("learnmore"),O=document.getElementById(b)||document.createElement("a"),I=n("preprendIcon"),v=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const w=g.element;l(w),p(O,b);const L=d();u(v,I),w.append(v,C,O,L),document.body.appendChild(w)}i?(C.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jT(){var e;const t=(e=rd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KT(){return!jT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FT(){try{return typeof indexedDB=="object"}catch{return!1}}function HT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="FirebaseError";class Ks extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=BT,Object.setPrototypeOf(this,Ks.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,S0.prototype.create)}}class S0{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?zT(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Ks(s,l,r)}}function zT(t,e){return t.replace($T,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const $T=/\{\$([^}]+)}/g;function uo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Wp(i)&&Wp(a)){if(!uo(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Wp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(t){return t&&t._delegate?t._delegate:t}class co{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new bT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qT(e))try{this.getOrInitializeService({instanceIdentifier:Er})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Er){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Er){return this.instances.has(e)}getOptions(e=Er){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Er){return this.component?this.component.multipleInstances?e:Er:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GT(t){return t===Er?void 0:t}function qT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new YT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(le||(le={}));const QT={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},JT=le.INFO,ZT={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},XT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=ZT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class P0{constructor(e){this.name=e,this._logLevel=JT,this._logHandler=XT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const ex=(t,e)=>e.some(n=>t instanceof n);let Qp,Jp;function tx(){return Qp||(Qp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nx(){return Jp||(Jp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C0=new WeakMap,Fc=new WeakMap,k0=new WeakMap,Vu=new WeakMap,id=new WeakMap;function rx(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Wn(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&C0.set(n,t)}).catch(()=>{}),id.set(e,t),e}function sx(t){if(Fc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Fc.set(t,e)}let Hc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||k0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ix(t){Hc=t(Hc)}function ox(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ou(this),e,...n);return k0.set(r,e.sort?e.sort():[e]),Wn(r)}:nx().includes(t)?function(...e){return t.apply(Ou(this),e),Wn(C0.get(this))}:function(...e){return Wn(t.apply(Ou(this),e))}}function ax(t){return typeof t=="function"?ox(t):(t instanceof IDBTransaction&&sx(t),ex(t,tx())?new Proxy(t,Hc):t)}function Wn(t){if(t instanceof IDBRequest)return rx(t);if(Vu.has(t))return Vu.get(t);const e=ax(t);return e!==t&&(Vu.set(t,e),id.set(e,t)),e}const Ou=t=>id.get(t);function lx(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Wn(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Wn(a.result),u.oldVersion,u.newVersion,Wn(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const ux=["get","getKey","getAll","getAllKeys","count"],cx=["put","add","delete","clear"],Uu=new Map;function Zp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Uu.get(e))return Uu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=cx.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ux.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return Uu.set(e,i),i}ix(t=>({...t,get:(e,n,r)=>Zp(e,n)||t.get(e,n,r),has:(e,n)=>!!Zp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dx(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function dx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bc="@firebase/app",Xp="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn=new P0("@firebase/app"),fx="@firebase/app-compat",px="@firebase/analytics-compat",mx="@firebase/analytics",gx="@firebase/app-check-compat",yx="@firebase/app-check",Ax="@firebase/auth",vx="@firebase/auth-compat",_x="@firebase/database",Ex="@firebase/data-connect",Tx="@firebase/database-compat",xx="@firebase/functions",wx="@firebase/functions-compat",Ix="@firebase/installations",Nx="@firebase/installations-compat",Rx="@firebase/messaging",Sx="@firebase/messaging-compat",Px="@firebase/performance",Cx="@firebase/performance-compat",kx="@firebase/remote-config",bx="@firebase/remote-config-compat",Mx="@firebase/storage",Lx="@firebase/storage-compat",Dx="@firebase/firestore",Vx="@firebase/ai",Ox="@firebase/firestore-compat",Ux="firebase",jx="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc="[DEFAULT]",Kx={[Bc]:"fire-core",[fx]:"fire-core-compat",[mx]:"fire-analytics",[px]:"fire-analytics-compat",[yx]:"fire-app-check",[gx]:"fire-app-check-compat",[Ax]:"fire-auth",[vx]:"fire-auth-compat",[_x]:"fire-rtdb",[Ex]:"fire-data-connect",[Tx]:"fire-rtdb-compat",[xx]:"fire-fn",[wx]:"fire-fn-compat",[Ix]:"fire-iid",[Nx]:"fire-iid-compat",[Rx]:"fire-fcm",[Sx]:"fire-fcm-compat",[Px]:"fire-perf",[Cx]:"fire-perf-compat",[kx]:"fire-rc",[bx]:"fire-rc-compat",[Mx]:"fire-gcs",[Lx]:"fire-gcs-compat",[Dx]:"fire-fst",[Ox]:"fire-fst-compat",[Vx]:"fire-vertex","fire-js":"fire-js",[Ux]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=new Map,Fx=new Map,$c=new Map;function em(t,e){try{t.container.addComponent(e)}catch(n){Tn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function sl(t){const e=t.name;if($c.has(e))return Tn.debug(`There were multiple attempts to register component ${e}.`),!1;$c.set(e,t);for(const n of rl.values())em(n,t);for(const n of Fx.values())em(n,t);return!0}function Hx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Bx(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qn=new S0("app","Firebase",zx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=jx;function b0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:zc,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Qn.create("bad-app-name",{appName:String(s)});if(n||(n=R0()),!n)throw Qn.create("no-options");const i=rl.get(s);if(i){if(uo(n,i.options)&&uo(r,i.config))return i;throw Qn.create("duplicate-app",{appName:s})}const a=new WT(s);for(const u of $c.values())a.addComponent(u);const l=new $x(n,r,a);return rl.set(s,l),l}function Gx(t=zc){const e=rl.get(t);if(!e&&t===zc&&R0())return b0();if(!e)throw Qn.create("no-app",{appName:t});return e}function As(t,e,n){let r=Kx[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Tn.warn(a.join(" "));return}sl(new co(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="firebase-heartbeat-database",Wx=1,ho="firebase-heartbeat-store";let ju=null;function M0(){return ju||(ju=lx(qx,Wx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ho)}catch(n){console.warn(n)}}}}).catch(t=>{throw Qn.create("idb-open",{originalErrorMessage:t.message})})),ju}async function Qx(t){try{const n=(await M0()).transaction(ho),r=await n.objectStore(ho).get(L0(t));return await n.done,r}catch(e){if(e instanceof Ks)Tn.warn(e.message);else{const n=Qn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Tn.warn(n.message)}}}async function tm(t,e){try{const r=(await M0()).transaction(ho,"readwrite");await r.objectStore(ho).put(e,L0(t)),await r.done}catch(n){if(n instanceof Ks)Tn.warn(n.message);else{const r=Qn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Tn.warn(r.message)}}}function L0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx=1024,Zx=30;class Xx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new tw(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=nm();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Zx){const a=nw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Tn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=nm(),{heartbeatsToSend:r,unsentEntries:s}=ew(this._heartbeatsCache.heartbeats),i=nl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Tn.warn(n),""}}}function nm(){return new Date().toISOString().substring(0,10)}function ew(t,e=Jx){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),rm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),rm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class tw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FT()?HT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Qx(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return tm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return tm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function rm(t){return nl(JSON.stringify({version:2,heartbeats:t})).length}function nw(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(t){sl(new co("platform-logger",e=>new hx(e),"PRIVATE")),sl(new co("heartbeat",e=>new Xx(e),"PRIVATE")),As(Bc,Xp,t),As(Bc,Xp,"esm2020"),As("fire-js","")}rw("");var sw="firebase",iw="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */As(sw,iw,"app");var sm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jn,D0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,A){function E(){}E.prototype=A.prototype,_.F=A.prototype,_.prototype=new E,_.prototype.constructor=_,_.D=function(x,N,S){for(var T=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)T[fe-2]=arguments[fe];return A.prototype[N].apply(x,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,A,E){E||(E=0);const x=Array(16);if(typeof A=="string")for(var N=0;N<16;++N)x[N]=A.charCodeAt(E++)|A.charCodeAt(E++)<<8|A.charCodeAt(E++)<<16|A.charCodeAt(E++)<<24;else for(N=0;N<16;++N)x[N]=A[E++]|A[E++]<<8|A[E++]<<16|A[E++]<<24;A=_.g[0],E=_.g[1],N=_.g[2];let S=_.g[3],T;T=A+(S^E&(N^S))+x[0]+3614090360&4294967295,A=E+(T<<7&4294967295|T>>>25),T=S+(N^A&(E^N))+x[1]+3905402710&4294967295,S=A+(T<<12&4294967295|T>>>20),T=N+(E^S&(A^E))+x[2]+606105819&4294967295,N=S+(T<<17&4294967295|T>>>15),T=E+(A^N&(S^A))+x[3]+3250441966&4294967295,E=N+(T<<22&4294967295|T>>>10),T=A+(S^E&(N^S))+x[4]+4118548399&4294967295,A=E+(T<<7&4294967295|T>>>25),T=S+(N^A&(E^N))+x[5]+1200080426&4294967295,S=A+(T<<12&4294967295|T>>>20),T=N+(E^S&(A^E))+x[6]+2821735955&4294967295,N=S+(T<<17&4294967295|T>>>15),T=E+(A^N&(S^A))+x[7]+4249261313&4294967295,E=N+(T<<22&4294967295|T>>>10),T=A+(S^E&(N^S))+x[8]+1770035416&4294967295,A=E+(T<<7&4294967295|T>>>25),T=S+(N^A&(E^N))+x[9]+2336552879&4294967295,S=A+(T<<12&4294967295|T>>>20),T=N+(E^S&(A^E))+x[10]+4294925233&4294967295,N=S+(T<<17&4294967295|T>>>15),T=E+(A^N&(S^A))+x[11]+2304563134&4294967295,E=N+(T<<22&4294967295|T>>>10),T=A+(S^E&(N^S))+x[12]+1804603682&4294967295,A=E+(T<<7&4294967295|T>>>25),T=S+(N^A&(E^N))+x[13]+4254626195&4294967295,S=A+(T<<12&4294967295|T>>>20),T=N+(E^S&(A^E))+x[14]+2792965006&4294967295,N=S+(T<<17&4294967295|T>>>15),T=E+(A^N&(S^A))+x[15]+1236535329&4294967295,E=N+(T<<22&4294967295|T>>>10),T=A+(N^S&(E^N))+x[1]+4129170786&4294967295,A=E+(T<<5&4294967295|T>>>27),T=S+(E^N&(A^E))+x[6]+3225465664&4294967295,S=A+(T<<9&4294967295|T>>>23),T=N+(A^E&(S^A))+x[11]+643717713&4294967295,N=S+(T<<14&4294967295|T>>>18),T=E+(S^A&(N^S))+x[0]+3921069994&4294967295,E=N+(T<<20&4294967295|T>>>12),T=A+(N^S&(E^N))+x[5]+3593408605&4294967295,A=E+(T<<5&4294967295|T>>>27),T=S+(E^N&(A^E))+x[10]+38016083&4294967295,S=A+(T<<9&4294967295|T>>>23),T=N+(A^E&(S^A))+x[15]+3634488961&4294967295,N=S+(T<<14&4294967295|T>>>18),T=E+(S^A&(N^S))+x[4]+3889429448&4294967295,E=N+(T<<20&4294967295|T>>>12),T=A+(N^S&(E^N))+x[9]+568446438&4294967295,A=E+(T<<5&4294967295|T>>>27),T=S+(E^N&(A^E))+x[14]+3275163606&4294967295,S=A+(T<<9&4294967295|T>>>23),T=N+(A^E&(S^A))+x[3]+4107603335&4294967295,N=S+(T<<14&4294967295|T>>>18),T=E+(S^A&(N^S))+x[8]+1163531501&4294967295,E=N+(T<<20&4294967295|T>>>12),T=A+(N^S&(E^N))+x[13]+2850285829&4294967295,A=E+(T<<5&4294967295|T>>>27),T=S+(E^N&(A^E))+x[2]+4243563512&4294967295,S=A+(T<<9&4294967295|T>>>23),T=N+(A^E&(S^A))+x[7]+1735328473&4294967295,N=S+(T<<14&4294967295|T>>>18),T=E+(S^A&(N^S))+x[12]+2368359562&4294967295,E=N+(T<<20&4294967295|T>>>12),T=A+(E^N^S)+x[5]+4294588738&4294967295,A=E+(T<<4&4294967295|T>>>28),T=S+(A^E^N)+x[8]+2272392833&4294967295,S=A+(T<<11&4294967295|T>>>21),T=N+(S^A^E)+x[11]+1839030562&4294967295,N=S+(T<<16&4294967295|T>>>16),T=E+(N^S^A)+x[14]+4259657740&4294967295,E=N+(T<<23&4294967295|T>>>9),T=A+(E^N^S)+x[1]+2763975236&4294967295,A=E+(T<<4&4294967295|T>>>28),T=S+(A^E^N)+x[4]+1272893353&4294967295,S=A+(T<<11&4294967295|T>>>21),T=N+(S^A^E)+x[7]+4139469664&4294967295,N=S+(T<<16&4294967295|T>>>16),T=E+(N^S^A)+x[10]+3200236656&4294967295,E=N+(T<<23&4294967295|T>>>9),T=A+(E^N^S)+x[13]+681279174&4294967295,A=E+(T<<4&4294967295|T>>>28),T=S+(A^E^N)+x[0]+3936430074&4294967295,S=A+(T<<11&4294967295|T>>>21),T=N+(S^A^E)+x[3]+3572445317&4294967295,N=S+(T<<16&4294967295|T>>>16),T=E+(N^S^A)+x[6]+76029189&4294967295,E=N+(T<<23&4294967295|T>>>9),T=A+(E^N^S)+x[9]+3654602809&4294967295,A=E+(T<<4&4294967295|T>>>28),T=S+(A^E^N)+x[12]+3873151461&4294967295,S=A+(T<<11&4294967295|T>>>21),T=N+(S^A^E)+x[15]+530742520&4294967295,N=S+(T<<16&4294967295|T>>>16),T=E+(N^S^A)+x[2]+3299628645&4294967295,E=N+(T<<23&4294967295|T>>>9),T=A+(N^(E|~S))+x[0]+4096336452&4294967295,A=E+(T<<6&4294967295|T>>>26),T=S+(E^(A|~N))+x[7]+1126891415&4294967295,S=A+(T<<10&4294967295|T>>>22),T=N+(A^(S|~E))+x[14]+2878612391&4294967295,N=S+(T<<15&4294967295|T>>>17),T=E+(S^(N|~A))+x[5]+4237533241&4294967295,E=N+(T<<21&4294967295|T>>>11),T=A+(N^(E|~S))+x[12]+1700485571&4294967295,A=E+(T<<6&4294967295|T>>>26),T=S+(E^(A|~N))+x[3]+2399980690&4294967295,S=A+(T<<10&4294967295|T>>>22),T=N+(A^(S|~E))+x[10]+4293915773&4294967295,N=S+(T<<15&4294967295|T>>>17),T=E+(S^(N|~A))+x[1]+2240044497&4294967295,E=N+(T<<21&4294967295|T>>>11),T=A+(N^(E|~S))+x[8]+1873313359&4294967295,A=E+(T<<6&4294967295|T>>>26),T=S+(E^(A|~N))+x[15]+4264355552&4294967295,S=A+(T<<10&4294967295|T>>>22),T=N+(A^(S|~E))+x[6]+2734768916&4294967295,N=S+(T<<15&4294967295|T>>>17),T=E+(S^(N|~A))+x[13]+1309151649&4294967295,E=N+(T<<21&4294967295|T>>>11),T=A+(N^(E|~S))+x[4]+4149444226&4294967295,A=E+(T<<6&4294967295|T>>>26),T=S+(E^(A|~N))+x[11]+3174756917&4294967295,S=A+(T<<10&4294967295|T>>>22),T=N+(A^(S|~E))+x[2]+718787259&4294967295,N=S+(T<<15&4294967295|T>>>17),T=E+(S^(N|~A))+x[9]+3951481745&4294967295,_.g[0]=_.g[0]+A&4294967295,_.g[1]=_.g[1]+(N+(T<<21&4294967295|T>>>11))&4294967295,_.g[2]=_.g[2]+N&4294967295,_.g[3]=_.g[3]+S&4294967295}r.prototype.v=function(_,A){A===void 0&&(A=_.length);const E=A-this.blockSize,x=this.C;let N=this.h,S=0;for(;S<A;){if(N==0)for(;S<=E;)s(this,_,S),S+=this.blockSize;if(typeof _=="string"){for(;S<A;)if(x[N++]=_.charCodeAt(S++),N==this.blockSize){s(this,x),N=0;break}}else for(;S<A;)if(x[N++]=_[S++],N==this.blockSize){s(this,x),N=0;break}}this.h=N,this.o+=A},r.prototype.A=function(){var _=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);_[0]=128;for(var A=1;A<_.length-8;++A)_[A]=0;A=this.o*8;for(var E=_.length-8;E<_.length;++E)_[E]=A&255,A/=256;for(this.v(_),_=Array(16),A=0,E=0;E<4;++E)for(let x=0;x<32;x+=8)_[A++]=this.g[E]>>>x&255;return _};function i(_,A){var E=l;return Object.prototype.hasOwnProperty.call(E,_)?E[_]:E[_]=A(_)}function a(_,A){this.h=A;const E=[];let x=!0;for(let N=_.length-1;N>=0;N--){const S=_[N]|0;x&&S==A||(E[N]=S,x=!1)}this.g=E}var l={};function u(_){return-128<=_&&_<128?i(_,function(A){return new a([A|0],A<0?-1:0)}):new a([_|0],_<0?-1:0)}function d(_){if(isNaN(_)||!isFinite(_))return y;if(_<0)return O(d(-_));const A=[];let E=1;for(let x=0;_>=E;x++)A[x]=_/E|0,E*=4294967296;return new a(A,0)}function p(_,A){if(_.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(_.charAt(0)=="-")return O(p(_.substring(1),A));if(_.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=d(Math.pow(A,8));let x=y;for(let S=0;S<_.length;S+=8){var N=Math.min(8,_.length-S);const T=parseInt(_.substring(S,S+N),A);N<8?(N=d(Math.pow(A,N)),x=x.j(N).add(d(T))):(x=x.j(E),x=x.add(d(T)))}return x}var y=u(0),g=u(1),R=u(16777216);t=a.prototype,t.m=function(){if(b(this))return-O(this).m();let _=0,A=1;for(let E=0;E<this.g.length;E++){const x=this.i(E);_+=(x>=0?x:4294967296+x)*A,A*=4294967296}return _},t.toString=function(_){if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(C(this))return"0";if(b(this))return"-"+O(this).toString(_);const A=d(Math.pow(_,6));var E=this;let x="";for(;;){const N=L(E,A).g;E=I(E,N.j(A));let S=((E.g.length>0?E.g[0]:E.h)>>>0).toString(_);if(E=N,C(E))return S+x;for(;S.length<6;)S="0"+S;x=S+x}},t.i=function(_){return _<0?0:_<this.g.length?this.g[_]:this.h};function C(_){if(_.h!=0)return!1;for(let A=0;A<_.g.length;A++)if(_.g[A]!=0)return!1;return!0}function b(_){return _.h==-1}t.l=function(_){return _=I(this,_),b(_)?-1:C(_)?0:1};function O(_){const A=_.g.length,E=[];for(let x=0;x<A;x++)E[x]=~_.g[x];return new a(E,~_.h).add(g)}t.abs=function(){return b(this)?O(this):this},t.add=function(_){const A=Math.max(this.g.length,_.g.length),E=[];let x=0;for(let N=0;N<=A;N++){let S=x+(this.i(N)&65535)+(_.i(N)&65535),T=(S>>>16)+(this.i(N)>>>16)+(_.i(N)>>>16);x=T>>>16,S&=65535,T&=65535,E[N]=T<<16|S}return new a(E,E[E.length-1]&-2147483648?-1:0)};function I(_,A){return _.add(O(A))}t.j=function(_){if(C(this)||C(_))return y;if(b(this))return b(_)?O(this).j(O(_)):O(O(this).j(_));if(b(_))return O(this.j(O(_)));if(this.l(R)<0&&_.l(R)<0)return d(this.m()*_.m());const A=this.g.length+_.g.length,E=[];for(var x=0;x<2*A;x++)E[x]=0;for(x=0;x<this.g.length;x++)for(let N=0;N<_.g.length;N++){const S=this.i(x)>>>16,T=this.i(x)&65535,fe=_.i(N)>>>16,mt=_.i(N)&65535;E[2*x+2*N]+=T*mt,v(E,2*x+2*N),E[2*x+2*N+1]+=S*mt,v(E,2*x+2*N+1),E[2*x+2*N+1]+=T*fe,v(E,2*x+2*N+1),E[2*x+2*N+2]+=S*fe,v(E,2*x+2*N+2)}for(_=0;_<A;_++)E[_]=E[2*_+1]<<16|E[2*_];for(_=A;_<2*A;_++)E[_]=0;return new a(E,0)};function v(_,A){for(;(_[A]&65535)!=_[A];)_[A+1]+=_[A]>>>16,_[A]&=65535,A++}function w(_,A){this.g=_,this.h=A}function L(_,A){if(C(A))throw Error("division by zero");if(C(_))return new w(y,y);if(b(_))return A=L(O(_),A),new w(O(A.g),O(A.h));if(b(A))return A=L(_,O(A)),new w(O(A.g),A.h);if(_.g.length>30){if(b(_)||b(A))throw Error("slowDivide_ only works with positive integers.");for(var E=g,x=A;x.l(_)<=0;)E=j(E),x=j(x);var N=K(E,1),S=K(x,1);for(x=K(x,2),E=K(E,2);!C(x);){var T=S.add(x);T.l(_)<=0&&(N=N.add(E),S=T),x=K(x,1),E=K(E,1)}return A=I(_,N.j(A)),new w(N,A)}for(N=y;_.l(A)>=0;){for(E=Math.max(1,Math.floor(_.m()/A.m())),x=Math.ceil(Math.log(E)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),S=d(E),T=S.j(A);b(T)||T.l(_)>0;)E-=x,S=d(E),T=S.j(A);C(S)&&(S=g),N=N.add(S),_=I(_,T)}return new w(N,_)}t.B=function(_){return L(this,_).h},t.and=function(_){const A=Math.max(this.g.length,_.g.length),E=[];for(let x=0;x<A;x++)E[x]=this.i(x)&_.i(x);return new a(E,this.h&_.h)},t.or=function(_){const A=Math.max(this.g.length,_.g.length),E=[];for(let x=0;x<A;x++)E[x]=this.i(x)|_.i(x);return new a(E,this.h|_.h)},t.xor=function(_){const A=Math.max(this.g.length,_.g.length),E=[];for(let x=0;x<A;x++)E[x]=this.i(x)^_.i(x);return new a(E,this.h^_.h)};function j(_){const A=_.g.length+1,E=[];for(let x=0;x<A;x++)E[x]=_.i(x)<<1|_.i(x-1)>>>31;return new a(E,_.h)}function K(_,A){const E=A>>5;A%=32;const x=_.g.length-E,N=[];for(let S=0;S<x;S++)N[S]=A>0?_.i(S+E)>>>A|_.i(S+E+1)<<32-A:_.i(S+E);return new a(N,_.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,D0=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,Jn=a}).apply(typeof sm<"u"?sm:typeof self<"u"?self:typeof window<"u"?window:{});var la=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var V0,Ii,O0,Ia,Yc,U0,j0,K0;(function(){var t,e=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof la=="object"&&la];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(o,c){if(c)e:{var f=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var P=o[m];if(!(P in f))break e;f=f[P]}o=o[o.length-1],m=f[o],c=c(m),c!=m&&c!=null&&e(f,o,{configurable:!0,writable:!0,value:c})}}s("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(o){return o||function(c){var f=[],m;for(m in c)Object.prototype.hasOwnProperty.call(c,m)&&f.push([m,c[m]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function u(o,c,f){return o.call.apply(o.bind,arguments)}function d(o,c,f){return d=u,d.apply(null,arguments)}function p(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function y(o,c){function f(){}f.prototype=c.prototype,o.Z=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Ob=function(m,P,k){for(var F=Array(arguments.length-2),re=2;re<arguments.length;re++)F[re-2]=arguments[re];return c.prototype[P].apply(m,F)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function R(o){const c=o.length;if(c>0){const f=Array(c);for(let m=0;m<c;m++)f[m]=o[m];return f}return[]}function C(o,c){for(let m=1;m<arguments.length;m++){const P=arguments[m];var f=typeof P;if(f=f!="object"?f:P?Array.isArray(P)?"array":f:"null",f=="array"||f=="object"&&typeof P.length=="number"){f=o.length||0;const k=P.length||0;o.length=f+k;for(let F=0;F<k;F++)o[f+F]=P[F]}else o.push(P)}}class b{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function O(o){a.setTimeout(()=>{throw o},0)}function I(){var o=_;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class v{constructor(){this.h=this.g=null}add(c,f){const m=w.get();m.set(c,f),this.h?this.h.next=m:this.g=m,this.h=m}}var w=new b(()=>new L,o=>o.reset());class L{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let j,K=!1,_=new v,A=()=>{const o=Promise.resolve(void 0);j=()=>{o.then(E)}};function E(){for(var o;o=I();){try{o.h.call(o.g)}catch(f){O(f)}var c=w;c.j(o),c.h<100&&(c.h++,o.next=c.g,c.g=o)}K=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var S=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};a.addEventListener("test",f,c),a.removeEventListener("test",f,c)}catch{}return o}();function T(o){return/^[\s\xa0]*$/.test(o)}function fe(o,c){N.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,c)}y(fe,N),fe.prototype.init=function(o,c){const f=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget,c||(f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement)),this.relatedTarget=c,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&fe.Z.h.call(this)},fe.prototype.h=function(){fe.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var mt="closure_listenable_"+(Math.random()*1e6|0),hn=0;function dn(o,c,f,m,P){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!m,this.ha=P,this.key=++hn,this.da=this.fa=!1}function B(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Q(o,c,f){for(const m in o)c.call(f,o[m],m,o)}function ee(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function H(o){const c={};for(const f in o)c[f]=o[f];return c}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function we(o,c){let f,m;for(let P=1;P<arguments.length;P++){m=arguments[P];for(f in m)o[f]=m[f];for(let k=0;k<Z.length;k++)f=Z[k],Object.prototype.hasOwnProperty.call(m,f)&&(o[f]=m[f])}}function Ee(o){this.src=o,this.g={},this.h=0}Ee.prototype.add=function(o,c,f,m,P){const k=o.toString();o=this.g[k],o||(o=this.g[k]=[],this.h++);const F=ut(o,c,m,P);return F>-1?(c=o[F],f||(c.fa=!1)):(c=new dn(c,this.src,k,!!m,P),c.fa=f,o.push(c)),c};function xt(o,c){const f=c.type;if(f in o.g){var m=o.g[f],P=Array.prototype.indexOf.call(m,c,void 0),k;(k=P>=0)&&Array.prototype.splice.call(m,P,1),k&&(B(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function ut(o,c,f,m){for(let P=0;P<o.length;++P){const k=o[P];if(!k.da&&k.listener==c&&k.capture==!!f&&k.ha==m)return P}return-1}var wt="closure_lm_"+(Math.random()*1e6|0),dr={};function bo(o,c,f,m,P){if(Array.isArray(c)){for(let k=0;k<c.length;k++)bo(o,c[k],f,m,P);return null}return f=Gs(f),o&&o[mt]?o.J(c,f,l(m)?!!m.capture:!1,P):Br(o,c,f,!1,m,P)}function Br(o,c,f,m,P,k){if(!c)throw Error("Invalid event type");const F=l(P)?!!P.capture:!!P;let re=Mt(o);if(re||(o[wt]=re=new Ee(o)),f=re.add(c,f,m,F,k),f.proxy)return f;if(m=M(),f.proxy=m,m.src=o,m.listener=f,o.addEventListener)S||(P=F),P===void 0&&(P=!1),o.addEventListener(c.toString(),m,P);else if(o.attachEvent)o.attachEvent(Pe(c.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function M(){function o(f){return c.call(o.src,o.listener,f)}const c=Te;return o}function z(o,c,f,m,P){if(Array.isArray(c))for(var k=0;k<c.length;k++)z(o,c[k],f,m,P);else m=l(m)?!!m.capture:!!m,f=Gs(f),o&&o[mt]?(o=o.i,k=String(c).toString(),k in o.g&&(c=o.g[k],f=ut(c,f,m,P),f>-1&&(B(c[f]),Array.prototype.splice.call(c,f,1),c.length==0&&(delete o.g[k],o.h--)))):o&&(o=Mt(o))&&(c=o.g[c.toString()],o=-1,c&&(o=ut(c,f,m,P)),(f=o>-1?c[o]:null)&&W(f))}function W(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[mt])xt(c.i,o);else{var f=o.type,m=o.proxy;c.removeEventListener?c.removeEventListener(f,m,o.capture):c.detachEvent?c.detachEvent(Pe(f),m):c.addListener&&c.removeListener&&c.removeListener(m),(f=Mt(c))?(xt(f,o),f.h==0&&(f.src=null,c[wt]=null)):B(o)}}}function Pe(o){return o in dr?dr[o]:dr[o]="on"+o}function Te(o,c){if(o.da)o=!0;else{c=new fe(c,this);const f=o.listener,m=o.ha||o.src;o.fa&&W(o),o=f.call(m,c)}return o}function Mt(o){return o=o[wt],o instanceof Ee?o:null}var zr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Gs(o){return typeof o=="function"?o:(o[zr]||(o[zr]=function(c){return o.handleEvent(c)}),o[zr])}function ze(){x.call(this),this.i=new Ee(this),this.M=this,this.G=null}y(ze,x),ze.prototype[mt]=!0,ze.prototype.removeEventListener=function(o,c,f,m){z(this,o,c,f,m)};function Le(o,c){var f,m=o.G;if(m)for(f=[];m;m=m.G)f.push(m);if(o=o.M,m=c.type||c,typeof c=="string")c=new N(c,o);else if(c instanceof N)c.target=c.target||o;else{var P=c;c=new N(m,o),we(c,P)}P=!0;let k,F;if(f)for(F=f.length-1;F>=0;F--)k=c.g=f[F],P=Nn(k,m,!0,c)&&P;if(k=c.g=o,P=Nn(k,m,!0,c)&&P,P=Nn(k,m,!1,c)&&P,f)for(F=0;F<f.length;F++)k=c.g=f[F],P=Nn(k,m,!1,c)&&P}ze.prototype.N=function(){if(ze.Z.N.call(this),this.i){var o=this.i;for(const c in o.g){const f=o.g[c];for(let m=0;m<f.length;m++)B(f[m]);delete o.g[c],o.h--}}this.G=null},ze.prototype.J=function(o,c,f,m){return this.i.add(String(o),c,!1,f,m)},ze.prototype.K=function(o,c,f,m){return this.i.add(String(o),c,!0,f,m)};function Nn(o,c,f,m){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();let P=!0;for(let k=0;k<c.length;++k){const F=c[k];if(F&&!F.da&&F.capture==f){const re=F.listener,Ke=F.ha||F.src;F.fa&&xt(o.i,F),P=re.call(Ke,m)!==!1&&P}}return P&&!m.defaultPrevented}function Mo(o,c){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=d(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:a.setTimeout(o,c||0)}function qs(o){o.g=Mo(()=>{o.g=null,o.i&&(o.i=!1,qs(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class Ws extends x{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:qs(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fr(o){x.call(this),this.h=o,this.g={}}y(fr,x);var Kd=[];function Fd(o){Q(o.g,function(c,f){this.g.hasOwnProperty(f)&&W(c)},o),o.g={}}fr.prototype.N=function(){fr.Z.N.call(this),Fd(this)},fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gl=a.JSON.stringify,mv=a.JSON.parse,gv=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function Hd(){}function Bd(){}var Qs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ql(){N.call(this,"d")}y(ql,N);function Wl(){N.call(this,"c")}y(Wl,N);var pr={},zd=null;function Lo(){return zd=zd||new ze}pr.Ia="serverreachability";function $d(o){N.call(this,pr.Ia,o)}y($d,N);function Js(o){const c=Lo();Le(c,new $d(c))}pr.STAT_EVENT="statevent";function Yd(o,c){N.call(this,pr.STAT_EVENT,o),this.stat=c}y(Yd,N);function ct(o){const c=Lo();Le(c,new Yd(c,o))}pr.Ja="timingevent";function Gd(o,c){N.call(this,pr.Ja,o),this.size=c}y(Gd,N);function Zs(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},c)}function Xs(){this.g=!0}Xs.prototype.ua=function(){this.g=!1};function yv(o,c,f,m,P,k){o.info(function(){if(o.g)if(k){var F="",re=k.split("&");for(let pe=0;pe<re.length;pe++){var Ke=re[pe].split("=");if(Ke.length>1){const $e=Ke[0];Ke=Ke[1];const Jt=$e.split("_");F=Jt.length>=2&&Jt[1]=="type"?F+($e+"="+Ke+"&"):F+($e+"=redacted&")}}}else F=null;else F=k;return"XMLHTTP REQ ("+m+") [attempt "+P+"]: "+c+`
`+f+`
`+F})}function Av(o,c,f,m,P,k,F){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+P+"]: "+c+`
`+f+`
`+k+" "+F})}function $r(o,c,f,m){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+_v(o,f)+(m?" "+m:"")})}function vv(o,c){o.info(function(){return"TIMEOUT: "+c})}Xs.prototype.info=function(){};function _v(o,c){if(!o.g)return c;if(!c)return null;try{const k=JSON.parse(c);if(k){for(o=0;o<k.length;o++)if(Array.isArray(k[o])){var f=k[o];if(!(f.length<2)){var m=f[1];if(Array.isArray(m)&&!(m.length<1)){var P=m[0];if(P!="noop"&&P!="stop"&&P!="close")for(let F=1;F<m.length;F++)m[F]=""}}}}return Gl(k)}catch{return c}}var Do={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},qd={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Wd;function Ql(){}y(Ql,Hd),Ql.prototype.g=function(){return new XMLHttpRequest},Wd=new Ql;function ei(o){return encodeURIComponent(String(o))}function Ev(o){var c=1;o=o.split(":");const f=[];for(;c>0&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function Rn(o,c,f,m){this.j=o,this.i=c,this.l=f,this.S=m||1,this.V=new fr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qd}function Qd(){this.i=null,this.g="",this.h=!1}var Jd={},Jl={};function Zl(o,c,f){o.M=1,o.A=Oo(Qt(c)),o.u=f,o.R=!0,Zd(o,null)}function Zd(o,c){o.F=Date.now(),Vo(o),o.B=Qt(o.A);var f=o.B,m=o.S;Array.isArray(m)||(m=[String(m)]),df(f.i,"t",m),o.C=0,f=o.j.L,o.h=new Qd,o.g=Cf(o.j,f?c:null,!o.u),o.P>0&&(o.O=new Ws(d(o.Y,o,o.g),o.P)),c=o.V,f=o.g,m=o.ba;var P="readystatechange";Array.isArray(P)||(P&&(Kd[0]=P.toString()),P=Kd);for(let k=0;k<P.length;k++){const F=bo(f,P[k],m||c.handleEvent,!1,c.h||c);if(!F)break;c.g[F.key]=F}c=o.J?H(o.J):{},o.u?(o.v||(o.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,c)):(o.v="GET",o.g.ea(o.B,o.v,null,c)),Js(),yv(o.i,o.v,o.B,o.l,o.S,o.u)}Rn.prototype.ba=function(o){o=o.target;const c=this.O;c&&Cn(o)==3?c.j():this.Y(o)},Rn.prototype.Y=function(o){try{if(o==this.g)e:{const re=Cn(this.g),Ke=this.g.ya(),pe=this.g.ca();if(!(re<3)&&(re!=3||this.g&&(this.h.h||this.g.la()||vf(this.g)))){this.K||re!=4||Ke==7||(Ke==8||pe<=0?Js(3):Js(2)),Xl(this);var c=this.g.ca();this.X=c;var f=Tv(this);if(this.o=c==200,Av(this.i,this.v,this.B,this.l,this.S,re,c),this.o){if(this.U&&!this.L){t:{if(this.g){var m,P=this.g;if((m=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(m)){var k=m;break t}}k=null}if(o=k)$r(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,eu(this,o);else{this.o=!1,this.m=3,ct(12),mr(this),ti(this);break e}}if(this.R){o=!0;let $e;for(;!this.K&&this.C<f.length;)if($e=xv(this,f),$e==Jl){re==4&&(this.m=4,ct(14),o=!1),$r(this.i,this.l,null,"[Incomplete Response]");break}else if($e==Jd){this.m=4,ct(15),$r(this.i,this.l,f,"[Invalid Chunk]"),o=!1;break}else $r(this.i,this.l,$e,null),eu(this,$e);if(Xd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),re!=4||f.length!=0||this.h.h||(this.m=1,ct(16),o=!1),this.o=this.o&&o,!o)$r(this.i,this.l,f,"[Invalid Chunked Response]"),mr(this),ti(this);else if(f.length>0&&!this.W){this.W=!0;var F=this.j;F.g==this&&F.aa&&!F.P&&(F.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),lu(F),F.P=!0,ct(11))}}else $r(this.i,this.l,f,null),eu(this,f);re==4&&mr(this),this.o&&!this.K&&(re==4?Nf(this.j,this):(this.o=!1,Vo(this)))}else Ov(this.g),c==400&&f.indexOf("Unknown SID")>0?(this.m=3,ct(12)):(this.m=0,ct(13)),mr(this),ti(this)}}}catch{}finally{}};function Tv(o){if(!Xd(o))return o.g.la();const c=vf(o.g);if(c==="")return"";let f="";const m=c.length,P=Cn(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return mr(o),ti(o),"";o.h.i=new a.TextDecoder}for(let k=0;k<m;k++)o.h.h=!0,f+=o.h.i.decode(c[k],{stream:!(P&&k==m-1)});return c.length=0,o.h.g+=f,o.C=0,o.h.g}function Xd(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function xv(o,c){var f=o.C,m=c.indexOf(`
`,f);return m==-1?Jl:(f=Number(c.substring(f,m)),isNaN(f)?Jd:(m+=1,m+f>c.length?Jl:(c=c.slice(m,m+f),o.C=m+f,c)))}Rn.prototype.cancel=function(){this.K=!0,mr(this)};function Vo(o){o.T=Date.now()+o.H,ef(o,o.H)}function ef(o,c){if(o.D!=null)throw Error("WatchDog timer not null");o.D=Zs(d(o.aa,o),c)}function Xl(o){o.D&&(a.clearTimeout(o.D),o.D=null)}Rn.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(vv(this.i,this.B),this.M!=2&&(Js(),ct(17)),mr(this),this.m=2,ti(this)):ef(this,this.T-o)};function ti(o){o.j.I==0||o.K||Nf(o.j,o)}function mr(o){Xl(o);var c=o.O;c&&typeof c.dispose=="function"&&c.dispose(),o.O=null,Fd(o.V),o.g&&(c=o.g,o.g=null,c.abort(),c.dispose())}function eu(o,c){try{var f=o.j;if(f.I!=0&&(f.g==o||tu(f.h,o))){if(!o.L&&tu(f.h,o)&&f.I==3){try{var m=f.Ba.g.parse(c)}catch{m=null}if(Array.isArray(m)&&m.length==3){var P=m;if(P[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<o.F)Ho(f),Ko(f);else break e;au(f),ct(18)}}else f.xa=P[1],0<f.xa-f.K&&P[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Zs(d(f.Va,f),6e3));rf(f.h)<=1&&f.ta&&(f.ta=void 0)}else yr(f,11)}else if((o.L||f.g==o)&&Ho(f),!T(c))for(P=f.Ba.g.parse(c),c=0;c<P.length;c++){let pe=P[c];const $e=pe[0];if(!($e<=f.K))if(f.K=$e,pe=pe[1],f.I==2)if(pe[0]=="c"){f.M=pe[1],f.ba=pe[2];const Jt=pe[3];Jt!=null&&(f.ka=Jt,f.j.info("VER="+f.ka));const Ar=pe[4];Ar!=null&&(f.za=Ar,f.j.info("SVER="+f.za));const kn=pe[5];kn!=null&&typeof kn=="number"&&kn>0&&(m=1.5*kn,f.O=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;const bn=o.g;if(bn){const zo=bn.g?bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zo){var k=m.h;k.g||zo.indexOf("spdy")==-1&&zo.indexOf("quic")==-1&&zo.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(nu(k,k.h),k.h=null))}if(m.G){const uu=bn.g?bn.g.getResponseHeader("X-HTTP-Session-Id"):null;uu&&(m.wa=uu,ye(m.J,m.G,uu))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-o.F,f.j.info("Handshake RTT: "+f.T+"ms")),m=f;var F=o;if(m.na=Pf(m,m.L?m.ba:null,m.W),F.L){sf(m.h,F);var re=F,Ke=m.O;Ke&&(re.H=Ke),re.D&&(Xl(re),Vo(re)),m.g=F}else wf(m);f.i.length>0&&Fo(f)}else pe[0]!="stop"&&pe[0]!="close"||yr(f,7);else f.I==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?yr(f,7):ou(f):pe[0]!="noop"&&f.l&&f.l.qa(pe),f.A=0)}}Js(4)}catch{}}var wv=class{constructor(o,c){this.g=o,this.map=c}};function tf(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function nf(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function rf(o){return o.h?1:o.g?o.g.size:0}function tu(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function nu(o,c){o.g?o.g.add(c):o.h=c}function sf(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}tf.prototype.cancel=function(){if(this.i=of(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function of(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.G);return c}return R(o.i)}var af=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Iv(o,c){if(o){o=o.split("&");for(let f=0;f<o.length;f++){const m=o[f].indexOf("=");let P,k=null;m>=0?(P=o[f].substring(0,m),k=o[f].substring(m+1)):P=o[f],c(P,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Sn(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;o instanceof Sn?(this.l=o.l,ni(this,o.j),this.o=o.o,this.g=o.g,ri(this,o.u),this.h=o.h,ru(this,ff(o.i)),this.m=o.m):o&&(c=String(o).match(af))?(this.l=!1,ni(this,c[1]||"",!0),this.o=si(c[2]||""),this.g=si(c[3]||"",!0),ri(this,c[4]),this.h=si(c[5]||"",!0),ru(this,c[6]||"",!0),this.m=si(c[7]||"")):(this.l=!1,this.i=new oi(null,this.l))}Sn.prototype.toString=function(){const o=[];var c=this.j;c&&o.push(ii(c,lf,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(ii(c,lf,!0),"@"),o.push(ei(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&o.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(ii(f,f.charAt(0)=="/"?Sv:Rv,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",ii(f,Cv)),o.join("")},Sn.prototype.resolve=function(o){const c=Qt(this);let f=!!o.j;f?ni(c,o.j):f=!!o.o,f?c.o=o.o:f=!!o.g,f?c.g=o.g:f=o.u!=null;var m=o.h;if(f)ri(c,o.u);else if(f=!!o.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var P=c.h.lastIndexOf("/");P!=-1&&(m=c.h.slice(0,P+1)+m)}if(P=m,P==".."||P==".")m="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){m=P.lastIndexOf("/",0)==0,P=P.split("/");const k=[];for(let F=0;F<P.length;){const re=P[F++];re=="."?m&&F==P.length&&k.push(""):re==".."?((k.length>1||k.length==1&&k[0]!="")&&k.pop(),m&&F==P.length&&k.push("")):(k.push(re),m=!0)}m=k.join("/")}else m=P}return f?c.h=m:f=o.i.toString()!=="",f?ru(c,ff(o.i)):f=!!o.m,f&&(c.m=o.m),c};function Qt(o){return new Sn(o)}function ni(o,c,f){o.j=f?si(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function ri(o,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);o.u=c}else o.u=null}function ru(o,c,f){c instanceof oi?(o.i=c,kv(o.i,o.l)):(f||(c=ii(c,Pv)),o.i=new oi(c,o.l))}function ye(o,c,f){o.i.set(c,f)}function Oo(o){return ye(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function si(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function ii(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,Nv),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Nv(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var lf=/[#\/\?@]/g,Rv=/[#\?:]/g,Sv=/[#\?]/g,Pv=/[#\?@]/g,Cv=/#/g;function oi(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function gr(o){o.g||(o.g=new Map,o.h=0,o.i&&Iv(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=oi.prototype,t.add=function(o,c){gr(this),this.i=null,o=Yr(this,o);let f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function uf(o,c){gr(o),c=Yr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function cf(o,c){return gr(o),c=Yr(o,c),o.g.has(c)}t.forEach=function(o,c){gr(this),this.g.forEach(function(f,m){f.forEach(function(P){o.call(c,P,m,this)},this)},this)};function hf(o,c){gr(o);let f=[];if(typeof c=="string")cf(o,c)&&(f=f.concat(o.g.get(Yr(o,c))));else for(o=Array.from(o.g.values()),c=0;c<o.length;c++)f=f.concat(o[c]);return f}t.set=function(o,c){return gr(this),this.i=null,o=Yr(this,o),cf(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=hf(this,o),o.length>0?String(o[0]):c):c};function df(o,c,f){uf(o,c),f.length>0&&(o.i=null,o.g.set(Yr(o,c),R(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(let m=0;m<c.length;m++){var f=c[m];const P=ei(f);f=hf(this,f);for(let k=0;k<f.length;k++){let F=P;f[k]!==""&&(F+="="+ei(f[k])),o.push(F)}}return this.i=o.join("&")};function ff(o){const c=new oi;return c.i=o.i,o.g&&(c.g=new Map(o.g),c.h=o.h),c}function Yr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function kv(o,c){c&&!o.j&&(gr(o),o.i=null,o.g.forEach(function(f,m){const P=m.toLowerCase();m!=P&&(uf(this,m),df(this,P,f))},o)),o.j=c}function bv(o,c){const f=new Xs;if(a.Image){const m=new Image;m.onload=p(Pn,f,"TestLoadImage: loaded",!0,c,m),m.onerror=p(Pn,f,"TestLoadImage: error",!1,c,m),m.onabort=p(Pn,f,"TestLoadImage: abort",!1,c,m),m.ontimeout=p(Pn,f,"TestLoadImage: timeout",!1,c,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else c(!1)}function Mv(o,c){const f=new Xs,m=new AbortController,P=setTimeout(()=>{m.abort(),Pn(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:m.signal}).then(k=>{clearTimeout(P),k.ok?Pn(f,"TestPingServer: ok",!0,c):Pn(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(P),Pn(f,"TestPingServer: error",!1,c)})}function Pn(o,c,f,m,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),m(f)}catch{}}function Lv(){this.g=new gv}function su(o){this.i=o.Sb||null,this.h=o.ab||!1}y(su,Hd),su.prototype.g=function(){return new Uo(this.i,this.h)};function Uo(o,c){ze.call(this),this.H=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Uo,ze),t=Uo.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=c,this.readyState=1,li(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(c.body=o),(this.H||a).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ai(this)),this.readyState=0},t.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,li(this)),this.g&&(this.readyState=3,li(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;pf(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function pf(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}t.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?ai(this):li(this),this.readyState==3&&pf(this)}},t.Oa=function(o){this.g&&(this.response=this.responseText=o,ai(this))},t.Na=function(o){this.g&&(this.response=o,ai(this))},t.ga=function(){this.g&&ai(this)};function ai(o){o.readyState=4,o.l=null,o.j=null,o.B=null,li(o)}t.setRequestHeader=function(o,c){this.A.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function li(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Uo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function mf(o){let c="";return Q(o,function(f,m){c+=m,c+=":",c+=f,c+=`\r
`}),c}function iu(o,c,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=mf(f),typeof o=="string"?f!=null&&ei(f):ye(o,c,f))}function Ce(o){ze.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(Ce,ze);var Dv=/^https?$/i,Vv=["POST","PUT"];t=Ce.prototype,t.Fa=function(o){this.H=o},t.ea=function(o,c,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Wd.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(k){gf(this,k);return}if(o=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var P in m)f.set(P,m[P]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const k of m.keys())f.set(k,m.get(k));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(k=>k.toLowerCase()=="content-type"),P=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(Vv,c,void 0)>=0)||m||P||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,F]of f)this.g.setRequestHeader(k,F);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(k){gf(this,k)}};function gf(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.o=5,yf(o),jo(o)}function yf(o){o.A||(o.A=!0,Le(o,"complete"),Le(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,Le(this,"complete"),Le(this,"abort"),jo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jo(this,!0)),Ce.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Af(this):this.Xa())},t.Xa=function(){Af(this)};function Af(o){if(o.h&&typeof i<"u"){if(o.v&&Cn(o)==4)setTimeout(o.Ca.bind(o),0);else if(Le(o,"readystatechange"),Cn(o)==4){o.h=!1;try{const k=o.ca();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var m;if(m=k===0){let F=String(o.D).match(af)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),m=!Dv.test(F?F.toLowerCase():"")}f=m}if(f)Le(o,"complete"),Le(o,"success");else{o.o=6;try{var P=Cn(o)>2?o.g.statusText:""}catch{P=""}o.l=P+" ["+o.ca()+"]",yf(o)}}finally{jo(o)}}}}function jo(o,c){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const f=o.g;o.g=null,c||Le(o,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Cn(o){return o.g?o.g.readyState:0}t.ca=function(){try{return Cn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),mv(c)}};function vf(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Ov(o){const c={};o=(o.g&&Cn(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(T(o[m]))continue;var f=Ev(o[m]);const P=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const k=c[P]||[];c[P]=k,k.push(f)}ee(c,function(m){return m.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ui(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function _f(o){this.za=0,this.i=[],this.j=new Xs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ui("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ui("baseRetryDelayMs",5e3,o),this.Za=ui("retryDelaySeedMs",1e4,o),this.Ta=ui("forwardChannelMaxRetries",2,o),this.va=ui("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new tf(o&&o.concurrentRequestLimit),this.Ba=new Lv,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=_f.prototype,t.ka=8,t.I=1,t.connect=function(o,c,f,m){ct(0),this.W=o,this.H=c||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.J=Pf(this,null,this.W),Fo(this)};function ou(o){if(Ef(o),o.I==3){var c=o.V++,f=Qt(o.J);if(ye(f,"SID",o.M),ye(f,"RID",c),ye(f,"TYPE","terminate"),ci(o,f),c=new Rn(o,o.j,c),c.M=2,c.A=Oo(Qt(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(c.A.toString(),"")}catch{}!f&&a.Image&&(new Image().src=c.A,f=!0),f||(c.g=Cf(c.j,null),c.g.ea(c.A)),c.F=Date.now(),Vo(c)}Sf(o)}function Ko(o){o.g&&(lu(o),o.g.cancel(),o.g=null)}function Ef(o){Ko(o),o.v&&(a.clearTimeout(o.v),o.v=null),Ho(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function Fo(o){if(!nf(o.h)&&!o.m){o.m=!0;var c=o.Ea;j||A(),K||(j(),K=!0),_.add(c,o),o.D=0}}function Uv(o,c){return rf(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=c.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=Zs(d(o.Ea,o,c),Rf(o,o.D)),o.D++,!0)}t.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const P=new Rn(this,this.j,o);let k=this.o;if(this.U&&(k?(k=H(k),we(k,this.U)):k=this.U),this.u!==null||this.R||(P.J=k,k=null),this.S)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(c+=m,c>4096){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=xf(this,P,c),f=Qt(this.J),ye(f,"RID",o),ye(f,"CVER",22),this.G&&ye(f,"X-HTTP-Session-Id",this.G),ci(this,f),k&&(this.R?c="headers="+ei(mf(k))+"&"+c:this.u&&iu(f,this.u,k)),nu(this.h,P),this.Ra&&ye(f,"TYPE","init"),this.S?(ye(f,"$req",c),ye(f,"SID","null"),P.U=!0,Zl(P,f,null)):Zl(P,f,c),this.I=2}}else this.I==3&&(o?Tf(this,o):this.i.length==0||nf(this.h)||Tf(this))};function Tf(o,c){var f;c?f=c.l:f=o.V++;const m=Qt(o.J);ye(m,"SID",o.M),ye(m,"RID",f),ye(m,"AID",o.K),ci(o,m),o.u&&o.o&&iu(m,o.u,o.o),f=new Rn(o,o.j,f,o.D+1),o.u===null&&(f.J=o.o),c&&(o.i=c.G.concat(o.i)),c=xf(o,f,1e3),f.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),nu(o.h,f),Zl(f,m,c)}function ci(o,c){o.H&&Q(o.H,function(f,m){ye(c,m,f)}),o.l&&Q({},function(f,m){ye(c,m,f)})}function xf(o,c,f){f=Math.min(o.i.length,f);const m=o.l?d(o.l.Ka,o.l,o):null;e:{var P=o.i;let re=-1;for(;;){const Ke=["count="+f];re==-1?f>0?(re=P[0].g,Ke.push("ofs="+re)):re=0:Ke.push("ofs="+re);let pe=!0;for(let $e=0;$e<f;$e++){var k=P[$e].g;const Jt=P[$e].map;if(k-=re,k<0)re=Math.max(0,P[$e].g-100),pe=!1;else try{k="req"+k+"_"||"";try{var F=Jt instanceof Map?Jt:Object.entries(Jt);for(const[Ar,kn]of F){let bn=kn;l(kn)&&(bn=Gl(kn)),Ke.push(k+Ar+"="+encodeURIComponent(bn))}}catch(Ar){throw Ke.push(k+"type="+encodeURIComponent("_badmap")),Ar}}catch{m&&m(Jt)}}if(pe){F=Ke.join("&");break e}}F=void 0}return o=o.i.splice(0,f),c.G=o,F}function wf(o){if(!o.g&&!o.v){o.Y=1;var c=o.Da;j||A(),K||(j(),K=!0),_.add(c,o),o.A=0}}function au(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=Zs(d(o.Da,o),Rf(o,o.A)),o.A++,!0)}t.Da=function(){if(this.v=null,If(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=Zs(d(this.Wa,this),o)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ct(10),Ko(this),If(this))};function lu(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function If(o){o.g=new Rn(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var c=Qt(o.na);ye(c,"RID","rpc"),ye(c,"SID",o.M),ye(c,"AID",o.K),ye(c,"CI",o.F?"0":"1"),!o.F&&o.ia&&ye(c,"TO",o.ia),ye(c,"TYPE","xmlhttp"),ci(o,c),o.u&&o.o&&iu(c,o.u,o.o),o.O&&(o.g.H=o.O);var f=o.g;o=o.ba,f.M=1,f.A=Oo(Qt(c)),f.u=null,f.R=!0,Zd(f,o)}t.Va=function(){this.C!=null&&(this.C=null,Ko(this),au(this),ct(19))};function Ho(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function Nf(o,c){var f=null;if(o.g==c){Ho(o),lu(o),o.g=null;var m=2}else if(tu(o.h,c))f=c.G,sf(o.h,c),m=1;else return;if(o.I!=0){if(c.o)if(m==1){f=c.u?c.u.length:0,c=Date.now()-c.F;var P=o.D;m=Lo(),Le(m,new Gd(m,f)),Fo(o)}else wf(o);else if(P=c.m,P==3||P==0&&c.X>0||!(m==1&&Uv(o,c)||m==2&&au(o)))switch(f&&f.length>0&&(c=o.h,c.i=c.i.concat(f)),P){case 1:yr(o,5);break;case 4:yr(o,10);break;case 3:yr(o,6);break;default:yr(o,2)}}}function Rf(o,c){let f=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(f*=2),f*c}function yr(o,c){if(o.j.info("Error code "+c),c==2){var f=d(o.bb,o),m=o.Ua;const P=!m;m=new Sn(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ni(m,"https"),Oo(m),P?bv(m.toString(),f):Mv(m.toString(),f)}else ct(2);o.I=0,o.l&&o.l.pa(c),Sf(o),Ef(o)}t.bb=function(o){o?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function Sf(o){if(o.I=0,o.ja=[],o.l){const c=of(o.h);(c.length!=0||o.i.length!=0)&&(C(o.ja,c),C(o.ja,o.i),o.h.i.length=0,R(o.i),o.i.length=0),o.l.oa()}}function Pf(o,c,f){var m=f instanceof Sn?Qt(f):new Sn(f);if(m.g!="")c&&(m.g=c+"."+m.g),ri(m,m.u);else{var P=a.location;m=P.protocol,c=c?c+"."+P.hostname:P.hostname,P=+P.port;const k=new Sn(null);m&&ni(k,m),c&&(k.g=c),P&&ri(k,P),f&&(k.h=f),m=k}return f=o.G,c=o.wa,f&&c&&ye(m,f,c),ye(m,"VER",o.ka),ci(o,m),m}function Cf(o,c,f){if(c&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Aa&&!o.ma?new Ce(new su({ab:f})):new Ce(o.ma),c.Fa(o.L),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function kf(){}t=kf.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Bo(){}Bo.prototype.g=function(o,c){return new It(o,c)};function It(o,c){ze.call(this),this.g=new _f(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(o?o["X-WebChannel-Client-Profile"]=c.sa:o={"X-WebChannel-Client-Profile":c.sa}),this.g.U=o,(o=c&&c.Qb)&&!T(o)&&(this.g.u=o),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!T(c)&&(this.g.G=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Gr(this)}y(It,ze),It.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},It.prototype.close=function(){ou(this.g)},It.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.v&&(f={},f.__data__=Gl(o),o=f);c.i.push(new wv(c.Ya++,o)),c.I==3&&Fo(c)},It.prototype.N=function(){this.g.l=null,delete this.j,ou(this.g),delete this.g,It.Z.N.call(this)};function bf(o){ql.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const f in c){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}y(bf,ql);function Mf(){Wl.call(this),this.status=1}y(Mf,Wl);function Gr(o){this.g=o}y(Gr,kf),Gr.prototype.ra=function(){Le(this.g,"a")},Gr.prototype.qa=function(o){Le(this.g,new bf(o))},Gr.prototype.pa=function(o){Le(this.g,new Mf)},Gr.prototype.oa=function(){Le(this.g,"b")},Bo.prototype.createWebChannel=Bo.prototype.g,It.prototype.send=It.prototype.o,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,K0=function(){return new Bo},j0=function(){return Lo()},U0=pr,Yc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Do.NO_ERROR=0,Do.TIMEOUT=8,Do.HTTP_ERROR=6,Ia=Do,qd.COMPLETE="complete",O0=qd,Bd.EventType=Qs,Qs.OPEN="a",Qs.CLOSE="b",Qs.ERROR="c",Qs.MESSAGE="d",ze.prototype.listen=ze.prototype.J,Ii=Bd,Ce.prototype.listenOnce=Ce.prototype.K,Ce.prototype.getLastError=Ce.prototype.Ha,Ce.prototype.getLastErrorCode=Ce.prototype.ya,Ce.prototype.getStatus=Ce.prototype.ca,Ce.prototype.getResponseJson=Ce.prototype.La,Ce.prototype.getResponseText=Ce.prototype.la,Ce.prototype.send=Ce.prototype.ea,Ce.prototype.setWithCredentials=Ce.prototype.Fa,V0=Ce}).apply(typeof la<"u"?la:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}it.UNAUTHENTICATED=new it(null),it.GOOGLE_CREDENTIALS=new it("google-credentials-uid"),it.FIRST_PARTY=new it("first-party-uid"),it.MOCK_USER=new it("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fs="12.8.0";function ow(t){Fs=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new P0("@firebase/firestore");function Wr(){return Vr.logLevel}function Y(t,...e){if(Vr.logLevel<=le.DEBUG){const n=e.map(od);Vr.debug(`Firestore (${Fs}): ${t}`,...n)}}function xn(t,...e){if(Vr.logLevel<=le.ERROR){const n=e.map(od);Vr.error(`Firestore (${Fs}): ${t}`,...n)}}function Ps(t,...e){if(Vr.logLevel<=le.WARN){const n=e.map(od);Vr.warn(`Firestore (${Fs}): ${t}`,...n)}}function od(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,F0(t,r,n)}function F0(t,e,n){let r=`FIRESTORE (${Fs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw xn(r),new Error(r)}function he(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||F0(e,s,r)}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends Ks{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(it.UNAUTHENTICATED))}shutdown(){}}class lw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uw{constructor(e){this.t=e,this.currentUser=it.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){he(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Sr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Sr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Sr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(he(typeof r.accessToken=="string",31837,{l:r}),new H0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return he(e===null||typeof e=="string",2055,{h:e}),new it(e)}}class cw{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=it.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class hw{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new cw(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(it.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class im{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dw{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bx(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){he(this.o===void 0,3512);const r=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new im(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(he(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new im(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=fw(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ie(t,e){return t<e?-1:t>e?1:0}function Gc(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Ku(s)===Ku(i)?ie(s,i):Ku(s)?1:-1}return ie(t.length,e.length)}const pw=55296,mw=57343;function Ku(t){const e=t.charCodeAt(0);return e>=pw&&e<=mw}function Cs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="__name__";class en{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&J(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return en.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof en?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=en.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ie(e.length,n.length)}static compareSegments(e,n){const r=en.isNumericId(e),s=en.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?en.extractNumericId(e).compare(en.extractNumericId(n)):Gc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jn.fromString(e.substring(4,e.length-2))}}class me extends en{construct(e,n,r){return new me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new me(n)}static emptyPath(){return new me([])}}const gw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ze extends en{construct(e,n,r){return new Ze(e,n,r)}static isValidIdentifier(e){return gw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===om}static keyField(){return new Ze([om])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new $(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new $(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new $(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ze(n)}static emptyPath(){return new Ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(me.fromString(e))}static fromName(e){return new q(me.fromString(e).popFirst(5))}static empty(){return new q(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new me(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(t,e,n){if(!n)throw new $(D.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yw(t,e,n,r){if(e===!0&&r===!0)throw new $(D.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function am(t){if(!q.isDocumentKey(t))throw new $(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lm(t){if(q.isDocumentKey(t))throw new $(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function z0(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function bl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J(12329,{type:typeof t})}function Pr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bl(t);throw new $(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t,e){const n={typeString:t};return e&&(n.value=e),n}function No(t,e){if(!z0(t))throw new $(D.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new $(D.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um=-62135596800,cm=1e6;class ve{static now(){return ve.fromMillis(Date.now())}static fromDate(e){return ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*cm);return new ve(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<um)throw new $(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cm}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(No(e,ve._jsonSchema))return new ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-um;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ve._jsonSchemaVersion="firestore/timestamp/1.0",ve._jsonSchema={type:Ue("string",ve._jsonSchemaVersion),seconds:Ue("number"),nanoseconds:Ue("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{static fromTimestamp(e){return new X(e)}static min(){return new X(new ve(0,0))}static max(){return new X(new ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=-1;function Aw(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=X.fromTimestamp(r===1e9?new ve(n+1,0):new ve(n,r));return new tr(s,q.empty(),e)}function vw(t){return new tr(t.readTime,t.key,fo)}class tr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new tr(X.min(),q.empty(),fo)}static max(){return new tr(X.max(),q.empty(),fo)}}function _w(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Tw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hs(t){if(t.code!==D.FAILED_PRECONDITION||t.message!==Ew)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(s=>s?V.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new V((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(p=>{a[d]=p,++l,l===i&&r(a)},p=>s(p))}})}static doWhile(e,n){return new V((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function xw(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Bs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ml.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld=-1;function Ll(t){return t==null}function il(t){return t===0&&1/t==-1/0}function ww(t){return typeof t=="number"&&Number.isInteger(t)&&!il(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="";function Iw(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=hm(e)),e=Nw(t.get(n),e);return hm(e)}function Nw(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case $0:n+="";break;default:n+=i}}return n}function hm(t){return t+$0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function cr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Y0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e,n){this.comparator=e,this.root=n||Je.EMPTY}insert(e,n){return new Se(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new Se(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ua(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ua(this.root,e,this.comparator,!1)}getReverseIterator(){return new ua(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ua(this.root,e,this.comparator,!0)}}class ua{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Je.RED,this.left=s??Je.EMPTY,this.right=i??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Je(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Je.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw J(27949);return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Je(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.comparator=e,this.data=new Se(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fm(this.data.getIterator())}getIteratorFrom(e){return new fm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Be)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Be(this.comparator);return n.data=e,n}}class fm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.fields=e,e.sort(Ze.comparator)}static empty(){return new St([])}unionWith(e){let n=new Be(Ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new St(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Cs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new G0("Invalid base64 string: "+i):i}}(e);return new tt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tt.EMPTY_BYTE_STRING=new tt("");const Rw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nr(t){if(he(!!t,39018),typeof t=="string"){let e=0;const n=Rw.exec(t);if(he(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(t.seconds),nanos:be(t.nanos)}}function be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function rr(t){return typeof t=="string"?tt.fromBase64String(t):tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="server_timestamp",W0="__type__",Q0="__previous_value__",J0="__local_write_time__";function ud(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[W0])==null?void 0:r.stringValue)===q0}function Dl(t){const e=t.mapValue.fields[Q0];return ud(e)?Dl(e):e}function po(t){const e=nr(t.mapValue.fields[J0].timestampValue);return new ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,n,r,s,i,a,l,u,d,p,y){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=p,this.apiKey=y}}const ol="(default)";class mo{constructor(e,n){this.projectId=e,this.database=n||ol}static empty(){return new mo("","")}get isDefaultDatabase(){return this.database===ol}isEqual(e){return e instanceof mo&&e.projectId===this.projectId&&e.database===this.database}}function Pw(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new $(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mo(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="__type__",Cw="__max__",ca={mapValue:{}},X0="__vector__",al="value";function sr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ud(t)?4:bw(t)?9007199254740991:kw(t)?10:11:J(28295,{value:t})}function cn(t,e){if(t===e)return!0;const n=sr(t);if(n!==sr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return po(t).isEqual(po(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=nr(s.timestampValue),l=nr(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return rr(s.bytesValue).isEqual(rr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return be(s.geoPointValue.latitude)===be(i.geoPointValue.latitude)&&be(s.geoPointValue.longitude)===be(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return be(s.integerValue)===be(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=be(s.doubleValue),l=be(i.doubleValue);return a===l?il(a)===il(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Cs(t.arrayValue.values||[],e.arrayValue.values||[],cn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(dm(a)!==dm(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!cn(a[u],l[u])))return!1;return!0}(t,e);default:return J(52216,{left:t})}}function go(t,e){return(t.values||[]).find(n=>cn(n,e))!==void 0}function ks(t,e){if(t===e)return 0;const n=sr(t),r=sr(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=be(i.integerValue||i.doubleValue),u=be(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return pm(t.timestampValue,e.timestampValue);case 4:return pm(po(t),po(e));case 5:return Gc(t.stringValue,e.stringValue);case 6:return function(i,a){const l=rr(i),u=rr(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),u=a.split("/");for(let d=0;d<l.length&&d<u.length;d++){const p=ie(l[d],u[d]);if(p!==0)return p}return ie(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=ie(be(i.latitude),be(a.latitude));return l!==0?l:ie(be(i.longitude),be(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return mm(t.arrayValue,e.arrayValue);case 10:return function(i,a){var g,R,C,b;const l=i.fields||{},u=a.fields||{},d=(g=l[al])==null?void 0:g.arrayValue,p=(R=u[al])==null?void 0:R.arrayValue,y=ie(((C=d==null?void 0:d.values)==null?void 0:C.length)||0,((b=p==null?void 0:p.values)==null?void 0:b.length)||0);return y!==0?y:mm(d,p)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===ca.mapValue&&a===ca.mapValue)return 0;if(i===ca.mapValue)return 1;if(a===ca.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=a.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let y=0;y<u.length&&y<p.length;++y){const g=Gc(u[y],p[y]);if(g!==0)return g;const R=ks(l[u[y]],d[p[y]]);if(R!==0)return R}return ie(u.length,p.length)}(t.mapValue,e.mapValue);default:throw J(23264,{he:n})}}function pm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);const n=nr(t),r=nr(e),s=ie(n.seconds,r.seconds);return s!==0?s:ie(n.nanos,r.nanos)}function mm(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ks(n[s],r[s]);if(i)return i}return ie(n.length,r.length)}function bs(t){return qc(t)}function qc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=nr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return rr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=qc(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${qc(n.fields[a])}`;return s+"}"}(t.mapValue):J(61005,{value:t})}function Na(t){switch(sr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Dl(t);return e?16+Na(e):16;case 5:return 2*t.stringValue.length;case 6:return rr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Na(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return cr(r.fields,(i,a)=>{s+=i.length+Na(a)}),s}(t.mapValue);default:throw J(13486,{value:t})}}function gm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wc(t){return!!t&&"integerValue"in t}function cd(t){return!!t&&"arrayValue"in t}function ym(t){return!!t&&"nullValue"in t}function Am(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ra(t){return!!t&&"mapValue"in t}function kw(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Z0])==null?void 0:r.stringValue)===X0}function Fi(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return cr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Fi(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fi(t.arrayValue.values[n]);return e}return{...t}}function bw(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Cw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.value=e}static empty(){return new At({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ra(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fi(n)}setAll(e){let n=Ze.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Fi(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ra(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ra(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){cr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new At(Fi(this.value))}}function eA(t){const e=[];return cr(t.fields,(n,r)=>{const s=new Ze([n]);if(Ra(r)){const i=eA(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new St(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new at(e,0,X.min(),X.min(),X.min(),At.empty(),0)}static newFoundDocument(e,n,r,s){return new at(e,1,n,X.min(),r,s,0)}static newNoDocument(e,n){return new at(e,2,n,X.min(),X.min(),At.empty(),0)}static newUnknownDocument(e,n){return new at(e,3,n,X.min(),X.min(),At.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,n){this.position=e,this.inclusive=n}}function vm(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=q.comparator(q.fromName(a.referenceValue),n.key):r=ks(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function _m(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!cn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n="asc"){this.field=e,this.dir=n}}function Mw(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{}class Oe extends tA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Dw(e,n,r):n==="array-contains"?new Uw(e,r):n==="in"?new jw(e,r):n==="not-in"?new Kw(e,r):n==="array-contains-any"?new Fw(e,r):new Oe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Vw(e,r):new Ow(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ks(n,this.value)):n!==null&&sr(this.value)===sr(n)&&this.matchesComparison(ks(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wt extends tA{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Wt(e,n)}matches(e){return nA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nA(t){return t.op==="and"}function rA(t){return Lw(t)&&nA(t)}function Lw(t){for(const e of t.filters)if(e instanceof Wt)return!1;return!0}function Qc(t){if(t instanceof Oe)return t.field.canonicalString()+t.op.toString()+bs(t.value);if(rA(t))return t.filters.map(e=>Qc(e)).join(",");{const e=t.filters.map(n=>Qc(n)).join(",");return`${t.op}(${e})`}}function sA(t,e){return t instanceof Oe?function(r,s){return s instanceof Oe&&r.op===s.op&&r.field.isEqual(s.field)&&cn(r.value,s.value)}(t,e):t instanceof Wt?function(r,s){return s instanceof Wt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&sA(a,s.filters[l]),!0):!1}(t,e):void J(19439)}function iA(t){return t instanceof Oe?function(n){return`${n.field.canonicalString()} ${n.op} ${bs(n.value)}`}(t):t instanceof Wt?function(n){return n.op.toString()+" {"+n.getFilters().map(iA).join(" ,")+"}"}(t):"Filter"}class Dw extends Oe{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class Vw extends Oe{constructor(e,n){super(e,"in",n),this.keys=oA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Ow extends Oe{constructor(e,n){super(e,"not-in",n),this.keys=oA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function oA(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class Uw extends Oe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cd(n)&&go(n.arrayValue,this.value)}}class jw extends Oe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&go(this.value.arrayValue,n)}}class Kw extends Oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(go(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!go(this.value.arrayValue,n)}}class Fw extends Oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>go(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function Em(t,e=null,n=[],r=[],s=null,i=null,a=null){return new Hw(t,e,n,r,s,i,a)}function hd(t){const e=te(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Qc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ll(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bs(r)).join(",")),e.Te=n}return e.Te}function dd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Mw(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_m(t.startAt,e.startAt)&&_m(t.endAt,e.endAt)}function Jc(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Bw(t,e,n,r,s,i,a,l){return new zs(t,e,n,r,s,i,a,l)}function fd(t){return new zs(t)}function Tm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zw(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function aA(t){return t.collectionGroup!==null}function Hi(t){const e=te(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Be(Ze.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new yo(i,r))}),n.has(Ze.keyField().canonicalString())||e.Ie.push(new yo(Ze.keyField(),r))}return e.Ie}function sn(t){const e=te(t);return e.Ee||(e.Ee=$w(e,Hi(t))),e.Ee}function $w(t,e){if(t.limitType==="F")return Em(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new yo(s.field,i)});const n=t.endAt?new ll(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ll(t.startAt.position,t.startAt.inclusive):null;return Em(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Zc(t,e){const n=t.filters.concat([e]);return new zs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yw(t,e){const n=t.explicitOrderBy.concat([e]);return new zs(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function Xc(t,e,n){return new zs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vl(t,e){return dd(sn(t),sn(e))&&t.limitType===e.limitType}function lA(t){return`${hd(sn(t))}|lt:${t.limitType}`}function Qr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>iA(s)).join(", ")}]`),Ll(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>bs(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>bs(s)).join(",")),`Target(${r})`}(sn(t))}; limitType=${t.limitType})`}function Ol(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):q.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Hi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,u){const d=vm(a,l,u);return a.inclusive?d<=0:d<0}(r.startAt,Hi(r),s)||r.endAt&&!function(a,l,u){const d=vm(a,l,u);return a.inclusive?d>=0:d>0}(r.endAt,Hi(r),s))}(t,e)}function Gw(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uA(t){return(e,n)=>{let r=!1;for(const s of Hi(t)){const i=qw(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function qw(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(i,a,l){const u=a.data.field(i),d=l.data.field(i);return u!==null&&d!==null?ks(u,d):J(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){cr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Y0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww=new Se(q.comparator);function wn(){return Ww}const cA=new Se(q.comparator);function Ni(...t){let e=cA;for(const n of t)e=e.insert(n.key,n);return e}function hA(t){let e=cA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ir(){return Bi()}function dA(){return Bi()}function Bi(){return new Kr(t=>t.toString(),(t,e)=>t.isEqual(e))}const Qw=new Se(q.comparator),Jw=new Be(q.comparator);function oe(...t){let e=Jw;for(const n of t)e=e.add(n);return e}const Zw=new Be(ie);function Xw(){return Zw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:il(e)?"-0":e}}function fA(t){return{integerValue:""+t}}function pA(t,e){return ww(e)?fA(e):pd(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(){this._=void 0}}function eI(t,e,n){return t instanceof ul?function(s,i){const a={fields:{[W0]:{stringValue:q0},[J0]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&ud(i)&&(i=Dl(i)),i&&(a.fields[Q0]=i),{mapValue:a}}(n,e):t instanceof Ms?gA(t,e):t instanceof Ao?yA(t,e):function(s,i){const a=mA(s,i),l=xm(a)+xm(s.Ae);return Wc(a)&&Wc(s.Ae)?fA(l):pd(s.serializer,l)}(t,e)}function tI(t,e,n){return t instanceof Ms?gA(t,e):t instanceof Ao?yA(t,e):n}function mA(t,e){return t instanceof vo?function(r){return Wc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ul extends Ul{}class Ms extends Ul{constructor(e){super(),this.elements=e}}function gA(t,e){const n=AA(e);for(const r of t.elements)n.some(s=>cn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ao extends Ul{constructor(e){super(),this.elements=e}}function yA(t,e){let n=AA(e);for(const r of t.elements)n=n.filter(s=>!cn(s,r));return{arrayValue:{values:n}}}class vo extends Ul{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function xm(t){return be(t.integerValue||t.doubleValue)}function AA(t){return cd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,n){this.field=e,this.transform=n}}function nI(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ms&&s instanceof Ms||r instanceof Ao&&s instanceof Ao?Cs(r.elements,s.elements,cn):r instanceof vo&&s instanceof vo?cn(r.Ae,s.Ae):r instanceof ul&&s instanceof ul}(t.transform,e.transform)}class rI{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class jl{}function _A(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new TA(t.key,on.none()):new Ro(t.key,t.data,on.none());{const n=t.data,r=At.empty();let s=new Be(Ze.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new hr(t.key,r,new St(s.toArray()),on.none())}}function sI(t,e,n){t instanceof Ro?function(s,i,a){const l=s.value.clone(),u=Im(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof hr?function(s,i,a){if(!Sa(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Im(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(EA(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function zi(t,e,n,r){return t instanceof Ro?function(i,a,l,u){if(!Sa(i.precondition,a))return l;const d=i.value.clone(),p=Nm(i.fieldTransforms,u,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof hr?function(i,a,l,u){if(!Sa(i.precondition,a))return l;const d=Nm(i.fieldTransforms,u,a),p=a.data;return p.setAll(EA(i)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(i,a,l){return Sa(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function iI(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=mA(r.transform,s||null);i!=null&&(n===null&&(n=At.empty()),n.set(r.field,i))}return n||null}function wm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Cs(r,s,(i,a)=>nI(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ro extends jl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class hr extends jl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function EA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Im(t,e,n){const r=new Map;he(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,tI(a,l,n[s]))}return r}function Nm(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,eI(i,a,e))}return r}class TA extends jl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oI extends jl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&sI(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=zi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=zi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=dA();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=_A(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&Cs(this.mutations,e.mutations,(n,r)=>wm(n,r))&&Cs(this.baseMutations,e.baseMutations,(n,r)=>wm(n,r))}}class md{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){he(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return Qw}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new md(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De,ae;function cI(t){switch(t){case D.OK:return J(64938);case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0;default:return J(15467,{code:t})}}function xA(t){if(t===void 0)return xn("GRPC error has no .code"),D.UNKNOWN;switch(t){case De.OK:return D.OK;case De.CANCELLED:return D.CANCELLED;case De.UNKNOWN:return D.UNKNOWN;case De.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case De.INTERNAL:return D.INTERNAL;case De.UNAVAILABLE:return D.UNAVAILABLE;case De.UNAUTHENTICATED:return D.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case De.NOT_FOUND:return D.NOT_FOUND;case De.ALREADY_EXISTS:return D.ALREADY_EXISTS;case De.PERMISSION_DENIED:return D.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case De.ABORTED:return D.ABORTED;case De.OUT_OF_RANGE:return D.OUT_OF_RANGE;case De.UNIMPLEMENTED:return D.UNIMPLEMENTED;case De.DATA_LOSS:return D.DATA_LOSS;default:return J(39323,{code:t})}}(ae=De||(De={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=new Jn([4294967295,4294967295],0);function Rm(t){const e=hI().encode(t),n=new D0;return n.update(e),new Uint8Array(n.digest())}function Sm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Jn([n,r],0),new Jn([s,i],0)]}class gd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ri(`Invalid padding: ${n}`);if(r<0)throw new Ri(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ri(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ri(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Jn.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Jn.fromNumber(r)));return s.compare(dI)===1&&(s=new Jn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Rm(e),[r,s]=Sm(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new gd(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=Rm(e),[r,s]=Sm(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.be(a)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ri extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,So.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Kl(X.min(),s,new Se(ie),wn(),oe())}}class So{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new So(r,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class wA{constructor(e,n){this.targetId=e,this.Ce=n}}class IA{constructor(e,n,r=tt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Pm{constructor(){this.ve=0,this.Fe=Cm(),this.Me=tt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=oe(),n=oe(),r=oe();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:J(38017,{changeType:i})}}),new So(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Cm()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,he(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class fI{constructor(e){this.Ge=e,this.ze=new Map,this.je=wn(),this.He=ha(),this.Je=ha(),this.Ze=new Se(ie)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:J(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Jc(i))if(r===0){const a=new q(i.path);this.et(n,a,at.newNoDocument(a,X.min()))}else he(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=rr(r).toUint8Array()}catch(u){if(u instanceof G0)return Ps("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new gd(a,s,i)}catch(u){return Ps(u instanceof Ri?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&Jc(l.target)){const u=new q(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,at.newNoDocument(u,e))}i.Be&&(n.set(a,i.ke()),i.Ke())}});let r=oe();this.Je.forEach((i,a)=>{let l=!0;a.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new Kl(e,n,this.Ze,this.je,r);return this.je=wn(),this.He=ha(),this.Je=ha(),this.Ze=new Se(ie),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Pm,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Be(ie),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Be(ie),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Pm),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ha(){return new Se(q.comparator)}function Cm(){return new Se(q.comparator)}const pI={asc:"ASCENDING",desc:"DESCENDING"},mI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gI={and:"AND",or:"OR"};class yI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function eh(t,e){return t.useProto3Json||Ll(e)?e:{value:e}}function cl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function AI(t,e){return cl(t,e.toTimestamp())}function an(t){return he(!!t,49232),X.fromTimestamp(function(n){const r=nr(n);return new ve(r.seconds,r.nanos)}(t))}function yd(t,e){return th(t,e).canonicalString()}function th(t,e){const n=function(s){return new me(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function RA(t){const e=me.fromString(t);return he(bA(e),10190,{key:e.toString()}),e}function nh(t,e){return yd(t.databaseId,e.path)}function Fu(t,e){const n=RA(e);if(n.get(1)!==t.databaseId.projectId)throw new $(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(PA(n))}function SA(t,e){return yd(t.databaseId,e)}function vI(t){const e=RA(t);return e.length===4?me.emptyPath():PA(e)}function rh(t){return new me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function PA(t){return he(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function km(t,e,n){return{name:nh(t,e),fields:n.value.mapValue.fields}}function _I(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:J(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,p){return d.useProto3Json?(he(p===void 0||typeof p=="string",58123),tt.fromBase64String(p||"")):(he(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),tt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const p=d.code===void 0?D.UNKNOWN:xA(d.code);return new $(p,d.message||"")}(a);n=new IA(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Fu(t,r.document.name),i=an(r.document.updateTime),a=r.document.createTime?an(r.document.createTime):X.min(),l=new At({mapValue:{fields:r.document.fields}}),u=at.newFoundDocument(s,i,a,l),d=r.targetIds||[],p=r.removedTargetIds||[];n=new Pa(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Fu(t,r.document),i=r.readTime?an(r.readTime):X.min(),a=at.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Pa([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Fu(t,r.document),i=r.removedTargetIds||[];n=new Pa([],i,s,null)}else{if(!("filter"in e))return J(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new uI(s,i),l=r.targetId;n=new wA(l,a)}}return n}function EI(t,e){let n;if(e instanceof Ro)n={update:km(t,e.key,e.value)};else if(e instanceof TA)n={delete:nh(t,e.key)};else if(e instanceof hr)n={update:km(t,e.key,e.data),updateMask:CI(e.fieldMask)};else{if(!(e instanceof oI))return J(16599,{dt:e.type});n={verify:nh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof ul)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ms)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ao)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof vo)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw J(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:AI(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:J(27497)}(t,e.precondition)),n}function TI(t,e){return t&&t.length>0?(he(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?an(s.updateTime):an(i);return a.isEqual(X.min())&&(a=an(i)),new rI(a,s.transformResults||[])}(n,e))):[]}function xI(t,e){return{documents:[SA(t,e.path)]}}function wI(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=SA(t,s);const i=function(d){if(d.length!==0)return kA(Wt.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(p=>function(g){return{field:Jr(g.field),direction:RI(g.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=eh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function II(t){let e=vI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){he(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(y){const g=CA(y);return g instanceof Wt&&rA(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(y){return y.map(g=>function(C){return new yo(Zr(C.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(y){let g;return g=typeof y=="object"?y.value:y,Ll(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(y){const g=!!y.before,R=y.values||[];return new ll(R,g)}(n.startAt));let d=null;return n.endAt&&(d=function(y){const g=!y.before,R=y.values||[];return new ll(R,g)}(n.endAt)),Bw(e,s,a,i,l,"F",u,d)}function NI(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function CA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Zr(n.unaryFilter.field);return Oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Zr(n.unaryFilter.field);return Oe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Zr(n.unaryFilter.field);return Oe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Zr(n.unaryFilter.field);return Oe.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J(61313);default:return J(60726)}}(t):t.fieldFilter!==void 0?function(n){return Oe.create(Zr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J(58110);default:return J(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Wt.create(n.compositeFilter.filters.map(r=>CA(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return J(1026)}}(n.compositeFilter.op))}(t):J(30097,{filter:t})}function RI(t){return pI[t]}function SI(t){return mI[t]}function PI(t){return gI[t]}function Jr(t){return{fieldPath:t.canonicalString()}}function Zr(t){return Ze.fromServerFormat(t.fieldPath)}function kA(t){return t instanceof Oe?function(n){if(n.op==="=="){if(Am(n.value))return{unaryFilter:{field:Jr(n.field),op:"IS_NAN"}};if(ym(n.value))return{unaryFilter:{field:Jr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Am(n.value))return{unaryFilter:{field:Jr(n.field),op:"IS_NOT_NAN"}};if(ym(n.value))return{unaryFilter:{field:Jr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jr(n.field),op:SI(n.op),value:n.value}}}(t):t instanceof Wt?function(n){const r=n.getFilters().map(s=>kA(s));return r.length===1?r[0]:{compositeFilter:{op:PI(n.op),filters:r}}}(t):J(54877,{filter:t})}function CI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function MA(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,n,r,s,i=X.min(),a=X.min(),l=tt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Kn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.yt=e}}function bI(t){const e=II({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(){this.Sn=new LI}addToCollectionParentIndex(e,n){return this.Sn.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(tr.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(tr.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class LI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Be(me.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Be(me.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LA=41943040;class gt{static withCacheSize(e){return new gt(e,gt.DEFAULT_COLLECTION_PERCENTILE,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gt.DEFAULT_COLLECTION_PERCENTILE=10,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gt.DEFAULT=new gt(LA,gt.DEFAULT_COLLECTION_PERCENTILE,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gt.DISABLED=new gt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ls(0)}static ar(){return new Ls(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="LruGarbageCollector",DI=1048576;function Lm([t,e],[n,r]){const s=ie(t,n);return s===0?ie(e,r):s}class VI{constructor(e){this.Pr=e,this.buffer=new Be(Lm),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Lm(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class OI{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Y(Mm,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Bs(n)?Y(Mm,"Ignoring IndexedDB error during garbage collection: ",n):await Hs(n)}await this.Ar(3e5)})}}class UI{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(Ml.ce);const r=new VI(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(bm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bm):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,a,l,u,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,a=Date.now(),this.nthSequenceNumber(e,s))).next(y=>(r=y,l=Date.now(),this.removeTargets(e,r,n))).next(y=>(i=y,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(d=Date.now(),Wr()<=le.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${y} documents in `+(d-u)+`ms
Total Duration: ${d-p}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:y})))}}function jI(t,e){return new UI(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this.changes=new Kr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&zi(r.mutation,s,St.empty(),ve.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){const s=Ir();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Ni();return i.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Ir();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=wn();const a=Bi(),l=function(){return Bi()}();return n.forEach((u,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof hr)?i=i.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),zi(p.mutation,d,p.mutation.getFieldMask(),ve.now())):a.set(d.key,St.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,p)=>a.set(d,p)),n.forEach((d,p)=>l.set(d,new FI(p,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Bi();let s=new Se((a,l)=>a-l),i=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let p=r.get(u)||St.empty();p=l.applyToLocalView(d,p),r.set(u,p);const y=(s.get(l.batchId)||oe()).add(u);s=s.insert(l.batchId,y)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,p=u.value,y=dA();p.forEach(g=>{if(!i.has(g)){const R=_A(n.get(g),r.get(g));R!==null&&y.set(g,R),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,y))}return V.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return zw(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):aA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):V.resolve(Ir());let l=fo,u=i;return a.next(d=>V.forEach(d,(p,y)=>(l<y.largestBatchId&&(l=y.largestBatchId),i.get(p)?V.resolve():this.remoteDocumentCache.getEntry(e,p).next(g=>{u=u.insert(p,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,oe())).next(p=>({batchId:l,changes:hA(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let s=Ni();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Ni();return this.indexManager.getCollectionParents(e,i).next(l=>V.forEach(l,u=>{const d=function(y,g){return new zs(g,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((y,g)=>{a=a.insert(y,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,d)=>{const p=d.getKey();a.get(p)===null&&(a=a.insert(p,at.newInvalidDocument(p)))});let l=Ni();return a.forEach((u,d)=>{const p=i.get(u);p!==void 0&&zi(p.mutation,d,St.empty(),ve.now()),Ol(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return V.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:an(s.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:bI(s.bundledQuery),readTime:an(s.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(){this.overlays=new Se(q.comparator),this.Lr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ir();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const s=Ir(),i=n.length+1,a=new q(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return V.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Se((d,p)=>d-p);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=i.get(d.largestBatchId);p===null&&(p=Ir(),i=i.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const l=Ir(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>l.set(d,p)),!(l.size()>=s)););return V.resolve(l)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new lI(n,r));let i=this.Lr.get(n);i===void 0&&(i=oe(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this.sessionToken=tt.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(){this.kr=new Be(Ye.Kr),this.qr=new Be(Ye.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Ye(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Ye(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new q(new me([])),r=new Ye(n,e),s=new Ye(n,e+1),i=[];return this.qr.forEachInRange([r,s],a=>{this.Wr(a),i.push(a.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new q(new me([])),r=new Ye(n,e),s=new Ye(n,e+1);let i=oe();return this.qr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Ye(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ye{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return q.comparator(e.key,n.key)||ie(e.Hr,n.Hr)}static Ur(e,n){return ie(e.Hr,n.Hr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Be(Ye.Kr)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new aI(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Jr=this.Jr.add(new Ye(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return V.resolve(a)}lookupMutationBatch(e,n){return V.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?ld:this.Yn-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ye(n,0),s=new Ye(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],a=>{const l=this.Zr(a.Hr);i.push(l)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Be(ie);return n.forEach(s=>{const i=new Ye(s,0),a=new Ye(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,a],l=>{r=r.add(l.Hr)})}),V.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;q.isDocumentKey(i)||(i=i.child(""));const a=new Ye(new q(i),0);let l=new Be(ie);return this.Jr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.Hr)),!0)},a),V.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){he(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return V.forEach(n.mutations,s=>{const i=new Ye(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new Ye(n,0),s=this.Jr.firstAfterOrEqual(r);return V.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.ti=e,this.docs=function(){return new Se(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():at.newInvalidDocument(n))}getEntries(e,n){let r=wn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():at.newInvalidDocument(s))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=wn();const a=n.path,l=new q(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||_w(vw(p),r)<=0||(s.has(p.key)||Ol(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,n,r,s){J(9500)}ni(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new qI(this)}getSize(e){return V.resolve(this.size)}}class qI extends KI{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.persistence=e,this.ri=new Kr(n=>hd(n),dd),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.ii=0,this.si=new Ad,this.targetCount=0,this.oi=Ls._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),V.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ls(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.lr(n),V.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),V.waitFor(i).next(()=>s)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),V.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,n){this._i={},this.overlays={},this.ai=new Ml(0),this.ui=!1,this.ui=!0,this.ci=new $I,this.referenceDelegate=e(this),this.li=new WI(this),this.indexManager=new MI,this.remoteDocumentCache=function(s){return new GI(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new kI(n),this.Pi=new BI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new YI(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const s=new QI(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return V.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class QI extends Tw{constructor(e){super(),this.currentSequenceNumber=e}}class vd{constructor(e){this.persistence=e,this.Ri=new Ad,this.Ai=null}static Vi(e){return new vd(e)}get di(){if(this.Ai)return this.Ai;throw J(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),V.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.di,r=>{const s=q.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,X.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return V.or([()=>V.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class hl{constructor(e,n){this.persistence=e,this.fi=new Kr(r=>Iw(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=jI(this,n)}static Vi(e,n){return new hl(e,n)}Ti(){}Ii(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return V.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?V.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,a=>this.wr(e,a,n).next(l=>{l||(r++,i.removeEntry(a,X.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),V.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Na(e.data.value)),n}wr(e,n,r){return V.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return V.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=oe(),s=oe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new _d(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return KT()?8:xw(UT())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new JI;return this.ys(e,n,a).next(l=>{if(i.result=l,this.As)return this.ws(e,n,a,l.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(Wr()<=le.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",Qr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),V.resolve()):(Wr()<=le.DEBUG&&Y("QueryEngine","Query:",Qr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Wr()<=le.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",Qr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sn(n))):V.resolve())}gs(e,n){if(Tm(n))return V.resolve(null);let r=sn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Xc(n,null,"F"),r=sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=oe(...i);return this.fs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.bs(n,l);return this.Ss(n,d,a,u.readTime)?this.gs(e,Xc(n,null,"F")):this.Ds(e,d,n,u)}))})))}ps(e,n,r,s){return Tm(n)||s.isEqual(X.min())?V.resolve(null):this.fs.getDocuments(e,r).next(i=>{const a=this.bs(n,i);return this.Ss(n,a,r,s)?V.resolve(null):(Wr()<=le.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Qr(n)),this.Ds(e,a,n,Aw(s,fo)).next(l=>l))})}bs(e,n){let r=new Be(uA(e));return n.forEach((s,i)=>{Ol(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return Wr()<=le.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Qr(n)),this.fs.getDocumentsMatchingQuery(e,n,tr.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="LocalStore",XI=3e8;class eN{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new Se(ie),this.Fs=new Kr(i=>hd(i),dd),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function tN(t,e,n,r){return new eN(t,e,n,r)}async function VA(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let u=oe();for(const d of s){a.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of i){l.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ns:d,removedBatchIds:a,addedBatchIds:l}))})})}function nN(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,p){const y=d.batch,g=y.keys();let R=V.resolve();return g.forEach(C=>{R=R.next(()=>p.getEntry(u,C)).next(b=>{const O=d.docVersions.get(C);he(O!==null,48541),b.version.compareTo(O)<0&&(y.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),p.addEntry(b)))})}),R.next(()=>l.mutationQueue.removeMutationBatch(u,y))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=oe();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function OA(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function rN(t,e){const n=te(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const l=[];e.targetChanges.forEach((p,y)=>{const g=s.get(y);if(!g)return;l.push(n.li.removeMatchingKeys(i,p.removedDocuments,y).next(()=>n.li.addMatchingKeys(i,p.addedDocuments,y)));let R=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(y)!==null?R=R.withResumeToken(tt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):p.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(p.resumeToken,r)),s=s.insert(y,R),function(b,O,I){return b.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=XI?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(g,R,p)&&l.push(n.li.updateTargetData(i,R))});let u=wn(),d=oe();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(sN(i,a,e.documentUpdates).next(p=>{u=p.Bs,d=p.Ls})),!r.isEqual(X.min())){const p=n.li.getLastRemoteSnapshotVersion(i).next(y=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return V.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.vs=s,i))}function sN(t,e,n){let r=oe(),s=oe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=wn();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):Y(Ed,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Bs:a,Ls:s}})}function iN(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ld),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oN(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,V.resolve(s)):n.li.allocateTargetId(r).next(a=>(s=new Kn(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function sh(t,e,n){const r=te(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Bs(a))throw a;Y(Ed,`Failed to update sequence numbers for target ${e}: ${a}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function Dm(t,e,n){const r=te(t);let s=X.min(),i=oe();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,p){const y=te(u),g=y.Fs.get(p);return g!==void 0?V.resolve(y.vs.get(g)):y.li.getTargetData(d,p)}(r,a,sn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(a,l.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,n?s:X.min(),n?i:oe())).next(l=>(aN(r,Gw(e),l),{documents:l,ks:i})))}function aN(t,e,n){let r=t.Ms.get(e)||X.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class Vm{constructor(){this.activeTargetIds=Xw()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lN{constructor(){this.vo=new Vm,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Vm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="ConnectivityMonitor";class Um{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Y(Om,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Y(Om,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let da=null;function ih(){return da===null?da=function(){return 268435456+Math.round(2147483648*Math.random())}():da++,"0x"+da.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu="RestConnection",cN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class hN{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===ol?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const a=ih(),l=this.Qo(e,n.toUriEncodedString());Y(Hu,`Sending RPC '${e}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,s,i);const{host:d}=new URL(l),p=sd(d);return this.zo(e,l,u,r,p).then(y=>(Y(Hu,`Received RPC '${e}' ${a}: `,y),y),y=>{throw Ps(Hu,`RPC '${e}' ${a} failed with error: `,y,"url: ",l,"request:",r),y})}jo(e,n,r,s,i,a){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=cN[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st="WebChannelConnection",vi=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class vs extends hN{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!vs.c_){const e=j0();vi(e,U0.STAT_EVENT,n=>{n.stat===Yc.PROXY?Y(st,"STAT_EVENT: detected buffering proxy"):n.stat===Yc.NOPROXY&&Y(st,"STAT_EVENT: detected no buffering proxy")}),vs.c_=!0}}zo(e,n,r,s,i){const a=ih();return new Promise((l,u)=>{const d=new V0;d.setWithCredentials(!0),d.listenOnce(O0.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Ia.NO_ERROR:const y=d.getResponseJson();Y(st,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(y)),l(y);break;case Ia.TIMEOUT:Y(st,`RPC '${e}' ${a} timed out`),u(new $(D.DEADLINE_EXCEEDED,"Request time out"));break;case Ia.HTTP_ERROR:const g=d.getStatus();if(Y(st,`RPC '${e}' ${a} failed with status:`,g,"response text:",d.getResponseText()),g>0){let R=d.getResponseJson();Array.isArray(R)&&(R=R[0]);const C=R==null?void 0:R.error;if(C&&C.status&&C.message){const b=function(I){const v=I.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(v)>=0?v:D.UNKNOWN}(C.status);u(new $(b,C.message))}else u(new $(D.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new $(D.UNAVAILABLE,"Connection failed."));break;default:J(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Y(st,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(s);Y(st,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",p,r,15)})}T_(e,n,r){const s=ih(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");Y(st,`Creating RPC '${e}' stream ${s}: ${d}`,l);const p=a.createWebChannel(d,l);this.I_(p);let y=!1,g=!1;const R=new dN({Ho:C=>{g?Y(st,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(y||(Y(st,`Opening RPC '${e}' stream ${s} transport.`),p.open(),y=!0),Y(st,`RPC '${e}' stream ${s} sending:`,C),p.send(C))},Jo:()=>p.close()});return vi(p,Ii.EventType.OPEN,()=>{g||(Y(st,`RPC '${e}' stream ${s} transport opened.`),R.i_())}),vi(p,Ii.EventType.CLOSE,()=>{g||(g=!0,Y(st,`RPC '${e}' stream ${s} transport closed`),R.o_(),this.E_(p))}),vi(p,Ii.EventType.ERROR,C=>{g||(g=!0,Ps(st,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),R.o_(new $(D.UNAVAILABLE,"The operation could not be completed")))}),vi(p,Ii.EventType.MESSAGE,C=>{var b;if(!g){const O=C.data[0];he(!!O,16349);const I=O,v=(I==null?void 0:I.error)||((b=I[0])==null?void 0:b.error);if(v){Y(st,`RPC '${e}' stream ${s} received error:`,v);const w=v.status;let L=function(_){const A=De[_];if(A!==void 0)return xA(A)}(w),j=v.message;L===void 0&&(L=D.INTERNAL,j="Unknown error status: "+w+" with message "+v.message),g=!0,R.o_(new $(L,j)),p.close()}else Y(st,`RPC '${e}' stream ${s} received:`,O),R.__(O)}}),vs.u_(),setTimeout(()=>{R.s_()},0),R}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return K0()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(t){return new vs(t)}function Bu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(t){return new yI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vs.c_=!1;class UA{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="PersistentStream";class jA{constructor(e,n,r,s,i,a,l,u){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new UA(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===D.RESOURCE_EXHAUSTED?(xn(n.toString()),xn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new $(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Y(jm,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(Y(jm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pN extends jA{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=_I(this.serializer,e),r=function(i){if(!("targetChange"in i))return X.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?X.min():a.readTime?an(a.readTime):X.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=rh(this.serializer),n.addTarget=function(i,a){let l;const u=a.target;if(l=Jc(u)?{documents:xI(i,u)}:{query:wI(i,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=NA(i,a.resumeToken);const d=eh(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(X.min())>0){l.readTime=cl(i,a.snapshotVersion.toTimestamp());const d=eh(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=NI(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=rh(this.serializer),n.removeTarget=e,this.K_(n)}}class mN extends jA{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return he(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,he(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){he(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=TI(e.writeResults,e.commitTime),r=an(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=rh(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>EI(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{}class yN extends gN{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new $(D.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Wo(e,th(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new $(D.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.jo(e,th(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new $(D.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function AN(t,e,n,r){return new yN(t,e,n,r)}class vN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xn(n),this.aa=!1):Y("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="RemoteStore";class _N{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(a=>{r.enqueueAndForget(async()=>{Fr(this)&&(Y(Or,"Restarting streams for network reachability change."),await async function(u){const d=te(u);d.Ea.add(4),await Po(d),d.Va.set("Unknown"),d.Ea.delete(4),await Hl(d)}(this))})}),this.Va=new vN(r,s)}}async function Hl(t){if(Fr(t))for(const e of t.Ra)await e(!0)}async function Po(t){for(const e of t.Ra)await e(!1)}function KA(t,e){const n=te(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Id(n)?wd(n):$s(n).O_()&&xd(n,e))}function Td(t,e){const n=te(t),r=$s(n);n.Ia.delete(e),r.O_()&&FA(n,e),n.Ia.size===0&&(r.O_()?r.L_():Fr(n)&&n.Va.set("Unknown"))}function xd(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}$s(t).Z_(e)}function FA(t,e){t.da.$e(e),$s(t).X_(e)}function wd(t){t.da=new fI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),$s(t).start(),t.Va.ua()}function Id(t){return Fr(t)&&!$s(t).x_()&&t.Ia.size>0}function Fr(t){return te(t).Ea.size===0}function HA(t){t.da=void 0}async function EN(t){t.Va.set("Online")}async function TN(t){t.Ia.forEach((e,n)=>{xd(t,e)})}async function xN(t,e){HA(t),Id(t)?(t.Va.ha(e),wd(t)):t.Va.set("Unknown")}async function wN(t,e,n){if(t.Va.set("Online"),e instanceof IA&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.da.removeTarget(l))}(t,e)}catch(r){Y(Or,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dl(t,r)}else if(e instanceof Pa?t.da.Xe(e):e instanceof wA?t.da.st(e):t.da.tt(e),!n.isEqual(X.min()))try{const r=await OA(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.da.Tt(a);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.Ia.get(d);p&&i.Ia.set(d,p.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,d)=>{const p=i.Ia.get(u);if(!p)return;i.Ia.set(u,p.withResumeToken(tt.EMPTY_BYTE_STRING,p.snapshotVersion)),FA(i,u);const y=new Kn(p.target,u,d,p.sequenceNumber);xd(i,y)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Y(Or,"Failed to raise snapshot:",r),await dl(t,r)}}async function dl(t,e,n){if(!Bs(e))throw e;t.Ea.add(1),await Po(t),t.Va.set("Offline"),n||(n=()=>OA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y(Or,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Hl(t)})}function BA(t,e){return e().catch(n=>dl(t,n,e))}async function Bl(t){const e=te(t),n=ir(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ld;for(;IN(e);)try{const s=await iN(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,NN(e,s)}catch(s){await dl(e,s)}zA(e)&&$A(e)}function IN(t){return Fr(t)&&t.Ta.length<10}function NN(t,e){t.Ta.push(e);const n=ir(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function zA(t){return Fr(t)&&!ir(t).x_()&&t.Ta.length>0}function $A(t){ir(t).start()}async function RN(t){ir(t).ra()}async function SN(t){const e=ir(t);for(const n of t.Ta)e.ea(n.mutations)}async function PN(t,e,n){const r=t.Ta.shift(),s=md.from(r,e,n);await BA(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Bl(t)}async function CN(t,e){e&&ir(t).Y_&&await async function(r,s){if(function(a){return cI(a)&&a!==D.ABORTED}(s.code)){const i=r.Ta.shift();ir(r).B_(),await BA(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Bl(r)}}(t,e),zA(t)&&$A(t)}async function Km(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),Y(Or,"RemoteStore received new credentials");const r=Fr(n);n.Ea.add(3),await Po(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Hl(n)}async function kN(t,e){const n=te(t);e?(n.Ea.delete(2),await Hl(n)):e||(n.Ea.add(2),await Po(n),n.Va.set("Unknown"))}function $s(t){return t.ma||(t.ma=function(n,r,s){const i=te(n);return i.sa(),new pN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:EN.bind(null,t),Yo:TN.bind(null,t),t_:xN.bind(null,t),J_:wN.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),Id(t)?wd(t):t.Va.set("Unknown")):(await t.ma.stop(),HA(t))})),t.ma}function ir(t){return t.fa||(t.fa=function(n,r,s){const i=te(n);return i.sa(),new mN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:RN.bind(null,t),t_:CN.bind(null,t),ta:SN.bind(null,t),na:PN.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await Bl(t)):(await t.fa.stop(),t.Ta.length>0&&(Y(Or,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new Nd(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rd(t,e){if(xn("AsyncQueue",`${e}: ${t}`),Bs(t))return new $(D.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{static emptySet(e){return new _s(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=Ni(),this.sortedSet=new Se(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _s)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new _s;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(){this.ga=new Se(q.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):J(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ds{constructor(e,n,r,s,i,a,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Ds(e,n,_s.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class MN{constructor(){this.queries=Hm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=te(n),i=s.queries;s.queries=Hm(),i.forEach((a,l)=>{for(const u of l.ba)u.onError(r)})})(this,new $(D.ABORTED,"Firestore shutting down"))}}function Hm(){return new Kr(t=>lA(t),Vl)}async function LN(t,e){const n=te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new bN,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Rd(a,`Initialization of query '${Qr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Sd(n)}async function DN(t,e){const n=te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.ba.indexOf(e);a>=0&&(i.ba.splice(a,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function VN(t,e){const n=te(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.ba)l.Fa(s)&&(r=!0);a.wa=s}}r&&Sd(n)}function ON(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function Sd(t){t.Ca.forEach(e=>{e.next()})}var oh,Bm;(Bm=oh||(oh={})).Ma="default",Bm.Cache="cache";class UN{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ds(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ds.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==oh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.key=e}}class GA{constructor(e){this.key=e}}class jN{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=oe(),this.mutatedKeys=oe(),this.eu=uA(e),this.tu=new _s(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new Fm,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,y)=>{const g=s.get(p),R=Ol(this.query,y)?y:null,C=!!g&&this.mutatedKeys.has(g.key),b=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let O=!1;g&&R?g.data.isEqual(R.data)?C!==b&&(r.track({type:3,doc:R}),O=!0):this.su(g,R)||(r.track({type:2,doc:R}),O=!0,(u&&this.eu(R,u)>0||d&&this.eu(R,d)<0)&&(l=!0)):!g&&R?(r.track({type:0,doc:R}),O=!0):g&&!R&&(r.track({type:1,doc:g}),O=!0,(u||d)&&(l=!0)),O&&(R?(a=a.add(R),i=b?i.add(p):i.delete(p)):(a=a.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{tu:a,iu:r,Ss:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((p,y)=>function(R,C){const b=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{Vt:O})}};return b(R)-b(C)}(p.type,y.type)||this.eu(p.doc,y.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Ya.size===0&&this.current&&!s?1:0,d=u!==this.Xa;return this.Xa=u,a.length!==0||d?{snapshot:new Ds(this.query,e.tu,i,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Fm,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=oe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new GA(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new YA(r))}),n}cu(e){this.Za=e.ks,this.Ya=oe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ds.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Pd="SyncEngine";class KN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class FN{constructor(e){this.key=e,this.hu=!1}}class HN{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Kr(l=>lA(l),Vl),this.Iu=new Map,this.Eu=new Set,this.Ru=new Se(q.comparator),this.Au=new Map,this.Vu=new Ad,this.du={},this.mu=new Map,this.fu=Ls.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function BN(t,e,n=!0){const r=XA(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await qA(r,e,n,!0),s}async function zN(t,e){const n=XA(t);await qA(n,e,!0,!1)}async function qA(t,e,n,r){const s=await oN(t.localStore,sn(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await $N(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&KA(t.remoteStore,s),l}async function $N(t,e,n,r,s){t.pu=(y,g,R)=>async function(b,O,I,v){let w=O.view.ru(I);w.Ss&&(w=await Dm(b.localStore,O.query,!1).then(({documents:_})=>O.view.ru(_,w)));const L=v&&v.targetChanges.get(O.targetId),j=v&&v.targetMismatches.get(O.targetId)!=null,K=O.view.applyChanges(w,b.isPrimaryClient,L,j);return $m(b,O.targetId,K.au),K.snapshot}(t,y,g,R);const i=await Dm(t.localStore,e,!0),a=new jN(e,i.ks),l=a.ru(i.documents),u=So.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,u);$m(t,n,d.au);const p=new KN(e,n,a);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function YN(t,e,n){const r=te(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!Vl(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await sh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Td(r.remoteStore,s.targetId),ah(r,s.targetId)}).catch(Hs)):(ah(r,s.targetId),await sh(r.localStore,s.targetId,!0))}async function GN(t,e){const n=te(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Td(n.remoteStore,r.targetId))}async function qN(t,e,n){const r=tR(t);try{const s=await function(a,l){const u=te(a),d=ve.now(),p=l.reduce((R,C)=>R.add(C.key),oe());let y,g;return u.persistence.runTransaction("Locally write mutations","readwrite",R=>{let C=wn(),b=oe();return u.xs.getEntries(R,p).next(O=>{C=O,C.forEach((I,v)=>{v.isValidDocument()||(b=b.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(R,C)).next(O=>{y=O;const I=[];for(const v of l){const w=iI(v,y.get(v.key).overlayedDocument);w!=null&&I.push(new hr(v.key,w,eA(w.value.mapValue),on.exists(!0)))}return u.mutationQueue.addMutationBatch(R,d,I,l)}).next(O=>{g=O;const I=O.applyToLocalDocumentSet(y,b);return u.documentOverlayCache.saveOverlays(R,O.batchId,I)})}).then(()=>({batchId:g.batchId,changes:hA(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let d=a.du[a.currentUser.toKey()];d||(d=new Se(ie)),d=d.insert(l,u),a.du[a.currentUser.toKey()]=d}(r,s.batchId,n),await Co(r,s.changes),await Bl(r.remoteStore)}catch(s){const i=Rd(s,"Failed to persist write");n.reject(i)}}async function WA(t,e){const n=te(t);try{const r=await rN(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(he(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?he(a.hu,14607):s.removedDocuments.size>0&&(he(a.hu,42227),a.hu=!1))}),await Co(n,r,e)}catch(r){await Hs(r)}}function zm(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=te(a);u.onlineState=l;let d=!1;u.queries.forEach((p,y)=>{for(const g of y.ba)g.va(l)&&(d=!0)}),d&&Sd(u)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function WN(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new Se(q.comparator);a=a.insert(i,at.newNoDocument(i,X.min()));const l=oe().add(i),u=new Kl(X.min(),new Map,new Se(ie),a,l);await WA(r,u),r.Ru=r.Ru.remove(i),r.Au.delete(e),Cd(r)}else await sh(r.localStore,e,!1).then(()=>ah(r,e,n)).catch(Hs)}async function QN(t,e){const n=te(t),r=e.batch.batchId;try{const s=await nN(n.localStore,e);JA(n,r,null),QA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Co(n,s)}catch(s){await Hs(s)}}async function JN(t,e,n){const r=te(t);try{const s=await function(a,l){const u=te(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,l).next(y=>(he(y!==null,37113),p=y.keys(),u.mutationQueue.removeMutationBatch(d,y))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);JA(r,e,n),QA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Co(r,s)}catch(s){await Hs(s)}}function QA(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function JA(t,e,n){const r=te(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function ah(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||ZA(t,r)})}function ZA(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Td(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Cd(t))}function $m(t,e,n){for(const r of n)r instanceof YA?(t.Vu.addReference(r.key,e),ZN(t,r)):r instanceof GA?(Y(Pd,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||ZA(t,r.key)):J(19791,{wu:r})}function ZN(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Y(Pd,"New document in limbo: "+n),t.Eu.add(r),Cd(t))}function Cd(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new q(me.fromString(e)),r=t.fu.next();t.Au.set(r,new FN(n)),t.Ru=t.Ru.insert(n,r),KA(t.remoteStore,new Kn(sn(fd(n.path)),r,"TargetPurposeLimboResolution",Ml.ce))}}async function Co(t,e,n){const r=te(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{a.push(r.pu(u,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const y=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,y?"current":"not-current")}if(d){s.push(d);const y=_d.Es(u.targetId,d);i.push(y)}}))}),await Promise.all(a),r.Pu.J_(s),await async function(u,d){const p=te(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>V.forEach(d,g=>V.forEach(g.Ts,R=>p.persistence.referenceDelegate.addReference(y,g.targetId,R)).next(()=>V.forEach(g.Is,R=>p.persistence.referenceDelegate.removeReference(y,g.targetId,R)))))}catch(y){if(!Bs(y))throw y;Y(Ed,"Failed to update sequence numbers: "+y)}for(const y of d){const g=y.targetId;if(!y.fromCache){const R=p.vs.get(g),C=R.snapshotVersion,b=R.withLastLimboFreeSnapshotVersion(C);p.vs=p.vs.insert(g,b)}}}(r.localStore,i))}async function XN(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){Y(Pd,"User change. New user:",e.toKey());const r=await VA(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new $(D.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Co(n,r.Ns)}}function eR(t,e){const n=te(t),r=n.Au.get(e);if(r&&r.hu)return oe().add(r.key);{let s=oe();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function XA(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=WA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WN.bind(null,e),e.Pu.J_=VN.bind(null,e.eventManager),e.Pu.yu=ON.bind(null,e.eventManager),e}function tR(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JN.bind(null,e),e}class fl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return tN(this.persistence,new ZI,e.initialUser,this.serializer)}Cu(e){return new DA(vd.Vi,this.serializer)}Du(e){return new lN}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fl.provider={build:()=>new fl};class nR extends fl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){he(this.persistence.referenceDelegate instanceof hl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new OI(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?gt.withCacheSize(this.cacheSizeBytes):gt.DEFAULT;return new DA(r=>hl.Vi(r,n),this.serializer)}}class lh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>zm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XN.bind(null,this.syncEngine),await kN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new MN}()}createDatastore(e){const n=Fl(e.databaseInfo.databaseId),r=fN(e.databaseInfo);return AN(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new _N(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>zm(this.syncEngine,n,0),function(){return Um.v()?new Um:new uN}())}createSyncEngine(e,n){return function(s,i,a,l,u,d,p){const y=new HN(s,i,a,l,u,d);return p&&(y.gu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=te(s);Y(Or,"RemoteStore shutting down."),i.Ea.add(5),await Po(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}lh.provider={build:()=>new lh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):xn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or="FirestoreClient";class sR{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=it.UNAUTHENTICATED,this.clientId=ad.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{Y(or,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Y(or,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Rd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function zu(t,e){t.asyncQueue.verifyOperationInProgress(),Y(or,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await VA(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ym(t,e){t.asyncQueue.verifyOperationInProgress();const n=await iR(t);Y(or,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Km(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Km(e.remoteStore,s)),t._onlineComponents=e}async function iR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(or,"Using user provided OfflineComponentProvider");try{await zu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===D.FAILED_PRECONDITION||s.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ps("Error using user provided cache. Falling back to memory cache: "+n),await zu(t,new fl)}}else Y(or,"Using default OfflineComponentProvider"),await zu(t,new nR(void 0));return t._offlineComponents}async function ev(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(or,"Using user provided OnlineComponentProvider"),await Ym(t,t._uninitializedComponentsProvider._online)):(Y(or,"Using default OnlineComponentProvider"),await Ym(t,new lh))),t._onlineComponents}function oR(t){return ev(t).then(e=>e.syncEngine)}async function Gm(t){const e=await ev(t),n=e.eventManager;return n.onListen=BN.bind(null,e.syncEngine),n.onUnlisten=YN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=GN.bind(null,e.syncEngine),n}function aR(t,e,n,r){const s=new rR(r),i=new UN(e,s,n);return t.asyncQueue.enqueueAndForget(async()=>LN(await Gm(t),i)),()=>{s.Nu(),t.asyncQueue.enqueueAndForget(async()=>DN(await Gm(t),i))}}function lR(t,e){const n=new Sr;return t.asyncQueue.enqueueAndForget(async()=>qN(await oR(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="ComponentProvider",qm=new Map;function cR(t,e,n,r,s){return new Sw(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,tv(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="firestore.googleapis.com",Wm=!0;class Qm{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nv,this.ssl=Wm}else this.host=e.host,this.ssl=e.ssl??Wm;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DI)throw new $(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tv(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new $(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new $(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new $(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new aw;switch(r.type){case"firstParty":return new hw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=qm.get(n);r&&(Y(uR,"Removing Datastore"),qm.delete(n),r.terminate())}(this),Promise.resolve()}}function hR(t,e,n,r={}){var d;t=Pr(t,zl);const s=sd(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(MT(`https://${l}`),OT("Firestore",!0)),i.host!==nv&&i.host!==l&&Ps("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!uo(u,a)&&(t._setSettings(u),r.mockUserToken)){let p,y;if(typeof r.mockUserToken=="string")p=r.mockUserToken,y=it.MOCK_USER;else{p=LT(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new $(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new it(g)}t._authCredentials=new lw(new H0(p,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hr(this.firestore,e,this._query)}}class je{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new je(this.firestore,e,this._key)}toJSON(){return{type:je._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(No(n,je._jsonSchema))return new je(e,r||null,new q(me.fromString(n.referencePath)))}}je._jsonSchemaVersion="firestore/documentReference/1.0",je._jsonSchema={type:Ue("string",je._jsonSchemaVersion),referencePath:Ue("string")};class Zn extends Hr{constructor(e,n,r){super(e,n,fd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new je(this.firestore,null,new q(e))}withConverter(e){return new Zn(this.firestore,e,this._path)}}function $u(t,e,...n){if(t=un(t),B0("collection","path",e),t instanceof zl){const r=me.fromString(e,...n);return lm(r),new Zn(t,null,r)}{if(!(t instanceof je||t instanceof Zn))throw new $(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(me.fromString(e,...n));return lm(r),new Zn(t.firestore,null,r)}}function Xr(t,e,...n){if(t=un(t),arguments.length===1&&(e=ad.newId()),B0("doc","path",e),t instanceof zl){const r=me.fromString(e,...n);return am(r),new je(t,null,new q(r))}{if(!(t instanceof je||t instanceof Zn))throw new $(D.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(me.fromString(e,...n));return am(r),new je(t.firestore,t instanceof Zn?t.converter:null,new q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="AsyncQueue";class Zm{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new UA(this,"async_queue_retry"),this._c=()=>{const r=Bu();r&&Y(Jm,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Bu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Bu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Sr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Bs(e))throw e;Y(Jm,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,xn("INTERNAL UNHANDLED ERROR: ",Xm(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Nd.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&J(47125,{Pc:Xm(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Xm(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class _o extends zl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Zm,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zm(e),this._firestoreClient=void 0,await e}}}function dR(t,e){const n=typeof t=="object"?t:Gx(),r=typeof t=="string"?t:ol,s=Hx(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=kT("firestore");i&&hR(s,...i)}return s}function rv(t){if(t._terminated)throw new $(D.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||fR(t),t._firestoreClient}function fR(t){var r,s,i,a;const e=t._freezeSettings(),n=cR(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new sR(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vt(tt.fromBase64String(e))}catch(n){throw new $(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vt(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(No(e,Vt._jsonSchema))return Vt.fromBase64String(e.bytes)}}Vt._jsonSchemaVersion="firestore/bytes/1.0",Vt._jsonSchema={type:Ue("string",Vt._jsonSchemaVersion),bytes:Ue("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ln._jsonSchemaVersion}}static fromJSON(e){if(No(e,ln._jsonSchema))return new ln(e.latitude,e.longitude)}}ln._jsonSchemaVersion="firestore/geoPoint/1.0",ln._jsonSchema={type:Ue("string",ln._jsonSchemaVersion),latitude:Ue("number"),longitude:Ue("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Gt._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(No(e,Gt._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Gt(e.vectorValues);throw new $(D.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gt._jsonSchemaVersion="firestore/vectorValue/1.0",Gt._jsonSchema={type:Ue("string",Gt._jsonSchemaVersion),vectorValues:Ue("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=/^__.*__$/;class mR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new hr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ro(e,this.data,n,this.fieldTransforms)}}class sv{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new hr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function iv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{dataSource:t})}}class $l{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new $l({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return pl(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(iv(this.dataSource)&&pR.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class gR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Fl(e)}createContext(e,n,r,s=!1){return new $l({dataSource:e,methodName:n,targetDoc:r,path:Ze.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bd(t){const e=t._freezeSettings(),n=Fl(t._databaseId);return new gR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yR(t,e,n,r,s,i={}){const a=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);Dd("Data must be an object, but it was:",a,r);const l=ov(r,a);let u,d;if(i.merge)u=new St(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const p=[];for(const y of i.mergeFields){const g=Vs(e,y,n);if(!a.contains(g))throw new $(D.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);uv(p,g)||p.push(g)}u=new St(p),d=a.fieldTransforms.filter(y=>u.covers(y.field))}else u=null,d=a.fieldTransforms;return new mR(new At(l),u,d)}class Yl extends ko{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yl}}function AR(t,e,n){return new $l({dataSource:3,targetDoc:e.settings.targetDoc,methodName:t._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Md extends ko{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=AR(this,e,!0),r=this.Ac.map(i=>Ys(i,n)),s=new Ms(r);return new vA(e.path,s)}isEqual(e){return e instanceof Md&&uo(this.Ac,e.Ac)}}class Ld extends ko{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new vo(e.serializer,pA(e.serializer,this.Vc));return new vA(e.path,n)}isEqual(e){return e instanceof Ld&&this.Vc===e.Vc}}function vR(t,e,n,r){const s=t.createContext(1,e,n);Dd("Data must be an object, but it was:",s,r);const i=[],a=At.empty();cr(r,(u,d)=>{const p=lv(e,u,n);d=un(d);const y=s.childContextForFieldPath(p);if(d instanceof Yl)i.push(p);else{const g=Ys(d,y);g!=null&&(i.push(p),a.set(p,g))}});const l=new St(i);return new sv(a,l,s.fieldTransforms)}function _R(t,e,n,r,s,i){const a=t.createContext(1,e,n),l=[Vs(e,r,n)],u=[s];if(i.length%2!=0)throw new $(D.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(Vs(e,i[g])),u.push(i[g+1]);const d=[],p=At.empty();for(let g=l.length-1;g>=0;--g)if(!uv(d,l[g])){const R=l[g];let C=u[g];C=un(C);const b=a.childContextForFieldPath(R);if(C instanceof Yl)d.push(R);else{const O=Ys(C,b);O!=null&&(d.push(R),p.set(R,O))}}const y=new St(d);return new sv(p,y,a.fieldTransforms)}function ER(t,e,n,r=!1){return Ys(n,t.createContext(r?4:3,e))}function Ys(t,e){if(av(t=un(t)))return Dd("Unsupported field value:",e,t),ov(t,e);if(t instanceof ko)return function(r,s){if(!iv(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let u=Ys(l,s.childContextForArray(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=un(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pA(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ve.fromDate(r);return{timestampValue:cl(s.serializer,i)}}if(r instanceof ve){const i=new ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cl(s.serializer,i)}}if(r instanceof ln)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vt)return{bytesValue:NA(s.serializer,r._byteString)};if(r instanceof je){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:yd(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Gt)return function(a,l){const u=a instanceof Gt?a.toArray():a;return{mapValue:{fields:{[Z0]:{stringValue:X0},[al]:{arrayValue:{values:u.map(p=>{if(typeof p!="number")throw l.createError("VectorValues must only contain numeric values.");return pd(l.serializer,p)})}}}}}}(r,s);if(MA(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${bl(r)}`)}(t,e)}function ov(t,e){const n={};return Y0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cr(t,(r,s)=>{const i=Ys(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function av(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ve||t instanceof ln||t instanceof Vt||t instanceof je||t instanceof ko||t instanceof Gt||MA(t))}function Dd(t,e,n){if(!av(n)||!z0(n)){const r=bl(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Vs(t,e,n){if((e=un(e))instanceof kd)return e._internalPath;if(typeof e=="string")return lv(t,e);throw pl("Field path arguments must be of type string or ",t,!1,void 0,n)}const TR=new RegExp("[~\\*/\\[\\]]");function lv(t,e,n){if(e.search(TR)>=0)throw pl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new kd(...e.split("."))._internalPath}catch{throw pl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pl(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new $(D.INVALID_ARGUMENT,l+t+u)}function uv(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{convertValue(e,n="none"){switch(sr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return cr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[al].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>be(a.doubleValue));return new Gt(n)}convertGeoPoint(e){return new ln(be(e.latitude),be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Dl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(po(e));default:return null}}convertTimestamp(e){const n=nr(e);return new ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=me.fromString(e);he(bA(r),9688,{name:e});const s=new mo(r.get(1),r.get(3)),i=new q(r.popFirst(5));return s.isEqual(n)||xn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv extends xR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new je(this.firestore,null,n)}}function eg(...t){return new Md("arrayUnion",t)}function wR(t){return new Ld("increment",t)}const tg="@firebase/firestore",ng="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new IR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Vs("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class IR extends hv{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vd{}class dv extends Vd{}function RR(t,e,...n){let r=[];e instanceof Vd&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof Ud).length,l=i.filter(u=>u instanceof Od).length;if(a>1||a>0&&l>0)throw new $(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Od extends dv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Od(e,n,r)}_apply(e){const n=this._parse(e);return fv(e._query,n),new Hr(e.firestore,e.converter,Zc(e._query,n))}_parse(e){const n=bd(e.firestore);return function(i,a,l,u,d,p,y){let g;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new $(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){ig(y,p);const C=[];for(const b of y)C.push(sg(u,i,b));g={arrayValue:{values:C}}}else g=sg(u,i,y)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||ig(y,p),g=ER(l,a,y,p==="in"||p==="not-in");return Oe.create(d,p,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Ud extends Vd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ud(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Wt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const u of l)fv(a,u),a=Zc(a,u)}(e._query,n),new Hr(e.firestore,e.converter,Zc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jd extends dv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jd(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new $(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new $(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yo(i,a)}(e._query,this._field,this._direction);return new Hr(e.firestore,e.converter,Yw(e._query,n))}}function SR(t,e="asc"){const n=e,r=Vs("orderBy",t);return jd._create(r,n)}function sg(t,e,n){if(typeof(n=un(n))=="string"){if(n==="")throw new $(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aA(e)&&n.indexOf("/")!==-1)throw new $(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(me.fromString(n));if(!q.isDocumentKey(r))throw new $(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gm(t,new q(r))}if(n instanceof je)return gm(t,n._key);throw new $(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bl(n)}.`)}function ig(t,e){if(!Array.isArray(t)||t.length===0)throw new $(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fv(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function PR(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Si{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cr extends hv{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ca(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Vs("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(D.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Cr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Cr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Cr._jsonSchema={type:Ue("string",Cr._jsonSchemaVersion),bundleSource:Ue("string","DocumentSnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class Ca extends Cr{data(e={}){return super.data(e)}}class Es{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Si(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ca(this._firestore,this._userDataWriter,r.key,r,new Si(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new Ca(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Si(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Ca(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Si(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,p=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),p=a.indexOf(l.doc.key)),{type:CR(l.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(D.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Es._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ad.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function CR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Es._jsonSchemaVersion="firestore/querySnapshot/1.0",Es._jsonSchema={type:Ue("string",Es._jsonSchemaVersion),bundleSource:Ue("string","QuerySnapshot"),bundleName:Ue("string"),bundle:Ue("string")};function _i(t,e,n,...r){t=Pr(t,je);const s=Pr(t.firestore,_o),i=bd(s);let a;return a=typeof(e=un(e))=="string"||e instanceof kd?_R(i,"updateDoc",t._key,e,n,r):vR(i,"updateDoc",t._key,e),pv(s,[a.toMutation(t._key,on.exists(!0))])}function og(t,e){const n=Pr(t.firestore,_o),r=Xr(t),s=PR(t.converter,e),i=bd(t.firestore);return pv(n,[yR(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}function kR(t,...e){var d,p,y;t=un(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||rg(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(rg(e[r])){const g=e[r];e[r]=(d=g.next)==null?void 0:d.bind(g),e[r+1]=(p=g.error)==null?void 0:p.bind(g),e[r+2]=(y=g.complete)==null?void 0:y.bind(g)}let i,a,l;if(t instanceof je)a=Pr(t.firestore,_o),l=fd(t._key.path),i={next:g=>{e[r]&&e[r](bR(a,t,g))},error:e[r+1],complete:e[r+2]};else{const g=Pr(t,Hr);a=Pr(g.firestore,_o),l=g._query;const R=new cv(a);i={next:C=>{e[r]&&e[r](new Es(a,R,g,C))},error:e[r+1],complete:e[r+2]},NR(t._query)}const u=rv(a);return aR(u,l,s,i)}function pv(t,e){const n=rv(t);return lR(n,e)}function bR(t,e,n){const r=n.docs.get(e._key),s=new cv(t);return new Cr(t,s,e._key,r,new Si(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){ow(Yx),sl(new co("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new _o(new uw(r.getProvider("auth-internal")),new dw(a,r.getProvider("app-check-internal")),Pw(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),As(tg,ng,e),As(tg,ng,"esm2020")})();const MR={apiKey:"AIzaSyBeVILObopCwtXjmvwF4yEK-7e4GHpDK4c",authDomain:"navigo-87763.firebaseapp.com",projectId:"navigo-87763",storageBucket:"navigo-87763.firebasestorage.app",messagingSenderId:"673907255197",appId:"1:673907255197:web:c61b88cad3ea149c787174",measurementId:"G-PN4XNZ8JSF"};let We;try{const t=b0(MR);We=dR(t)}catch{console.warn("Firebase not connected. Please update firebaseConfig.")}const LR=["THIRUVANANTHAPURAM","KOTTAYAM","ALUVA","VYTILLA HUB","THRISSUR","ERNAKULAM","ALAPPUZHA","KOTTARAKKARA","CHANGANASSERY","KOLLAM","THIRUVALLA","CHERTHALA","KOZHIKKODE","KAYAMKULAM","CHALAKUDY","KARUNAGAPPALLY","MUVATTUPUZHA","ANKAMALY","ATTINGAL","NEYYATTINKARA","THRIPPUNITHURA","NEDUMANGAD","ADOOR","ETTUMANOOR","TRIVANDRUM","PUTHUKKAD","VENJARAMOODU","CHENGANNUR","PALA","KATTAKKADA","PERUMBAVOOR","KANIYAPURAM","KILIMANOOR","PUNALUR","PATHANAMTHITTA","OACHIRA","PALAKKAD","NORTH PARAVOOR","HARIPPAD","KANJIRAPALLY","CHATHANNOOR","CHADAYAMANGALAM","PAPPANAMCODE","AYOOR","BALARAMAPURAM","PANDALAM","MANANTHAVADY","KALPETTA","KOTTIYAM","KUNNAMKULAM","AMBALAPPUZHA","KOOTHATTUKULAM","THAMARASSERY","BANGALORE","PARASSALA","EDAPPAL","MEDICAL COLLEGE THIRUVANANTHAPURAM","MUNDAKKAYAM","THODUPUZHA","PONKUNNAM","KAZHAKKOOTTAM","KASARAGOD","KOTTAKKAL","KALIYIKKAVILA","CHAVARA","KUNDARA","KODUNGALLUR","GURUVAYOOR","EAST FORT","POOVAR","KUNNAMANGALAM","CHINNAKKADA","AROOR","KUTTIPPURAM","ERAMALLOOR","THURAVOOR","VAIKKOM","ERNAKULAM JETTY","PATTOM","VIZHINJAM","PATHANAPURAM","EDAPALLI BYE-PASS JN","ERATTUPETTA","ATHANI","CALICUT UNIVERSITY","PEROORKADA","KOZHENCHERRY","THALAYOLAPARAMBU","VARAPPUZHA","KOONAMMAVU","ADIVAARAM","PERINTHALMANNA","SREEKARYAM","VADANAPPALLY","KUTHIYATHODE","KOLENCHERY","KARICODE","ERUMELY","KANHANGAD","KANNUR","EZHUKONE","KARAKULAM","AMBALLUR","PUTHENKURISH","CHAVAKKAD","SULTAN BATHERY","PEYAD","POTHENCODE","PUTHENPALAM","THIRUMALA","KARETTU","VALANCHERY","KALAMASSERY","VELLARADA","VADAKKENCHERRY","KUNDANOOR","VANDANAM MEDICAL COLLEGE","PARIPPALLY","PIRAVOM","MARAMPALLY","KODAKARA","CHINGAVANAM","ANCHAL","THRIPRAYAR","KODUVALLY","VELLANAD","KARAKONAM","MATHILAKAM","MOONUPEEDIKA","CHULLIMANOOR","ARYANAD","UDIYANKULANGARA","KOTHAMANGALAM","ALAMCODE","MANGALAPURAM","VEMBAYAM","KALLAMBALAM","MUKKOLA","KUTTIKKANAM","PAMPADY","ALATHUR","EDATHUVA","VALAKOM","KUZHALMANNAM","OLLUR","VADAKARA","THALASSERY","ANGAMALY","THIRUVALLOM","RAMANATTUKARA","BHARANAMGANAM","KATTAPPANA","KUNNIKODE","KONNI","PANAMARAM","RANNY","THIRUVANKULAM","ENGAPUZHA","KOVALAM","PALODE","K.CHAPPATH","AZHAKULAM","KOZHIKODE","KARUKACHAL","MARANALLOOR","KUMILY","MALAYINKEEZH","KALLARA","POOVACHAL","KALLUVATHUKKAL","KURAVILANGAD","VYTHIRI","MAVELIKKARA","MALAPPURAM","CHAKKULATHUKAVU","THACHOTTU KAVU","RAMANKARI","KOILANDI","VITHURA","KAKKANAD","THOTTAPPALLY","MONCOMBU","KANJIKKUZHY","KORATTY","KALOOR","KANJIRAMKULAM","NILAMEL","NEDUMUDY","MANNARKAD","MALLAPPALLY","THENMALA","KOTTAPURAM","PONNANI","KARUKUTTY","KALAVOOR","NILAMBUR","PATTAMBI","KIDANGARA","LAKKIDI","MEENANGADI","KONDOTTY","PANACHAMOODU","KADUTHURUTHY","VAMANAPURAM","ELANTHOOR","MANNUTHY","KAMBALAKKAD","THOPPUMPADY","MYSORE","BHARANIKKAVU","KUTTICHAL","VANDIPERIYAR","MUHAMMA","PUTHIYATHURA","MANGALORE","KADAKKAL","PEERMEDU","KANJIRAMATTOM","KULATHUPUZHA","UCHAKADA","KIDANGOOR","MAHE","POOTHOTTA","PATTIKKAD","PUTHUKAD","CHARUMMOODU","ELAMBAL","VATTAPPARA","OLATHANI","MADATHARA","THALAPPAADI","WALAYAR","COIMBATORE","MUTTOM","KALLADIKODE","PAYYANNUR","ENATH","THOTTILPALAM","THAKAZHY","UZHAMALAKKAL","KESAVADASAPURAM","MALA","OTTASEKHARAMANGALAM","PAZHAYAKADA","MANJESHWAR","TIRUR","THALIPARAMBA","UPPALA","NELLIMOODU","ARANMULA","THANNEERMUKKOM","KURUPPANTHARA","KUMBLA","KUTTIADY","OORUTTAMBALAM","KALLISSERY","MANNANCHERY","MANJERI","MANDAPATHINKADAVU","KURAMPALA","MUNDUR","CHERUVATHOOR","EDAKOCHI","CHETTIKULANGARA","MARTHANDAM","ELAPPARA","ULLIYERI","UZHAVOOR","THATTATHUMALA","THEKKADA","TVM GENERAL HOSPITAL","IRINJALAKUDA","UCHAKKADA","SASTHAMKOTTA","KALLIKKAD","NEELESWARAM","KURUPPAMPADY","NAGERCOVIL","MARAKKULAM","CHAKKA","CHENGANNUR RS","OORAMBU","KARAKKAD","MOOLAMATTOM","VARKALA","MANOOR","PERUMATHURA","CHENKAVILA","CHAMRAVATTOM","MUNNAR","VAZHIKKADAVU","NERIAMANGALAM","KUTTIPURAM","THENKASI","POOYAPPALLY","PULLAD","THIRUVAMBADY","MURUKKUMPUZHA","KALAYAPURAM","KUMARAKOM","KARUNAGAPPALLI","ERAVIPEROOR","RAMAPURAM","AMBALAPUZHA","VENJARAMMOODU","ARYANKAVU","PERAMBRA","CHIRAYINKEEZHU","NEDUMKANDAM","NANNIYODE","ADIMALY","PUTHUKURICHY","ANCHALUMMOODU","ARAKKUNNAM","PAIKA","COIMBATORE UKKADAM","KATTANAM","THOLICODE","CHERAI","CHERUTHONI","KUMARAMPUTHUR","THANNEERMUKKOM","NADAKKAVU","MUKKAM","NATTUKAL","NOORANADU","VYPIN","PAZHAKULAM","DHANUVACHAPURAM","NJARACKAL","SHENKOTTAI","MUNDELA","PARIYAARAM","HARIPAD","KOTTAYAM MCH","VILAPPILSALA","ATHIKKATTUKULANGARA","ARUMANOOR","KARIVELLUR","BEKAL","MAKKARAPARAMBA","OYOOR","MANNAR","NELLIKUNNAM","SASTHAMANGALAM","PALLIKKAL","HIGH COURT","OTTAPALAM","VATTIYOORKAVU","CHEMBOOR","ATHOLI","PUTHUPPALLY","CHITTUMALA","MARAYAMUTTOM","VENNIKULAM","THALAYAZHAM","KADAMPANAD","MANIMALA","CHAMPAKULAM","ELATHUR","PUTHOOR","PUTHANANGADY","ERUTHAVOOR","THALAPPUZHA","PULPALLY","IRINCHAYAM","POLLACHI","ANCHALPETTY","CHUNGATHARA","VENGANOOR","YEROOR","ELANJI","KALLODY","MUKKOOTTUTHARA","KOKKADU","KURUMASSERY","KIZHAKKAMBALAM","KATTIKULAM","PAYYOLI","AIMS HOSPITAL","VARANAD","PARAMBATH","EDAKKARA","KARAVALOOR","ARUVIKKARA","KOZHIKODE UNIVERSITY","NAGAROOR","KAVALAM","PARAPPANANGADI","PATHIRIPPALA","URAKAM","PAPPINISSERI","PERAYAM","THEKKUMBHAGAM","NADUVANNUR","CHANGARAMKULAM","THEMPAMMOODU","VEEYAPURAM","KANNANALLOOR","VELLAMUNDA","PATTAZHY","TANUR","PERUMKADAVILA","BALUSSERY","THEVARA","CHITHARA","ODANAVATTOM","PATTIMATTOM","NEYYAR DAM","KOOTTANAD","VELIYAM","KARUNAGAPALLY","PULINKUNNU","VELLANGALLUR","HMT KALAMASSERY","KALLAR","IRITTY","PADAPPANAL","VAZHICHAL","MITHIRMALA","KOZHINJAMPARA","MANNAMKONAM","CHOONDY","ANNAMANADA","KADINAMKULAM","MUTHUVILA","PANAVOOR","PEREKONAM","EDAVANNA","OONNUKAL","KOOVAPPALLY","MONIPPALLY","KOLLAM CIVIL STATION","KUNNATHUR","CHOTTANIKARA","MOOZHY","PERINGAMMALA","KAMUKINCODE","THALACHIRA","WANDOOR","PUNNAMOODU","KOZHIKKODE MCH","POZHIYOOR","ANDOORKONAM","PAKALKURI","POONJAR","ANACHAL","AYATHIL","ASHTAMICHIRA","NIRAVILPUZHA","KUTTAMASSERY","EDAMON","THAMARAKULAM","AMBALAMKUNNU","CHALAKKUDY","PERUVA","AROOKUTTY","GOPALAPURAM","VAZHAKULAM","ELAVUMTHITTA","AREACODE","AMBOORI","KAROOR","CHITTOOR","MEEYANNOOR","NEDUMBASSERY AIRPORT","CHERKALA","NIT CALICUT","KADAPUZHA","ELAMKADU","POONOOR","ILLIKKAL","OLAVAKODE","EDAKKAD","ALUR","NADAVAYAL","OMASSERY","PAMBAVALLEY","PANDIKKAD","CHALLIMUKKU","MEPPADI","KAVANATTINKARA","KALADY","MARANGATTUPALLY","THOTTAKKAD","CHELACHUVADU","PUDUNAGARAM","SHORNUR","KOOTTAPPU","VELI","VALLUVAMBRAM","BEENACHI","MANJANIKKARA","ARYANCODE","CHERUPUZHA","VADASSERIKKARA","PLAMOOTTUKADA","KULAMAVU","ANAKKAMPOYIL","TEEKOY","UPPUTHARA","THOOKKUPALAM","NELLAD","PANGODU","GUNDULPET","POOVATHUSSERY","PAIPAD","KUDAPPANAMOODU","MARYKULAM","ANAYADI","KULATHOOR HS","CHATHANAD","MARAPPALAM","CHUNKAPPARA","NANJANGUD","KENGERI","KOODAL","KUNNAMTHANAM","PULLURAMPARA","POOCHAKKAL","CHERIYAKONNI","PARA","MOOLITHODU","KUTTA COORG","KODunGOOR","UPPUKANDAM","THOLPETTY","KAYAMKULAM RS","KANJAR","VALAT","MEENKUNNAM","AYIRAMTHENGU","THAMARAKUDY","KOZHIKKOD UNIVERSITY","ALL SAINTS COLLEGE","CHOZHIYAKODU","NELLIMATTOM","KALLOOPPARA","MANDYA","KAKKATTIL","KOTTOOR","PERINGAMALA","CHAKKUVARAKKAL","NADAPURAM","AZHEEKKAL","CHUNAKKARA","PALAPPETTY","KORUTHODU","KOLLAPALLY","CHERIAZHEEKKAL","VALLIKKUNNU","PALLICKATHODU","PERUMBALAM","DASANAKKARA","PAKKOM","PAINGOTTOOR","PUTHUSSERY","SALEM","VELIYANNOOR","KENICHIRA","KANJIRAPPALLY","UMMANNOOR","KUZHIMAVU","PADINJARETHARA","MUTHUKULAM","BHAGAVATHIPURAM","ANAPPARA","ARATTUPUZHA","VLATHANKARA","WADAKKANCHERY","POOZHIKUNNU","NARUVAMOODU","ARTHUNKAL","PUTHUPPADY","RAMANAGARA","KOTTIYOOR","CHANNAPATTANA","SRIRANGAPATNA","KRISHNAN KOTTA","KRISHNAPURAM","AMBAYATHODE","KATTILKADAVU","MADDUR","MEDICAL COLLEGE ERNAKULAM","THRIKKUNNAPPUZHA","THUMPODU","KIDANGANNOOR","PERAVOOR","PARAVUR","VALLIKKAVU","KOOTHUPARAMBA","BHARATHANOOR","VAGAMON","KAZHUTHURUTTY","KARIMBAN","POOZHANADU","KOLLAKADAVU","KEEZHAROOR","KAINAKARY","KOODARANJI","CHENAPPADY","MULLERIA","NENMARA","PALIYODU","PARAYAKADAVU","CHELLANAM","PATHARAM","KOCHEEDA JETTY","SULLIA","PUTHentHOPE","THULAPPALLY","PALLITHURA","NANMINDA","MALAYALAPUZHA","THIRUVANIYOOR","VALAVOOR","KAKKAYANGAD","CHEPRA","EZHUMATTOOR","AYARKUNNAM","JALSOOR","MEENANKAL","VETTIKKAL","KODALY","THADIYAMPAD","PALANI","MATTANNUR","MANEED","POYYA","VYTTILA HUB","ERATTAYAR","INFOPARK","KUMBALAM","ANDHAKARANAZHY","LABBAKKADA","MALIANKARA","MAKKIYAD","MULAYARA","MEENAKSHIPURAM","ARAYANKAVU","TALIPARAMBA","KARIMUGHAL","PAYYANUR","ERUMELI","VELLIKULANGARA","CALICUT AIRPORT","ALAKKODE","KOLLENGODE","ARUVIPPURAM","KONGAD","THENNOOR","MARAYOOR","OTHERA","PAVUMBA","KOZHUVALLOOR","KAKKODI","KANICHUKULANGARA","CHITTAR","CHERPULASSERY","BADIYADKA","CHOORALMALA","PRAKKULAM","MURIKKASSERY","MANARCADU","NADUKANI","MULAGUNNATHUKAVU","ALUMKADAVU","AANAPPARA","HOSUR","CHEMPAZHANTHY","THAMBALAKKADU","GUDALLUR","VENKODE","ADIMALI","PUNALAL","SULTHAN BATHERY","PERLA","ORKKATTERI","KOTTAVASAL","PANAYAMUTTAM","SEETHATHODE","VILAKKUPARA","MUPLIYAM","CHITTARIKKAL","ERAVATHOOR","MELATTUMOOZHY","VELLARIKUND","PERIKKALLOOR","PUTTUR","POTHANICAD","PUTHUKKULAM","EDAKKUNNAM","PUNCHAVAYAL","THENGAMAM","PUTHUVELI","PANACODE","CHENNAI","VENMONY","SHORANUR","KOOMBARA","POINACHY","KOLOTH JETTY","ANGAMOOZHY","PAMBA","VETTICHIRA","CUMBUMMETTU","UDUMALPET","THACHAMPARA","SARADKA","PERUNAD","PADAPPAKKARA","KOLAHALAMEDU","THURUTHIPURAM","GUDALUR","VECHOOCHIRA","PANNIYODE","CHELAKKARA","THIRUVANVANDOOR","KAPPIL","ADIMALATHURA","KURUVILANGADU","POREDAM","THENI","ALAKODE","KOORACHUNDU","FEROKE","KOTTAVATTOM","THOPRAMKUDY","KANNAMMOOLA","KARAVUR","NEDUMPOIL","KRISHNAN KOTTA","BALAGRAM","DEVIKULAM","NEDUMBASSERY","NEDUMANKAVU","VANNAPURAM","PARAVOOR NORTH","KUNNAMKERY","POOVATTOOR","RAJAKKAD","MUTHAPPANPUZHA","VENGODE","KASARGODE","CHEMBAKAPPARA","BAVALI","KARITHOTTA","KUTTAMALA","VADUVANCHAL","KOPPAM","PAYYAVOOR","PARUTHIKUZHY","HUNSUR","VELIYANAD","PARAPPIL","MUTTAR","POOPPARA","VAZHITHALA","TVM CIVIL STATION","KODUVAYUR","SECRETARIAT","NEDUVANNOOR","MALAMPUZHA","KURUTHANCODE","KAMUKUMCHERY","VELLUMANNADI","MOONNANAKUZHY","PANAMBUKADU","MOOKKANNUR","VANDANMEDU","TECHNOPARK","KOTHAD FERRY","CHEEKKAL KADAVU","THATHAPPILLY","SENKOTTAI","GONIKOPPAL","MYLACHAL","KADAMMANITTA","KAVUMANNAM","TV PURAM","KOOTTALIDA","KADALUNDI","CHETTACHAL","KONNAKUZHY","UDUPI","THOLANUR","VELLANATHURUTHU","CHAMAMPATHAL","VENPAKAL","THADICADU","BHEEMANADY","PANTHA","PARUMALA","MANNADY","EDAVA","PUNKULAM","THYCATTUSSERY","NALANCHIRA","CHOONAD","PERUMON","THIDANAD","KODENCHERY","THERTHALLY","POOMALA","ORAVACKAL","PACHAMALA","THURAYIL KADAVU","PARANDODE","MOOTHEDATHUKAVU","PUNNAKULAM","KOOROPPADA","NALKAVALA","KOYILANDY","MADURAI","ADIVARAM","PAINAVU","PERUVANTHANAM","UNDAPPARA","VETTILAPPARA","CHULLIYODE","NARIKKUNNI","ASHTAMUDI","CVR PURAM","CHANNAPETTA","VALIAZHEEKAL","KANYAKUMARI","ATTUKAL TEMPLE","MANAVARY","MULANTHURUTHY","VENNIYODE","VALLIKUNNAM","VENMANY","504 COLONY","KODANKARA","KARIMBIL","PARIPPU","MUTHOLY","CHERAMBADI","KOKKUNNU","KAVALAM","KOLLADU BOAT JETTY","KUTTIYANI","KULATHOORMOZHY","THEKKADY","KUMMALLOOR","OOTY","VELIYATHUNADU","THAYAMKARI","ERODE","NILAKKAL","CHANGUVETTY","KARUVANCHAL","VALIYAPERUMPUZHA","PONMUDI","THANKAMANI","POOVAMPALLY","THADIYOOR","POOKKATTUPADY","ELOOR","MAYAM","AGRIFARM","KAPPUKAD","KONGORPILLY","THANDIRIKKAL","KALLARKUTTY","CHEPPILODE","VELLARIKUNDU","CHEMBIRIKA","DEVALA","ERNAKULAM SOUTH","THIRUVILWAMALA","GOVINDAPURAM","BAIRAKUPPA","SHANTINAGAR","THADICADU","KAREEPRA","THIRUNELLI TEMPLE","IDUKKI","KEERUKUZHI","ULLOOR","LAHA","RAJAKUMARI","KALADY PLANTATION","VARKALA SIVAGIRI","ADIVAD","MANJAPRA","VADAKKANCHERY","KUZHITHOLU","PANDAPILLY","GOKULAM MCH","THALOOR","SREEKANDAPURAM","PUTHANATHAANI","MANNATHOOR","PADANILAM","EDAPPALLY","MADIWALA ST JOHN","AGALY","VELIYAMCODE","THAVALAM","KAMBISSERY","KUTHIRAVATTOM","PANDIKKAD","PERINTHALMANNA","CHANDAKUNNU"],DR=[...new Set(LR)],VR=[],$i=t=>{if(!t)return"";if(t.includes("AM")||t.includes("PM"))return t;const[e,n]=t.split(":"),r=parseInt(e,10),s=r>=12?"PM":"AM";return`${r%12||12}:${n} ${s}`},OR=t=>{if(!t)return-1;let e=0,n=0;if(t.includes("AM")||t.includes("PM")){const r=t.match(/(\d+):(\d+)\s*(AM|PM)/i);r&&(e=parseInt(r[1],10),n=parseInt(r[2],10),r[3].toUpperCase()==="PM"&&e!==12&&(e+=12),r[3].toUpperCase()==="AM"&&e===12&&(e=0))}else{const r=t.split(":");r.length>=2&&(e=parseInt(r[0],10),n=parseInt(r[1],10))}return e*60+n},ml=(t,e="Private")=>{const n=parseFloat(t);if(!n||isNaN(n)||n<=0)return null;let r=0;return e==="KSRTC"||e==="Swift"||e==="SuperFast"?r=Math.max(14,Math.ceil(n*1.45)):r=Math.max(10,Math.ceil(n*1.1)),r},UR=(t,e={})=>t==="home"?{"@context":"https://schema.org","@type":"WebSite",name:"KeralaBuses.in",url:"https://keralabuses.in",description:"Find accurate bus timings for Kerala Private and KSRTC buses.",potentialAction:{"@type":"SearchAction",target:"https://keralabuses.in/#/search/{search_term_string}","query-input":"required name=search_term_string"}}:t==="bus"&&e?{"@context":"https://schema.org","@type":"BusTrip",provider:{"@type":"Organization",name:e.type},departureTime:e.time,arrivalStation:{"@type":"BusStation",name:e.to},departureStation:{"@type":"BusStation",name:e.from},name:`${e.name} - ${e.route}`}:null,jR=({toasts:t})=>h.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:t.map(e=>h.jsxs("div",{className:`pointer-events-auto flex items-center gap-3 px-4 py-3 rounded-xl shadow-lg transform transition-all duration-300 animate-slide-up ${e.type==="success"?"bg-teal-900 text-white":e.type==="error"?"bg-red-600 text-white":"bg-white text-gray-800 border border-gray-100"}`,children:[e.type==="success"?h.jsx(NE,{size:18,className:"text-teal-400"}):e.type==="error"?h.jsx(_0,{size:18}):h.jsx(T0,{size:18,className:"text-blue-500"}),h.jsx("span",{className:"text-sm font-medium",children:e.message})]},e.id))}),KR=()=>{const t=[yT,AT,vT,_T],[e,n]=ne.useState(0);return ne.useEffect(()=>{const r=setInterval(()=>{n(s=>(s+1)%t.length)},5e3);return()=>clearInterval(r)},[]),h.jsxs("div",{className:"relative w-full h-40 md:h-64 rounded-2xl overflow-hidden mb-8 shadow-md group bg-gray-200",children:[t.map((r,s)=>h.jsx("div",{className:`absolute inset-0 transition-opacity duration-1000 ${s===e?"opacity-100":"opacity-0"}`,children:h.jsx("img",{src:r,alt:"Kerala Bus",className:"w-full h-full object-cover"})},s)),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),h.jsxs("div",{className:"absolute bottom-6 left-6 text-white max-w-lg z-10",children:[h.jsx("h2",{className:"text-2xl font-bold mb-1 drop-shadow-md",children:"Explore Kerala by Bus"}),h.jsx("p",{className:"text-sm opacity-90 drop-shadow-sm",children:"Find timings for KSRTC & Private buses instantly."})]}),h.jsx("div",{className:"absolute bottom-4 right-6 flex justify-center gap-2 z-10",children:t.map((r,s)=>h.jsx("button",{onClick:()=>n(s),className:`h-2 rounded-full transition-all duration-300 shadow-sm ${s===e?"bg-white w-6":"bg-white/50 w-2"}`},s))})]})},FR=({type:t,onBack:e})=>{const n={about:{title:"About Us",body:h.jsxs(h.Fragment,{children:[h.jsx("p",{className:"mb-4",children:"KeralaBuses.in is a pioneering community-driven platform dedicated to digitizing the public transport network of Kerala."}),h.jsx("h4",{className:"font-bold text-lg text-gray-800 mt-6 mb-2",children:"Our Mission"}),h.jsx("p",{className:"mb-4",children:"To bridge the gap between passengers and bus schedules by providing a reliable, user-updated database of KSRTC and Private bus timings."}),h.jsx("h4",{className:"font-bold text-lg text-gray-800 mt-6 mb-2",children:"Who We Are"}),h.jsx("p",{className:"mb-4",children:"We are a team of passionate developers and transport enthusiasts who believe that information should be accessible to everyone. We are not affiliated with the government but work tirelessly to ensure the data is as accurate as possible through community verification."}),h.jsx("h4",{className:"font-bold text-lg text-gray-800 mt-6 mb-2",children:"Why Use KeralaBuses.in?"}),h.jsxs("ul",{className:"list-disc pl-5 space-y-2 text-sm",children:[h.jsx("li",{children:"Real-time updates from fellow passengers."}),h.jsx("li",{children:"Comprehensive coverage of rural and urban routes."}),h.jsx("li",{children:"Dedicated support for students and daily commuters."}),h.jsx("li",{children:"AdSense-friendly, fast, and secure platform."})]})]})},contact:{title:"Contact Support",body:h.jsxs(h.Fragment,{children:[h.jsx("p",{className:"mb-6",children:"We value your feedback and are here to assist you with any queries."}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[h.jsx("h5",{className:"font-bold text-teal-700 mb-2",children:"General Inquiries"}),h.jsxs("p",{className:"text-sm",children:["Email: ",h.jsx("a",{href:"mailto:support@keralabuses.in",className:"text-blue-600 hover:underline",children:"support@keralabuses.in"})]}),h.jsx("p",{className:"text-sm",children:"Phone: +91 80866 16247"})]}),h.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-100",children:[h.jsx("h5",{className:"font-bold text-green-700 mb-2",children:"WhatsApp Support"}),h.jsxs("p",{className:"text-sm",children:["Join our community or chat with admin: ",h.jsx("span",{className:"font-mono font-bold",children:"+91 80866 16247"})]})]}),h.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[h.jsx("h5",{className:"font-bold text-gray-700 mb-2",children:"Office Address"}),h.jsxs("p",{className:"text-sm text-gray-600",children:["KeralaBuses Tech Labs,",h.jsx("br",{}),"Infopark Campus,",h.jsx("br",{}),"Malappuram, Kerala, 676505"]})]})]})]})},privacy:{title:"Privacy Policy",body:h.jsxs(h.Fragment,{children:[h.jsx("p",{className:"text-xs text-gray-400 mb-6 uppercase tracking-wide font-bold",children:"Effective Date: January 1, 2026"}),h.jsx("h4",{className:"font-bold text-lg text-gray-800 mt-6 mb-2",children:"1. Information We Collect"}),h.jsx("p",{className:"mb-4 text-sm",children:"We collect minimal data to provide our services. This includes:"}),h.jsxs("ul",{className:"list-disc pl-5 mb-4 space-y-1 text-sm",children:[h.jsx("li",{children:"Information you voluntarily provide (e.g., bus timings, comments)."}),h.jsx("li",{children:"Non-personal data via cookies for analytics (Google Analytics) and ad personalization (Google AdSense)."})]}),h.jsx("h4",{className:"font-bold text-lg text-gray-800 mt-6 mb-2",children:"2. Cookies & Third-Party Advertisements"}),h.jsxs("ul",{className:"list-disc pl-5 mb-4 space-y-1 text-sm",children:[h.jsx("li",{children:"Third-party vendors, including Google, use cookies to serve ads based on your prior visits to our website or other websites."}),h.jsx("li",{children:"Google's use of advertising cookies enables it and its partners to serve ads to you based on your visit to our sites and/or other sites on the Internet."}),h.jsx("li",{children:"You may opt-out of personalized advertising by visiting Ads Settings."})]}),h.jsx("h4",{className:"font-bold text-lg text-gray-800 mt-6 mb-2",children:"3. Data Usage"}),h.jsx("p",{className:"mb-4 text-sm",children:"Your data is used to:"}),h.jsxs("ul",{className:"list-disc pl-5 mb-4 space-y-1 text-sm",children:[h.jsx("li",{children:"Improve route accuracy."}),h.jsx("li",{children:"Prevent spam and abuse."}),h.jsx("li",{children:"Analyze traffic trends to enhance user experience."})]}),h.jsx("h4",{className:"font-bold text-lg text-gray-800 mt-6 mb-2",children:"4. Data Protection"}),h.jsx("p",{className:"text-sm",children:"We implement industry-standard security measures to protect your data. We do not sell your personal information to third parties."})]})},terms:{title:"Terms of Service",body:h.jsxs(h.Fragment,{children:[h.jsx("h4",{className:"font-bold text-lg text-gray-800 mt-4 mb-2",children:"1. Acceptance of Terms"}),h.jsx("p",{className:"mb-4 text-sm",children:"By accessing KeralaBuses.in, you agree to be bound by these terms."}),h.jsx("h4",{className:"font-bold text-lg text-gray-800 mt-6 mb-2",children:"2. Accuracy of Information"}),h.jsx("p",{className:"mb-4 text-sm",children:"This website is a community-driven platform. While we strive for accuracy, bus timings are subject to change by operators without notice. We are not liable for any loss, delay, or inconvenience caused by reliance on this information."}),h.jsx("h4",{className:"font-bold text-lg text-gray-800 mt-6 mb-2",children:"3. User Contributions"}),h.jsx("p",{className:"mb-4 text-sm",children:"Users are responsible for the accuracy of the data they contribute. Malicious or false data entry will result in a ban."}),h.jsx("h4",{className:"font-bold text-lg text-gray-800 mt-6 mb-2",children:"4. Intellectual Property"}),h.jsx("p",{className:"mb-4 text-sm",children:"The content, layout, and code of this website are the property of KeralaBuses.in."})]})},disclaimer:{title:"Disclaimer",body:h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"bg-red-50 border border-red-100 p-4 rounded-xl mb-6",children:[h.jsxs("h5",{className:"font-bold text-red-700 flex items-center gap-2 mb-2 text-sm",children:[h.jsx(Kc,{size:18})," Not an Official Government Website"]}),h.jsxs("p",{className:"text-red-600 text-xs leading-relaxed",children:["KeralaBuses.in is a privately maintained, community-driven informational portal. We are ",h.jsx("strong",{children:"NOT"})," affiliated, associated, authorized, endorsed by, or in any way officially connected with the Kerala State Road Transport Corporation (KSRTC), the Motor Vehicles Department (MVD), or any government agency."]})]}),h.jsx("h4",{className:"font-bold text-lg text-gray-800 mt-6 mb-2",children:"Data Accuracy"}),h.jsx("p",{className:"mb-4 text-sm",children:"All bus timings, fares, and routes are based on user contributions and public data. Schedules are subject to change due to traffic, weather, strikes, or operator decisions."}),h.jsx("h4",{className:"font-bold text-lg text-gray-800 mt-6 mb-2",children:"Liability"}),h.jsx("p",{className:"text-sm",children:"We recommend verifying critical travel details with the respective bus stations or official enquiry counters. KeralaBuses.in and its maintainers shall not be held liable for any direct, indirect, or consequential damages arising from the use of this website."})]})}},r=n[t]||n.about;return h.jsxs("div",{className:"animate-[fadeIn_0.3s_ease-out_forwards] bg-white p-8 rounded-2xl border border-gray-100 shadow-sm min-h-[60vh]",children:[h.jsxs("button",{onClick:e,className:"text-teal-600 font-bold text-sm flex items-center gap-1 mb-8 hover:underline",children:[h.jsx(ji,{className:"rotate-180",size:18})," Back to Home"]}),h.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 mb-6",children:r.title}),h.jsx("div",{className:"prose prose-sm text-gray-600 leading-relaxed",children:r.body})]})},HR=({setView:t,onQuickSearch:e})=>h.jsx("footer",{className:"bg-white border-t border-gray-100 mt-12 py-10",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx("div",{className:"bg-teal-600 text-white p-1.5 rounded-lg",children:h.jsx(Ui,{size:18})}),h.jsx("span",{className:"text-lg font-bold text-gray-800",children:"KeralaBuses.in"})]}),h.jsx("p",{className:"text-xs text-gray-500 leading-relaxed mb-4",children:"Kerala's largest community-driven public transport network. Find KSRTC and Private bus timings, stops, and routes easily."})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-gray-800 text-sm mb-4",children:"Quick Links"}),h.jsxs("ul",{className:"space-y-2 text-xs text-gray-500",children:[h.jsx("li",{onClick:()=>t("about"),className:"hover:text-teal-600 cursor-pointer",children:"About Us"}),h.jsx("li",{onClick:()=>t("contact"),className:"hover:text-teal-600 cursor-pointer",children:"Contact Support"}),h.jsx("li",{className:"hover:text-teal-600 cursor-pointer",children:h.jsx("a",{href:"https://chat.whatsapp.com/KhSr7LeSW503yXSGqJW8YZ",target:"_blank",children:"Join WhatsApp"})}),h.jsx("li",{onClick:()=>t("contact"),className:"hover:text-teal-600 cursor-pointer",children:"Report Issue"})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-gray-800 text-sm mb-4",children:"Legal & Policy"}),h.jsxs("ul",{className:"space-y-2 text-xs text-gray-500",children:[h.jsxs("li",{onClick:()=>t("terms"),className:"hover:text-teal-600 cursor-pointer flex items-center gap-1",children:[h.jsx(bE,{size:12})," Terms of Service"]}),h.jsxs("li",{onClick:()=>t("privacy"),className:"hover:text-teal-600 cursor-pointer flex items-center gap-1",children:[h.jsx(OE,{size:12})," Privacy Policy"]}),h.jsxs("li",{onClick:()=>t("disclaimer"),className:"hover:text-teal-600 cursor-pointer flex items-center gap-1",children:[h.jsx(_0,{size:12})," Disclaimer"]}),h.jsx("li",{onClick:()=>t("privacy"),className:"hover:text-teal-600 cursor-pointer",children:"Cookie Policy"})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-gray-800 text-sm mb-4",children:"Popular Routes"}),h.jsx("div",{className:"flex flex-wrap gap-1.5",children:["Kozhikode","Manjeri","Thrissur","Palakkad","Kannur","Aluva"].map(n=>h.jsxs("span",{onClick:()=>e(n),className:"text-[10px] bg-gray-50 text-gray-500 px-2 py-1 rounded border border-gray-100 hover:bg-teal-50 hover:text-teal-600 hover:border-teal-200 cursor-pointer transition-all",children:["Bus to ",n]},n))})]})]}),h.jsxs("div",{className:"border-t border-gray-100 pt-8 text-center md:text-left flex flex-col md:flex-row justify-between items-center gap-4",children:[h.jsx("p",{className:"text-[10px] text-gray-400",children:" 2026 KeralaBuses.in. All rights reserved. Not affiliated with KSRTC."}),h.jsxs("p",{className:"text-[10px] text-gray-400 max-w-md text-justify md:text-right",children:[h.jsx("strong",{children:"Disclaimer:"})," Timings shown are based on user contributions and may vary. Please verify with official enquiry counters before travel. We are not responsible for missed buses or schedule changes."]})]})]})}),BR=({setView:t,toggleMenu:e})=>h.jsx("nav",{className:"bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"flex justify-between h-18 items-center py-2",children:[h.jsxs("div",{className:"flex items-center cursor-pointer gap-2",onClick:()=>{window.location.hash="",t("home")},children:[h.jsx("div",{className:"bg-gradient-to-br from-teal-600 to-teal-800 p-2.5 rounded-xl text-white shadow-lg transform hover:scale-105 transition-transform",children:h.jsx(Ui,{size:28})}),h.jsxs("div",{className:"flex flex-col",children:[h.jsxs("span",{className:"text-2xl font-extrabold text-gray-800 tracking-tight leading-none",children:["keralabuses",h.jsx("span",{className:"text-teal-600",children:".in"})]}),h.jsx("span",{className:"text-[10px] text-gray-500 font-medium tracking-wide uppercase",children:"Community Bus Network"})]})]}),h.jsxs("div",{className:"hidden md:flex space-x-2",children:[h.jsx("button",{onClick:()=>{window.location.hash="",t("home")},className:"px-4 py-2 text-sm font-bold text-gray-600 hover:text-teal-700 hover:bg-teal-50 rounded-xl transition-all",children:"Home"}),h.jsx("button",{onClick:()=>t("ksrtc"),className:"px-4 py-2 text-sm font-bold text-gray-600 hover:text-teal-700 hover:bg-teal-50 rounded-xl transition-all",children:"KSRTC Timings"}),h.jsx("button",{onClick:()=>t("private"),className:"px-4 py-2 text-sm font-bold text-gray-600 hover:text-teal-700 hover:bg-teal-50 rounded-xl transition-all",children:"Private Stand"}),h.jsx("a",{href:"https://blog.keralabuses.in",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 text-sm font-bold text-gray-600 hover:text-teal-700 hover:bg-teal-50 rounded-xl transition-all",children:"Blog"})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("button",{onClick:()=>t("add-bus"),className:"bg-teal-600 text-white px-4 py-2.5 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-teal-700 shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5 hidden sm:flex",children:[h.jsx(x0,{size:18})," ",h.jsx("span",{className:"hidden sm:inline",children:"Add Bus"})]}),h.jsx("button",{className:"md:hidden p-2 text-gray-600 hover:bg-gray-100 rounded-lg",onClick:e,children:h.jsx(BE,{size:24})})]})]})})}),zR=({isOpen:t,setView:e,closeMenu:n})=>t?h.jsx("div",{className:"fixed inset-0 z-40 bg-white pt-24 px-6 md:hidden animate-fade-in",children:h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsx("button",{onClick:()=>{e("home"),n()},className:"text-left text-lg font-bold text-gray-800 py-3 border-b border-gray-100",children:"Home"}),h.jsx("button",{onClick:()=>{e("ksrtc"),n()},className:"text-left text-lg font-bold text-gray-800 py-3 border-b border-gray-100",children:"KSRTC Timings"}),h.jsx("button",{onClick:()=>{e("private"),n()},className:"text-left text-lg font-bold text-gray-800 py-3 border-b border-gray-100",children:"Private Stand"}),h.jsx("a",{href:"https://blog.keralabuses.in",className:"text-left text-lg font-bold text-gray-800 py-3 border-b border-gray-100",children:"Blog"}),h.jsxs("button",{onClick:()=>{e("add-bus"),n()},className:"bg-teal-600 text-white py-3 rounded-xl font-bold mt-4 flex justify-center items-center gap-2",children:[h.jsx(x0,{size:18})," Add Bus"]})]})}):null,$R=({setView:t,onSeed:e,favorites:n,onSelectFavorite:r,points:s})=>{let i="Newbie";s>=100&&(i="Explorer"),s>=500&&(i="Guide"),s>=1e3&&(i="Expert"),s>=5e3&&(i="Legend");const a=i==="Newbie"?100:i==="Explorer"?500:i==="Guide"?1e3:i==="Expert"?5e3:1e4,l=Math.min(s/a*100,100);return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl p-5 shadow-sm",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"bg-yellow-100 p-2 rounded-full text-yellow-600",children:h.jsx(pT,{size:20})}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-gray-800 text-sm",children:"Your Contribution"}),h.jsxs("p",{className:"text-xs text-gray-500 font-bold text-teal-600",children:["Level: ",i]})]})]}),h.jsx("div",{className:"w-full bg-gray-100 rounded-full h-2.5 mt-2 mb-1",children:h.jsx("div",{className:"bg-yellow-400 h-2.5 rounded-full transition-all duration-1000",style:{width:`${l}%`}})}),h.jsxs("p",{className:"text-[10px] text-gray-400 text-right",children:[s," / ",a," Points"]})]}),h.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-100 rounded-2xl p-6 shadow-sm relative overflow-hidden group",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:h.jsx(jc,{size:80,className:"text-green-600"})}),h.jsxs("div",{className:"flex items-center gap-3 mb-3 relative z-10",children:[h.jsx("div",{className:"bg-green-500 text-white p-2.5 rounded-full shadow-md",children:h.jsx(jc,{size:22})}),h.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:"Join Community"})]}),h.jsx("p",{className:"text-sm text-gray-600 mb-5 leading-relaxed relative z-10",children:"Get live bus updates, strike alerts, and timing changes directly on WhatsApp."}),h.jsx("a",{href:"https://chat.whatsapp.com/KhSr7LeSW503yXSGqJW8YZ",target:"_blank",className:"w-full flex items-center justify-center space-x-2 bg-green-600 text-white font-bold py-3 px-4 rounded-xl shadow-lg hover:bg-green-700 transition-all hover:-translate-y-1 text-sm relative z-10",children:h.jsx("span",{children:"Join Group"})})]}),n&&n.length>0&&h.jsxs("div",{className:"bg-white border border-yellow-200 bg-yellow-50/50 rounded-2xl p-5 shadow-sm",children:[h.jsxs("h4",{className:"font-bold text-yellow-800 text-sm mb-4 flex items-center gap-2",children:[h.jsx(w0,{size:18,className:"fill-yellow-500 text-yellow-500"})," Saved Buses"]}),h.jsx("div",{className:"space-y-3",children:n.map(u=>h.jsxs("div",{onClick:()=>r(u),className:"bg-white p-3 rounded-xl border border-yellow-100 cursor-pointer hover:shadow-md hover:border-yellow-300 transition-all text-sm group",children:[h.jsx("div",{className:"font-bold text-gray-800 group-hover:text-yellow-700 transition-colors",children:u.route}),h.jsxs("div",{className:"text-gray-500 text-xs mt-1 flex justify-between",children:[h.jsx("span",{children:u.time}),h.jsx("span",{className:"text-yellow-600 font-medium",children:u.name})]})]},u.id))})]}),h.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl p-5 shadow-sm",children:[h.jsxs("h4",{className:"font-bold text-gray-800 text-sm mb-5 pb-3 border-b border-gray-50 flex items-center gap-2",children:[h.jsx(ZE,{size:18,className:"text-teal-600"})," Emergency & Help"]}),h.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{label:"Women",icon:LE,color:"text-pink-600",bg:"bg-pink-50 hover:bg-pink-100 border-pink-100",num:"1091"},{label:"Police",icon:rT,color:"text-blue-700",bg:"bg-blue-50 hover:bg-blue-100 border-blue-100",num:"100"},{label:"Ambulance",icon:E0,color:"text-red-600",bg:"bg-red-50 hover:bg-red-100 border-red-100",num:"108"},{label:"Support",icon:PE,color:"text-amber-600",bg:"bg-amber-50 hover:bg-amber-100 border-amber-100",num:"+918086616247"}].map((u,d)=>h.jsxs("a",{href:u.num.includes("+")?`tel:${u.num}`:`tel:${u.num}`,className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border transition-all duration-200 ${u.bg} no-underline group hover:shadow-sm`,children:[h.jsx(u.icon,{size:24,className:`${u.color} group-hover:scale-110 transition-transform`}),h.jsx("span",{className:"text-xs font-bold text-gray-700",children:u.label})]},d))})]})]})},YR=()=>h.jsxs("div",{className:"bg-gradient-to-r from-teal-900 to-teal-800 text-white p-3 flex items-center text-sm gap-4 rounded-xl mb-8 shadow-md mx-4 lg:mx-0 overflow-hidden border border-teal-700/50",children:[h.jsx("span",{className:"bg-amber-400 text-black px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider shrink-0 shadow-sm",children:"LIVE UPDATES"}),h.jsx("div",{className:"flex-1 overflow-hidden relative h-5",children:h.jsx("div",{className:"absolute whitespace-nowrap animate-marquee font-medium text-xs md:text-sm tracking-wide top-0.5",children:"New KSRTC Swift AC Services to Bangalore & Mysore  Private Bus Strike in Kozhikode withdrawn  Check updated monsoon timings for Idukki routes."})})]}),GR=()=>{const[t,e]=ne.useState(""),[n,r]=ne.useState(null),s=()=>{const i=parseFloat(t);i>0&&r({ord:ml(i,"Private"),fast:ml(i,"KSRTC")})};return h.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm h-full",children:[h.jsxs("h4",{className:"font-bold text-gray-800 mb-4 text-sm flex items-center gap-2",children:[h.jsx(uT,{size:18,className:"text-teal-600"})," Fare Calculator (Approx)"]}),h.jsxs("div",{className:"flex gap-2 mb-4",children:[h.jsx("input",{type:"number",placeholder:"Enter KM",className:"w-full p-3 rounded-xl border border-gray-200 text-sm focus:outline-none focus:border-teal-500 bg-gray-50 focus:bg-white transition-all",value:t,onChange:i=>e(i.target.value)}),h.jsx("button",{onClick:s,className:"bg-teal-700 text-white px-5 rounded-xl text-sm font-bold hover:bg-teal-800 shadow-md",children:"Check"})]}),n?h.jsxs("div",{className:"bg-teal-50 p-4 rounded-xl text-sm space-y-2 text-teal-900 border border-teal-100",children:[h.jsxs("div",{className:"flex justify-between border-b border-teal-100 pb-1",children:[h.jsx("span",{children:"Ordinary:"})," ",h.jsxs("span",{className:"font-bold",children:["",n.ord]})]}),h.jsxs("div",{className:"flex justify-between pt-1",children:[h.jsx("span",{children:"Fast / Swift:"})," ",h.jsxs("span",{className:"font-bold",children:["",n.fast]})]})]}):h.jsx("p",{className:"text-xs text-gray-400 italic",children:"Enter distance to see prices."})]})},qR=({onQuickSearch:t})=>h.jsx("div",{className:"pb-8",children:h.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm mb-6",children:[h.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4 pb-3 border-b border-gray-100",children:"Kerala Bus Timings & Route Planner - KSRTC & Private"}),h.jsxs("div",{className:"text-sm text-gray-600 leading-relaxed space-y-3",children:[h.jsxs("p",{children:["Find the most accurate and up-to-date ",h.jsx("strong",{children:"Kerala Bus Timings"}),". Whether you are looking for ",h.jsx("strong",{children:"KSRTC Super Fast"}),", ",h.jsx("strong",{children:"Low Floor AC"}),", ",h.jsx("strong",{children:"Swift Deluxe"}),", or ",h.jsx("strong",{children:"Private Bus"})," schedules, KeralaBuses.in is your ultimate travel companion. We cover all major districts including Malappuram, Kozhikode, Wayanad, Palakkad, Thrissur, Ernakulam, and Thiruvananthapuram."]}),h.jsxs("p",{children:["Plan your journey from ",h.jsx("strong",{children:"Pandikkad to Perinthalmanna"}),", ",h.jsx("strong",{children:"Manjeri to Kozhikode"}),", or any other route with our easy-to-use search engine. Get live updates, report delays, and contribute to the community."]}),h.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:["KSRTC Timing","Private Bus Stand","Kerala Bus Route","Malappuram Bus","Kozhikode Bus","Swift Bus Time","Limited Stop","Ordinary Bus"].map(e=>h.jsx("span",{onClick:()=>t(e),className:"bg-gray-50 text-gray-600 text-[11px] px-3 py-1.5 rounded-full border border-gray-200 hover:bg-teal-600 hover:text-white hover:border-teal-600 cursor-pointer transition-colors font-medium",children:e},e))})]})]})}),WR=({onCancel:t,onAdd:e,showToast:n})=>{const[r,s]=ne.useState({name:"",type:"Private",from:"",to:"",time:"",stops:"",description:"",endTime:"",distance:""}),i=a=>{if(a.preventDefault(),!r.from||!r.to||!r.time){n("Please fill all required fields","info");return}const l=`${r.from} - ${r.to}`,u=$i(r.time),d=r.endTime?$i(r.endTime):"TBD",y=r.stops.split(",").map(R=>R.trim()).filter(R=>R).map(R=>({name:R,time:"TBD"})),g=[{name:r.from,time:u},...y,{name:r.to,time:d}];e({...r,time:u,route:l,votes:0,comments:[],detailedStops:g,status:"On Time",crowd:"Low"})};return h.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl border border-gray-100 animate-[fadeIn_0.3s_ease-out_forwards]",children:[h.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-8 flex items-center gap-3",children:[h.jsx("div",{className:"bg-teal-100 p-2 rounded-lg text-teal-700",children:h.jsx(E0,{size:24})}),"Add New Bus"]}),h.jsxs("form",{onSubmit:i,className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase block mb-2",children:"From *"}),h.jsx("input",{className:"w-full p-3.5 border border-gray-200 rounded-xl text-sm focus:border-teal-500 focus:ring-4 focus:ring-teal-500/10 outline-none transition-all",placeholder:"Origin",onChange:a=>s({...r,from:a.target.value}),required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase block mb-2",children:"To *"}),h.jsx("input",{className:"w-full p-3.5 border border-gray-200 rounded-xl text-sm focus:border-teal-500 focus:ring-4 focus:ring-teal-500/10 outline-none transition-all",placeholder:"Destination",onChange:a=>s({...r,to:a.target.value}),required:!0})]})]}),h.jsxs("div",{className:"grid grid-cols-3 gap-5",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase block mb-2",children:"Start Time *"}),h.jsx("input",{type:"time",className:"w-full p-3.5 border border-gray-200 rounded-xl text-sm focus:border-teal-500 outline-none",onChange:a=>s({...r,time:a.target.value}),required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase block mb-2",children:"End Time (Opt)"}),h.jsx("input",{type:"time",className:"w-full p-3.5 border border-gray-200 rounded-xl text-sm focus:border-teal-500 outline-none",onChange:a=>s({...r,endTime:a.target.value})})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase block mb-2",children:"Bus Type"}),h.jsxs("select",{className:"w-full p-3.5 border border-gray-200 rounded-xl text-sm focus:border-teal-500 outline-none bg-white",onChange:a=>s({...r,type:a.target.value}),children:[h.jsx("option",{value:"Private",children:"Private Bus"}),h.jsx("option",{value:"KSRTC",children:"KSRTC"}),h.jsx("option",{value:"Swift",children:"KSRTC Swift"})]})]})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase block mb-2",children:["Approx. Distance (KM) ",h.jsx("span",{className:"text-gray-300 font-normal normal-case",children:"(For Fare Calculation)"})]}),h.jsx("input",{type:"number",className:"w-full p-3.5 border border-gray-200 rounded-xl text-sm focus:border-teal-500 outline-none",placeholder:"e.g. 45",onChange:a=>s({...r,distance:a.target.value})})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase block mb-2",children:"Bus Name (Optional)"}),h.jsx("input",{className:"w-full p-3.5 border border-gray-200 rounded-xl text-sm focus:border-teal-500 outline-none",placeholder:"e.g. Sreehari Motors",onChange:a=>s({...r,name:a.target.value})})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase block mb-2",children:"Intermediate Stops (Comma Separated)"}),h.jsx("textarea",{className:"w-full p-3.5 border border-gray-200 rounded-xl text-sm focus:border-teal-500 outline-none h-24 resize-none",placeholder:"e.g. Stop A, Stop B, Stop C",onChange:a=>s({...r,stops:a.target.value})})]}),h.jsxs("div",{className:"flex gap-3 pt-4",children:[h.jsx("button",{type:"button",onClick:t,className:"px-6 py-3.5 bg-gray-100 text-gray-600 rounded-xl font-bold text-sm hover:bg-gray-200 transition-colors",children:"Cancel"}),h.jsx("button",{type:"submit",className:"flex-1 px-6 py-3.5 bg-teal-600 text-white rounded-xl font-bold text-sm hover:bg-teal-700 shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all",children:"Submit Bus"})]})]})]})},QR=({bus:t,onBack:e,addComment:n,updateBusDetails:r,onVote:s,reportLate:i,updateCrowd:a,toggleFavorite:l,isFavorite:u,showToast:d})=>{const[p,y]=ne.useState(""),[g,R]=ne.useState(""),[C,b]=ne.useState(!1),[O,I]=ne.useState(!1),[v,w]=ne.useState(t.name),[L,j]=ne.useState(t.route),[K,_]=ne.useState(t.time),[A,E]=ne.useState(t.type),[x,N]=ne.useState(t.description),[S,T]=ne.useState(""),[fe,mt]=ne.useState(""),hn=H=>{H.preventDefault(),!(!p.trim()||!g.trim())&&(n(t.id,{user:g,text:p,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),date:new Date().toDateString()}),y(""))},dn=()=>{const H=K.includes(":")&&!K.includes("M")?$i(K):K;r(t.id,{name:v,route:L,time:H,type:A,description:x}),b(!1)},B=()=>{if(!S)return;const H=fe?$i(fe):"TBD",Z=t.detailedStops?[...t.detailedStops,{name:S,time:H}]:[{name:S,time:H}],we=Z.map(Ee=>Ee.name).join(", ");r(t.id,{detailedStops:Z,stops:we}),T(""),mt("")},Q=(H,Z,we)=>{const Ee=[...t.detailedStops||[]];let xt=we;Z==="time"&&we.includes(":")&&!we.includes("M")&&!we.includes("T")&&(xt=$i(we)),Ee[H]={...Ee[H],[Z]:xt};const ut=Ee.map(wt=>wt.name).join(", ");r(t.id,{detailedStops:Ee,stops:ut})},ee=H=>{const Z=[...t.detailedStops||[]];Z.splice(H,1);const we=Z.map(Ee=>Ee.name).join(", ");r(t.id,{detailedStops:Z,stops:we})};return h.jsxs("div",{className:"animate-[fadeIn_0.3s_ease-out_forwards] pb-10",children:[O&&h.jsxs("div",{className:"fixed inset-0 z-[100] bg-white animate-fade-in flex flex-col",children:[h.jsxs("div",{className:"bg-teal-700 text-white px-6 py-4 flex justify-between items-center shadow-md",children:[h.jsxs("div",{children:[h.jsxs("h2",{className:"text-xl font-bold",children:["Route Map: ",t.route]}),h.jsxs("p",{className:"text-sm opacity-80",children:[t.name," | ",t.time]})]}),h.jsx("button",{onClick:()=>I(!1),className:"bg-white/20 p-2 rounded-full hover:bg-white/30 transition-colors",children:h.jsx(gT,{size:24})})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto p-6 md:p-10 bg-slate-50",children:[h.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100",children:[h.jsxs("div",{className:"grid grid-cols-2 bg-gray-100 p-4 border-b border-gray-200",children:[h.jsx("span",{className:"font-bold text-gray-600 uppercase text-sm tracking-wider",children:"Bus Stop"}),h.jsx("span",{className:"font-bold text-gray-600 uppercase text-sm tracking-wider text-right",children:"Time"})]}),t.detailedStops&&t.detailedStops.map((H,Z)=>h.jsxs("div",{className:"grid grid-cols-2 p-5 border-b border-gray-50 last:border-0 hover:bg-teal-50/50 transition-colors items-center group",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-8 h-8 rounded-full bg-teal-100 text-teal-700 font-bold flex items-center justify-center text-sm group-hover:bg-teal-600 group-hover:text-white transition-colors",children:Z+1}),h.jsx("span",{className:"text-lg font-bold text-gray-800",children:H.name})]}),h.jsx("div",{className:"text-right",children:h.jsx("span",{className:"text-lg font-mono font-bold text-teal-700 bg-teal-50 px-4 py-1.5 rounded-lg border border-teal-100",children:H.time})})]},Z))]}),h.jsx("div",{className:"text-center mt-8",children:h.jsx("button",{onClick:()=>I(!1),className:"bg-gray-800 text-white px-8 py-3 rounded-xl font-bold hover:bg-black transition-colors",children:"Close View"})})]})]}),h.jsxs("div",{className:"bg-white px-6 py-4 border-b border-gray-100 flex items-center text-teal-700 font-bold text-sm cursor-pointer sticky top-0 z-20 shadow-sm rounded-t-xl hover:bg-gray-50 transition-colors",onClick:e,children:[h.jsx(ji,{className:"rotate-180 mr-2",size:20})," Back to Results"]}),h.jsxs("div",{className:"p-0 md:p-6",children:[h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8 mb-8 mt-6 md:mt-0 relative",children:[h.jsxs("div",{className:"flex justify-end gap-3 mb-6",children:[h.jsxs("button",{onClick:()=>l(t),className:`p-2.5 rounded-xl border transition-all shadow-sm flex items-center gap-2 ${u?"bg-yellow-50 border-yellow-200 text-yellow-600":"bg-white border-gray-200 text-gray-500 hover:text-yellow-500 hover:border-yellow-200"}`,children:[h.jsx(w0,{size:18,className:u?"fill-yellow-500":""}),h.jsx("span",{className:"text-xs font-bold",children:u?"Saved":"Save"})]}),!C&&h.jsxs("button",{onClick:()=>b(!0),className:"text-gray-600 hover:text-teal-700 flex items-center gap-2 text-xs bg-gray-50 px-4 py-2.5 rounded-xl border border-gray-200 hover:bg-white hover:border-gray-300 transition-all font-bold",children:[h.jsx(QE,{size:16})," Edit Details"]})]}),C?h.jsxs("div",{className:"space-y-6",children:[h.jsx("h3",{className:"font-bold text-xl text-gray-800 border-b pb-4",children:"Edit Bus Details"}),h.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase block mb-2",children:"Route (From - To)"}),h.jsx("input",{className:"w-full p-3 border border-gray-200 rounded-lg text-sm focus:border-teal-500 outline-none",value:L,onChange:H=>j(H.target.value)})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase block mb-2",children:"Start Time"}),h.jsx("input",{type:"time",className:"w-full p-3 border border-gray-200 rounded-lg text-sm focus:border-teal-500 outline-none",onChange:H=>_(H.target.value)}),h.jsxs("p",{className:"text-[10px] text-gray-400 mt-1",children:["Current: ",t.time]})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase block mb-2",children:"Bus Name"}),h.jsx("input",{className:"w-full p-3 border border-gray-200 rounded-lg text-sm focus:border-teal-500 outline-none",value:v,onChange:H=>w(H.target.value)})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase block mb-2",children:"Type"}),h.jsxs("select",{className:"w-full p-3 border border-gray-200 rounded-lg text-sm focus:border-teal-500 outline-none bg-white",value:A,onChange:H=>E(H.target.value),children:[h.jsx("option",{value:"KSRTC",children:"KSRTC"}),h.jsx("option",{value:"Private",children:"Private"}),h.jsx("option",{value:"Swift",children:"Swift"})]})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase block mb-2",children:"Description"}),h.jsx("textarea",{className:"w-full p-3 border border-gray-200 rounded-lg text-sm h-24 focus:border-teal-500 outline-none resize-none",value:x,onChange:H=>N(H.target.value)})]}),h.jsxs("div",{className:"bg-slate-50 p-5 rounded-xl border border-slate-200",children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase block mb-3",children:"Manage Stops"}),h.jsx("div",{className:"mb-4 space-y-2",children:t.detailedStops&&t.detailedStops.map((H,Z)=>h.jsxs("div",{className:"flex gap-3 items-center bg-white p-3 border border-gray-200 rounded-lg shadow-sm",children:[h.jsx("input",{className:"flex-1 p-1 border-b border-transparent focus:border-teal-500 focus:outline-none text-sm font-medium text-gray-700",value:H.name,onChange:we=>Q(Z,"name",we.target.value)}),h.jsxs("div",{className:"flex items-center gap-1 border-l pl-3",children:[h.jsx(tl,{size:12,className:"text-gray-400"}),h.jsx("input",{type:"text",className:"w-20 p-1 border-b border-transparent focus:border-teal-500 focus:outline-none text-right text-xs text-gray-500",value:H.time,placeholder:"TBD",onChange:we=>Q(Z,"time",we.target.value)})]}),h.jsx("button",{onClick:()=>ee(Z),className:"text-red-400 hover:text-red-600 hover:bg-red-50 p-2 rounded-lg transition-colors",children:h.jsx(hT,{size:16})})]},Z))}),h.jsxs("div",{className:"flex gap-3 mt-4 pt-4 border-t border-slate-200",children:[h.jsx("input",{className:"flex-1 p-3 border border-gray-200 rounded-lg text-sm focus:border-teal-500 outline-none",placeholder:"New Stop Name",value:S,onChange:H=>T(H.target.value)}),h.jsx("input",{type:"time",className:"w-32 p-3 border border-gray-200 rounded-lg text-sm focus:border-teal-500 outline-none",value:fe,onChange:H=>mt(H.target.value)}),h.jsx("button",{onClick:B,className:"bg-teal-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-teal-700 shadow-md",children:"+"})]})]}),h.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-100",children:[h.jsxs("button",{onClick:dn,className:"bg-teal-600 text-white px-6 py-3 rounded-xl text-sm font-bold flex items-center gap-2 shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all",children:[h.jsx(eT,{size:18})," Save Changes"]}),h.jsx("button",{onClick:()=>b(!1),className:"bg-white text-gray-600 px-6 py-3 rounded-xl text-sm font-bold border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"})]})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start mb-6 gap-4",children:h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 leading-tight mb-2",children:t.name||"Bus Service"}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"text-lg text-gray-600 font-medium",children:t.route}),h.jsx("span",{className:`text-[10px] font-bold px-2.5 py-1 rounded-full uppercase tracking-wide border ${t.type==="KSRTC"?"bg-red-50 text-red-600 border-red-100":"bg-blue-50 text-blue-600 border-blue-100"}`,children:t.type})]})]})}),h.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-emerald-50 rounded-2xl p-6 border border-teal-100 flex flex-col md:flex-row gap-6 mb-8 shadow-sm",children:[h.jsx("div",{className:"flex-1",children:h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx(tl,{size:28,className:"text-teal-600"}),h.jsxs("div",{children:[h.jsx("span",{className:"text-3xl font-black tracking-tight text-gray-800",children:t.time}),h.jsx("p",{className:"text-xs text-teal-700 font-medium",children:"Scheduled Departure"})]})]})}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("button",{onClick:()=>s(t.id),className:"flex-1 md:flex-none flex flex-col items-center justify-center gap-1 bg-white px-5 py-3 rounded-xl border border-teal-100 text-teal-700 hover:bg-teal-600 hover:text-white hover:border-teal-600 transition-all shadow-sm group",children:[h.jsx(aT,{size:20,className:`mb-1 transition-transform group-hover:scale-110 ${t.votes>0?"fill-teal-100 group-hover:fill-white/20":""}`}),h.jsxs("span",{className:"text-xs font-bold",children:[t.votes||0," Reliable"]})]}),h.jsxs("div",{className:"flex-1 md:flex-none bg-white p-3 rounded-xl border border-teal-100 shadow-sm",children:[h.jsxs("div",{className:"text-[10px] font-bold text-gray-400 uppercase mb-2 flex items-center gap-1",children:[h.jsx(TE,{size:12})," Live Crowd"]}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{onClick:()=>a(t.id,"Low"),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition-colors ${t.crowdLevel==="Low"?"bg-green-500 text-white":"bg-green-50 text-green-700 hover:bg-green-100"}`,children:"Low"}),h.jsx("button",{onClick:()=>a(t.id,"Medium"),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition-colors ${t.crowdLevel==="Medium"?"bg-yellow-500 text-white":"bg-yellow-50 text-yellow-700 hover:bg-yellow-100"}`,children:"Med"}),h.jsx("button",{onClick:()=>a(t.id,"High"),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition-colors ${t.crowdLevel==="High"?"bg-red-500 text-white":"bg-red-50 text-red-700 hover:bg-red-100"}`,children:"High"})]})]})]})]}),t.status==="Late"&&t.statusDate===new Date().toDateString()&&h.jsxs("div",{className:"mb-8 bg-amber-50 text-amber-800 p-4 rounded-xl border border-amber-200 flex items-start gap-3 shadow-sm animate-pulse",children:[h.jsx(Kc,{size:24,className:"shrink-0 mt-0.5"}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-sm",children:"Reported Late Today"}),h.jsx("p",{className:"text-xs opacity-80 mt-1",children:"Multiple users have reported delays for this service today."})]})]}),h.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 text-white p-4 rounded-xl mb-6 shadow-md flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsxs("h4",{className:"font-bold text-lg flex items-center gap-2",children:[h.jsx($p,{size:20})," Real-Time Bus Display"]}),h.jsx("p",{className:"text-xs opacity-90",children:"Track your bus live at major stations and never miss a ride again."})]}),h.jsx("div",{className:"bg-white/20 p-2 rounded-lg animate-pulse",children:h.jsx(qE,{size:24})})]}),h.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 mb-8 text-sm text-gray-600 leading-relaxed shadow-sm",children:[h.jsxs("h4",{className:"font-bold text-gray-900 mb-3 flex items-center gap-2",children:[h.jsx(T0,{size:18,className:"text-blue-500"})," Service Overview"]}),h.jsxs("p",{children:["This ",h.jsx("strong",{children:t.type})," bus service, known as ",h.jsx("em",{children:t.name}),", departs at ",h.jsx("strong",{children:t.time}),". It operates on the ",h.jsx("strong",{children:t.route})," route.",t.stops?`Major stops include ${t.stops}. `:"","Passengers looking for reliable travel between these destinations can choose this service for a comfortable journey."]}),t.description&&h.jsxs("p",{className:"mt-4 text-xs text-gray-500 bg-gray-50 p-3 rounded-lg border border-gray-100 italic",children:["Operator Note: ",t.description]})]}),t.detailedStops&&t.detailedStops.length>0&&h.jsxs("div",{className:"mb-8",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsxs("h4",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center gap-2",children:[h.jsx($p,{size:16,className:"text-gray-400"})," Route Schedule"]}),h.jsxs("button",{onClick:()=>I(!0),className:"text-teal-600 font-bold text-xs flex items-center gap-1 hover:bg-teal-50 px-3 py-1.5 rounded-lg transition-colors",children:[h.jsx(FE,{size:14})," View Full Route Map"]})]}),h.jsx("div",{className:"relative border-l-2 border-teal-100 ml-4 space-y-8 pb-2",children:t.detailedStops.map((H,Z)=>h.jsxs("div",{className:"ml-8 relative group",children:[h.jsx("span",{className:"absolute -left-[39px] top-1 w-4 h-4 bg-white rounded-full border-4 border-teal-500 shadow-sm group-hover:scale-110 transition-transform"}),h.jsxs("div",{className:"flex justify-between items-start p-3 -mt-3 rounded-xl hover:bg-gray-50 transition-colors",children:[h.jsx("span",{className:"text-base font-bold text-gray-800",children:H.name}),h.jsx("span",{className:"text-xs font-mono font-bold text-teal-700 bg-teal-50 px-3 py-1 rounded-full border border-teal-100",children:H.time})]})]},Z))})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6 pt-6 border-t border-gray-100",children:[h.jsxs("button",{className:"bg-green-500 text-white py-4 rounded-2xl font-bold flex items-center justify-center gap-2 hover:bg-green-600 transition-colors shadow-lg hover:shadow-green-200/50 hover:-translate-y-0.5 text-sm",children:[h.jsx(jc,{size:20})," Share via WhatsApp"]}),h.jsxs("button",{onClick:()=>i(t.id),className:"bg-amber-50 text-amber-700 border border-amber-100 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 hover:bg-amber-100 transition-colors text-sm",children:[h.jsx(Kc,{size:20})," Report Late"]})]})]})]}),h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8",children:[h.jsxs("h3",{className:"font-bold text-xl text-gray-900 mb-6 flex items-center gap-3",children:[h.jsx("div",{className:"bg-teal-50 p-2 rounded-lg text-teal-600",children:h.jsx(YE,{size:20})}),"Live Updates"]}),h.jsxs("div",{className:"bg-gray-50 p-5 rounded-2xl mb-8 border border-gray-100",children:[h.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase mb-4",children:"Post an Update"}),h.jsxs("form",{onSubmit:hn,children:[h.jsx("input",{type:"text",placeholder:"Your Name (Optional)",className:"w-full mb-3 p-3.5 rounded-xl border border-gray-200 text-sm focus:outline-none focus:border-teal-500 bg-white",value:g,onChange:H=>R(H.target.value)}),h.jsx("textarea",{placeholder:"Bus was late? Changed route? Share info with the community...",className:"w-full mb-4 p-3.5 rounded-xl border border-gray-200 text-sm focus:outline-none focus:border-teal-500 h-24 resize-none bg-white",value:p,onChange:H=>y(H.target.value)}),h.jsx("button",{type:"submit",className:"w-full bg-teal-700 text-white font-bold py-3.5 rounded-xl hover:bg-teal-800 transition text-sm shadow-md",children:"Post Update"})]})]}),h.jsx("div",{className:"space-y-6",children:t.comments&&t.comments.filter(H=>H.date===new Date().toDateString()).length>0?t.comments.filter(H=>H.date===new Date().toDateString()).slice().reverse().map((H,Z)=>h.jsxs("div",{className:"flex gap-4 pb-6 border-b border-gray-50 last:border-0 last:pb-0 animate-[fadeIn_0.3s_ease-out_forwards]",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-teal-400 to-emerald-500 flex items-center justify-center text-white font-bold text-sm shrink-0 shadow-md",children:H.user?H.user.charAt(0).toUpperCase():"U"}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("h5",{className:"font-bold text-gray-900 text-sm",children:H.user||"Anonymous User"}),h.jsx("span",{className:"text-[10px] text-gray-400 font-medium bg-gray-50 px-2 py-0.5 rounded-full",children:H.time})]}),h.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:H.text})]})]},Z)):h.jsxs("div",{className:"text-center py-10 bg-gray-50 rounded-2xl border border-dashed border-gray-200",children:[h.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"No updates for today yet."}),h.jsx("p",{className:"text-xs text-gray-300",children:"Be the first to help others!"})]})})]})]})]})};function JR(){const[t,e]=ne.useState("home"),[n,r]=ne.useState(null),[s,i]=ne.useState([]),[a,l]=ne.useState(!0),[u,d]=ne.useState([]),[p,y]=ne.useState([]),[g,R]=ne.useState(!1),[C,b]=ne.useState(0),[O,I]=ne.useState("all"),v=(M,z="info")=>{const W=Date.now();y(Pe=>[...Pe,{id:W,message:M,type:z}]),setTimeout(()=>y(Pe=>Pe.filter(Te=>Te.id!==W)),3e3)},[w,L]=ne.useState(""),[j,K]=ne.useState(""),[_,A]=ne.useState("all"),[E,x]=ne.useState([]),[N,S]=ne.useState([]);ne.useEffect(()=>{const M=localStorage.getItem("keralaBusesFavs");M&&d(JSON.parse(M));const z=localStorage.getItem("keralaBusesPoints");z&&b(parseInt(z))},[]),ne.useEffect(()=>{document.title=t==="detail"&&n?`${n.route} Bus Timing - KeralaBuses.in`:"KeralaBuses.in - Find Private & KSRTC Bus Timings";const M="json-ld-schema";let z=document.getElementById(M);z||(z=document.createElement("script"),z.id=M,z.type="application/ld+json",document.head.appendChild(z));const W=UR(t,n);W&&(z.text=JSON.stringify(W))},[t,n]);const T=M=>{let z;u.some(W=>W.id===M.id)?(z=u.filter(W=>W.id!==M.id),v("Removed from favorites","info")):(z=[...u,{id:M.id,route:M.route,time:M.time,name:M.name}],v("Added to favorites","success")),d(z),localStorage.setItem("keralaBusesFavs",JSON.stringify(z))},fe=M=>{const z=C+M;b(z),localStorage.setItem("keralaBusesPoints",z.toString()),M>5&&v(`+${M} Contribution Points!`,"success")};ne.useEffect(()=>{const M=()=>{const z=window.location.hash;if(z.startsWith("#/bus/")){const W=z.replace("#/bus/","");if(s.length>0){const Pe=s.find(Te=>Te.id===W);Pe&&(r(Pe),e("detail"))}}else if(z.startsWith("#/search/")){const W=z.split("/");W[2]&&L(decodeURIComponent(W[2])),W[3]&&K(decodeURIComponent(W[3])),W[4]&&A(W[4]),e("results")}else["ksrtc","private","add-bus","about","contact","privacy","terms","disclaimer"].includes(t)||t!=="detail"&&t!=="results"&&e("home")};return window.addEventListener("hashchange",M),!a&&s.length>0&&M(),()=>window.removeEventListener("hashchange",M)},[s,a]),ne.useEffect(()=>{if(!We)return;const M=RR($u(We,"buses"),SR("time")),z=kR(M,W=>{const Pe=W.docs.map(Te=>({id:Te.id,...Te.data()}));if(i(Pe),l(!1),n){const Te=Pe.find(Mt=>Mt.id===n.id);Te&&r(Te)}},W=>{console.error(W),l(!1)});return()=>z()},[n]);const mt=async(M,z)=>{if(!We)return v("Firebase not connected!","error");await _i(Xr(We,"buses",M),{comments:eg(z)}),v("Update posted!","success"),fe(2)},hn=async(M,z)=>{if(!We)return v("Firebase not connected!","error");await _i(Xr(We,"buses",M),z),v("Bus details updated!","success"),fe(10)},dn=async(M,z)=>{if(!We)return v("Firebase not connected!","error");await _i(Xr(We,"buses",M),{crowdLevel:z}),fe(1)},B=async M=>{if(!We)return v("Firebase not connected!","error");const z=new Date().toDateString(),W=`reported_${M}_${z}`;if(localStorage.getItem(W)){v("Already reported today","info");return}await _i(Xr(We,"buses",M),{status:"Late",statusDate:z,comments:eg({user:"Community Alert",text:" This bus was reported late by a user.",time:"Just now",date:z})}),localStorage.setItem(W,"true"),v("Report submitted. Thanks!","success"),fe(5)},Q=async M=>{if(!We)return v("Firebase not connected!","error");try{await og($u(We,"buses"),M),v("Bus added successfully! +20 Points","success"),fe(20),e("home"),window.location.hash=""}catch(z){console.error(z),v("Error adding bus","error")}},ee=async M=>{if(!We)return v("Firebase not connected!","error");const z=new Date().toDateString(),W=`voted_${M}_${z}`;localStorage.getItem(W)||(await _i(Xr(We,"buses",M),{votes:wR(1)}),localStorage.setItem(W,"true"),fe(1))},H=async()=>{if(!We)return v("Firebase not connected!","error");for(const M of VR)await og($u(We,"buses"),M);v("Sample buses added!","success")},Z=()=>{const M=w;L(j),K(M)},we=(M,z)=>{if(!M){z==="from"?x([]):S([]);return}const W=DR.filter(Pe=>Pe.toLowerCase().startsWith(M.toLowerCase())).slice(0,8);z==="from"?x(W):S(W)},Ee=(M,z)=>{const W=M.target.value;z==="from"?L(W):K(W),we(W,z)},xt=(M,z)=>{z==="from"?L(M):K(M),z==="from"?x([]):S([])},ut=()=>{window.location.hash=`#/search/${encodeURIComponent(w)}/${encodeURIComponent(j)}/${_}`},wt=M=>{M.includes("KSRTC")||M.includes("Private"),K(M),L(""),A("all"),e("results")},dr=M=>{window.location.hash=`#/bus/${M.id}`},bo=M=>{const z=s.find(W=>W.id===M.id);z?dr(z):v("Bus not found in live list","error")},Br=s.filter(M=>{const z=w.toLowerCase().trim(),W=j.toLowerCase().trim(),Pe=(M.stops||M.route||"").toLowerCase(),Te=`${(M.from||"").toLowerCase()} ${Pe} ${(M.to||"").toLowerCase()}`,Mt=!z||Te.includes(z),zr=!W||Te.includes(W);let Gs=!0;if(z&&W&&Mt&&zr){const Le=Te.indexOf(z),Nn=Te.indexOf(W);Le>=Nn&&(Gs=!1)}if(t==="ksrtc"&&M.type!=="KSRTC"||t==="private"&&M.type!=="Private")return!1;if(O==="upcoming"){const Le=new Date,Nn=Le.getHours()*60+Le.getMinutes();let Mo=M.time;if(w&&M.detailedStops){const Ws=M.detailedStops.find(fr=>fr.name.toLowerCase()===w.toLowerCase());Ws&&Ws.time!=="TBD"&&(Mo=Ws.time)}const qs=OR(Mo);if(qs!==-1&&qs<Nn)return!1}const ze=_==="all"||M.type&&M.type.toLowerCase()===_.toLowerCase();return Mt&&zr&&Gs&&ze});return h.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans text-gray-700 pb-20",children:[h.jsx("style",{children:`
          @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap');
          body { font-family: 'Poppins', sans-serif; }
          .animate-marquee { animation: marquee 15s linear infinite; }
          @keyframes marquee { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }
          @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
          .animate-slide-up { animation: slideUp 0.3s ease-out forwards; }
          .animate-fade-in { animation: fadeIn 0.2s ease-out forwards; }
          @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
          ::-webkit-scrollbar { width: 6px; }
          ::-webkit-scrollbar-track { background: #f1f1f1; }
          ::-webkit-scrollbar-thumb { background: #ccc; border-radius: 3px; }
          ::-webkit-scrollbar-thumb:hover { background: #00695c; }
        `}),h.jsx(jR,{toasts:p}),h.jsx(BR,{setView:e,toggleMenu:()=>R(!g)}),h.jsx(zR,{isOpen:g,setView:e,closeMenu:()=>R(!1)}),h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[h.jsxs("div",{className:"lg:col-span-8 space-y-6",children:[(t==="home"||t==="ksrtc"||t==="private")&&h.jsxs(h.Fragment,{children:[h.jsx(KR,{}),h.jsx(YR,{}),h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-[0_5px_25px_rgba(0,0,0,0.06)] border border-gray-100 relative z-10",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-5 text-gray-800 font-extrabold text-lg",children:[h.jsx(Yp,{className:"text-teal-700",size:24}),t==="ksrtc"?"Search KSRTC Buses":t==="private"?"Search Private Buses":"Search Bus Routes"]}),h.jsx("div",{className:"flex bg-gray-100 p-1 rounded-lg mb-5",children:["all","ksrtc","private"].map(M=>h.jsx("button",{onClick:()=>A(M),className:`flex-1 py-2 text-xs font-bold rounded-md transition-all uppercase ${_===M?"bg-white text-teal-800 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:M==="all"?"All Buses":M==="ksrtc"?"KSRTC / Swift":"Private Bus"},M))}),h.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center relative",children:[h.jsxs("div",{className:"w-full relative",children:[h.jsx("label",{className:"text-[11px] font-bold text-gray-400 uppercase mb-1 block",children:"Departure From"}),h.jsxs("div",{className:"relative",children:[h.jsx(zp,{className:"absolute left-3.5 top-3.5 text-gray-400",size:18}),h.jsx("input",{type:"text",value:w,onChange:M=>Ee(M,"from"),placeholder:"Origin (e.g. Pandikkad)",className:"w-full pl-11 pr-4 py-3.5 bg-gray-50 border border-gray-200 rounded-xl font-medium text-gray-800 focus:outline-none focus:border-teal-600 focus:bg-white focus:ring-4 focus:ring-teal-600/10 transition-all"}),E.length>0&&h.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-100 rounded-b-xl shadow-xl z-50 max-h-60 overflow-y-auto",children:E.map((M,z)=>h.jsx("div",{onClick:()=>xt(M,"from"),className:"px-4 py-3 hover:bg-teal-50 hover:text-teal-800 cursor-pointer text-sm border-b border-gray-50 last:border-0",children:M},z))})]})]}),h.jsx("div",{className:"relative z-10 md:mt-6",children:h.jsx("button",{onClick:Z,className:"w-10 h-10 bg-white border border-gray-200 rounded-full flex items-center justify-center text-teal-700 shadow-sm hover:bg-teal-50 hover:rotate-180 hover:border-teal-600 transition-all duration-300",children:h.jsx(vE,{size:18})})}),h.jsxs("div",{className:"w-full relative",children:[h.jsx("label",{className:"text-[11px] font-bold text-gray-400 uppercase mb-1 block",children:"Going To"}),h.jsxs("div",{className:"relative",children:[h.jsx(zp,{className:"absolute left-3.5 top-3.5 text-gray-400",size:18}),h.jsx("input",{type:"text",value:j,onChange:M=>Ee(M,"to"),placeholder:"Destination",className:"w-full pl-11 pr-4 py-3.5 bg-gray-50 border border-gray-200 rounded-xl font-medium text-gray-800 focus:outline-none focus:border-teal-600 focus:bg-white focus:ring-4 focus:ring-teal-600/10 transition-all"}),N.length>0&&h.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-100 rounded-b-xl shadow-xl z-50 max-h-60 overflow-y-auto",children:N.map((M,z)=>h.jsx("div",{onClick:()=>xt(M,"to"),className:"px-4 py-3 hover:bg-teal-50 hover:text-teal-800 cursor-pointer text-sm border-b border-gray-50 last:border-0",children:M},z))})]})]})]}),h.jsxs("div",{className:"flex gap-3 mt-5",children:[h.jsx("button",{onClick:()=>{L(""),K("")},className:"px-6 py-3 bg-gray-100 text-gray-600 font-bold rounded-xl text-sm hover:bg-gray-200 transition-colors",children:"Clear"}),h.jsx("button",{onClick:ut,className:"flex-1 py-3 bg-gradient-to-br from-teal-700 to-teal-900 text-white font-bold rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all text-sm uppercase tracking-wider",children:"Find My Bus"})]})]}),(t==="ksrtc"||t==="private")&&h.jsxs("div",{className:"animate-[fadeIn_0.3s_ease-out_forwards]",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[h.jsx(Ui,{size:20,className:"text-teal-600"}),t==="ksrtc"?"KSRTC Fleet":"Private Buses"]}),h.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[h.jsx("button",{onClick:()=>I("all"),className:`px-3 py-1 text-xs font-bold rounded transition-all ${O==="all"?"bg-white shadow text-teal-800":"text-gray-500"}`,children:"All"}),h.jsx("button",{onClick:()=>I("upcoming"),className:`px-3 py-1 text-xs font-bold rounded transition-all ${O==="upcoming"?"bg-white shadow text-teal-800":"text-gray-500"}`,children:"Upcoming"})]})]}),a?h.jsx("div",{className:"py-10 text-center text-gray-400 text-sm",children:"Loading live data..."}):h.jsx("div",{className:"space-y-3",children:Br.length>0?Br.map(M=>{let z=M.time,W=!1;if(w&&M.detailedStops){const Te=M.detailedStops.find(Mt=>Mt.name.toLowerCase()===w.toLowerCase());Te&&Te.time!=="TBD"&&(z=Te.time,W=!0)}const Pe=ml(M.distance,M.type);return h.jsx("div",{onClick:()=>dr(M),className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md cursor-pointer flex justify-between items-center group transition-all relative",children:h.jsxs("div",{className:"flex gap-5 w-full",children:[h.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center text-white shadow-sm shrink-0 ${M.type==="KSRTC"?"bg-red-500":"bg-blue-600"}`,children:h.jsx(Ui,{size:24})}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-xl text-teal-900 leading-tight group-hover:text-teal-700 transition-colors",children:M.name}),h.jsx("p",{className:"text-base text-gray-600 font-medium mt-1",children:M.route})]}),h.jsxs("span",{className:"text-[10px] bg-green-50 text-green-600 px-2 py-1 rounded-full border border-green-100 font-bold whitespace-nowrap",children:["Verified ",M.votes>0&&`(${M.votes})`]})]}),h.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-3",children:[h.jsxs("span",{className:"bg-gray-100 text-gray-700 px-3 py-1.5 rounded-lg text-sm font-mono font-bold flex items-center gap-1",children:[h.jsx(tl,{size:14})," ",z]}),W&&h.jsxs("span",{className:"text-[10px] text-teal-600 font-bold bg-teal-50 px-2 py-1 rounded border border-teal-100",children:["From ",w]}),h.jsxs("span",{className:"text-xs text-gray-500",children:[" ",M.type]}),h.jsxs("span",{className:"text-[10px] text-gray-400 bg-gray-50 px-2 py-1 rounded border border-gray-100",children:["Crowd: ",M.crowdLevel||"Low"]}),h.jsxs("span",{className:"text-[10px] text-gray-400 bg-gray-50 px-2 py-1 rounded border border-gray-100",children:["Est. Fare: ",Pe?`${Pe}`:"Check"]})]}),!W&&w&&M.stops&&M.stops.toLowerCase().includes(w.toLowerCase())&&h.jsxs("div",{className:"mt-2 text-[11px] text-teal-600 italic",children:["Via: ...",w,"..."]})]}),h.jsxs("div",{className:"flex flex-col justify-center items-end gap-2",children:[h.jsx(ji,{size:24,className:"text-gray-300 group-hover:text-teal-600"}),h.jsx("button",{className:"text-[10px] bg-teal-600 text-white px-3 py-1.5 rounded shadow-sm opacity-0 group-hover:opacity-100 transition-opacity font-bold",children:"View Details"})]})]})},M.id)}):h.jsxs("div",{className:"text-center py-8 bg-white rounded-xl border border-dashed border-gray-200 text-gray-400 text-sm",children:["No buses found matching your search.",s.length===0&&h.jsxs("div",{className:"mt-4",children:[h.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Database is empty. Add sample data to test."}),h.jsx("button",{onClick:H,className:"text-xs bg-blue-50 text-blue-600 px-3 py-1 rounded-full font-bold hover:bg-blue-100 border border-blue-100",children:"+ Load Sample Data"})]})]})})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm",children:[h.jsx("h4",{className:"font-bold text-gray-800 mb-3 text-sm",children:"Traveler's Toolkit"}),h.jsx("div",{className:"space-y-0",children:[{t:"Official KSRTC Booking",l:"https://online.keralartc.com"},{t:"Check Fare Rates (MVD)",l:"https://mvd.kerala.gov.in"},{t:"Live Traffic Status",l:"https://google.com/maps"}].map((M,z)=>h.jsxs("a",{href:M.l,target:"_blank",className:"flex items-center gap-3 py-2.5 text-[13px] font-medium text-gray-600 hover:bg-gray-50 hover:text-teal-700 hover:pl-2 rounded-lg transition-all border-b border-gray-50 last:border-0",children:[h.jsx(ji,{size:14,className:"text-gray-300"})," ",M.t]},z))})]}),h.jsx(GR,{})]}),h.jsx(qR,{onQuickSearch:wt})]}),t==="add-bus"&&h.jsx(WR,{onCancel:()=>e("home"),onAdd:Q,showToast:v}),["about","contact","privacy","terms","disclaimer"].includes(t)&&h.jsx(FR,{type:t,onBack:()=>e("home")}),t==="results"&&h.jsxs("div",{className:"animate-[fadeIn_0.3s_ease-out_forwards]",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[h.jsx(Yp,{size:20,className:"text-teal-600"}),"Results for ",w||"All"," ",j&&`to ${j}`]}),h.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[h.jsx("button",{onClick:()=>I("all"),className:`px-3 py-1 text-xs font-bold rounded transition-all ${O==="all"?"bg-white shadow text-teal-800":"text-gray-500"}`,children:"All"}),h.jsx("button",{onClick:()=>I("upcoming"),className:`px-3 py-1 text-xs font-bold rounded transition-all ${O==="upcoming"?"bg-white shadow text-teal-800":"text-gray-500"}`,children:"Upcoming"})]})]}),h.jsx("button",{onClick:()=>{window.location.hash="",e("home")},className:"text-sm text-gray-500 hover:text-teal-600 underline mb-4 block",children:"Back to Search"}),a?h.jsx("div",{className:"py-10 text-center text-gray-400 text-sm",children:"Loading live data..."}):h.jsx("div",{className:"space-y-3",children:Br.length>0?Br.map(M=>{let z=M.time,W=!1;if(w&&M.detailedStops){const Te=M.detailedStops.find(Mt=>Mt.name.toLowerCase()===w.toLowerCase());Te&&Te.time!=="TBD"&&(z=Te.time,W=!0)}const Pe=ml(M.distance,M.type);return h.jsx("div",{onClick:()=>dr(M),className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md cursor-pointer flex justify-between items-center group transition-all relative",children:h.jsxs("div",{className:"flex gap-5 w-full",children:[h.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center text-white shadow-sm shrink-0 ${M.type==="KSRTC"?"bg-red-500":"bg-blue-600"}`,children:h.jsx(Ui,{size:24})}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-xl text-teal-900 leading-tight group-hover:text-teal-700 transition-colors",children:M.name}),h.jsx("p",{className:"text-base text-gray-600 font-medium mt-1",children:M.route})]}),h.jsxs("span",{className:"text-[10px] bg-green-50 text-green-600 px-2 py-1 rounded-full border border-green-100 font-bold whitespace-nowrap",children:["Verified ",M.votes>0&&`(${M.votes})`]})]}),h.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-3",children:[h.jsxs("span",{className:"bg-gray-100 text-gray-700 px-3 py-1.5 rounded-lg text-sm font-mono font-bold flex items-center gap-1",children:[h.jsx(tl,{size:14})," ",z]}),W&&h.jsxs("span",{className:"text-[10px] text-teal-600 font-bold bg-teal-50 px-2 py-1 rounded border border-teal-100",children:["From ",w]}),h.jsxs("span",{className:"text-xs text-gray-500",children:[" ",M.type]}),h.jsxs("span",{className:"text-[10px] text-gray-400 bg-gray-50 px-2 py-1 rounded border border-gray-100",children:["Crowd: ",M.crowdLevel||"Low"]}),h.jsxs("span",{className:"text-[10px] text-gray-400 bg-gray-50 px-2 py-1 rounded border border-gray-100",children:["Est. Fare: ",Pe?`${Pe}`:"Check"]})]}),!W&&w&&M.stops&&M.stops.toLowerCase().includes(w.toLowerCase())&&h.jsxs("div",{className:"mt-2 text-[11px] text-teal-600 italic",children:["Via: ...",w,"..."]})]}),h.jsxs("div",{className:"flex flex-col justify-center items-end gap-2",children:[h.jsx(ji,{size:24,className:"text-gray-300 group-hover:text-teal-600"}),h.jsx("button",{className:"text-[10px] bg-teal-600 text-white px-3 py-1.5 rounded shadow-sm opacity-0 group-hover:opacity-100 transition-opacity font-bold",children:"View Details"})]})]})},M.id)}):h.jsxs("div",{className:"text-center py-8 bg-white rounded-xl border border-dashed border-gray-200 text-gray-400 text-sm",children:["No buses found matching your search.",s.length===0&&h.jsxs("div",{className:"mt-4",children:[h.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Database is empty. Add sample data to test."}),h.jsx("button",{onClick:H,className:"text-xs bg-blue-50 text-blue-600 px-3 py-1 rounded-full font-bold hover:bg-blue-100 border border-blue-100",children:"+ Load Sample Data"})]})]})})]}),t==="detail"&&n&&h.jsx(QR,{bus:n,onBack:()=>{window.location.hash="",e("results")},addComment:mt,updateBusDetails:hn,onVote:ee,reportLate:B,updateCrowd:dn,toggleFavorite:T,isFavorite:u.some(M=>M.id===n.id),showToast:v})]}),h.jsx("div",{className:"lg:col-span-4",children:h.jsx($R,{setView:e,onSeed:H,favorites:u,onSelectFavorite:bo,points:C})})]}),h.jsx(HR,{setView:e,onQuickSearch:wt})]})]})}Yu.createRoot(document.getElementById("root")).render(h.jsx(t_.StrictMode,{children:h.jsx(JR,{})}));
